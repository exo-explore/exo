import{d as je,a as y,c as Ae,f as M,t as ja}from"../chunks/cZOEMoTm.js";import{o as Oo,a as zo}from"../chunks/Caj52-64.js";import{Y as Yi,M as Wi,aX as Vi,ac as qi,e as Ki,u as Go,aY as Zi,aZ as Ji,a_ as Qi,av as Ho,a$ as ts,q as es,a7 as En,b0 as rs,c as An,aI as Po,r as ns,h as as,b1 as os,n as Vr,i as Nr,v as e,w as D,o as Rt,x as Y,z as V,A as qr,D as Jt,C as i,y as s,B as u,t as ln,b2 as Uo,ao as qe,b3 as is,b4 as na,b5 as po}from"../chunks/Cs2YbYqB.js";import{a as ss,d as fn,s as L,e as Ee}from"../chunks/X9orTM-q.js";import{s as ht,t as jo,f as Xo,g as eo,e as de,a as j,h as jr,j as Yo,k as Wo,m as ls,n as ro,o as cs,p as ds,i as ye,b as Sr,q as us,u as fs,v as vs,w as hs,x as ps,y as xs,z as gs,A as Xa,B as ms,C as _s,D as bs,E as ys,F as ws,G as ks,H as Ms,d as Ss,I as Ts,J as Ns,K as $s,L as Fs,M as Es,N as As,O as Cs,c as Bs}from"../chunks/BHyprsTR.js";import{p as he,i as O}from"../chunks/BMwDbPWL.js";import{b as $r}from"../chunks/DprsgeAR.js";const Is=()=>performance.now(),Tr={tick:t=>requestAnimationFrame(t),now:()=>Is(),tasks:new Set};function Vo(){const t=Tr.now();Tr.tasks.forEach(r=>{r.c(t)||(Tr.tasks.delete(r),r.f())}),Tr.tasks.size!==0&&Tr.tick(Vo)}function Ds(t){let r;return Tr.tasks.size===0&&Tr.tick(Vo),{promise:new Promise(n=>{Tr.tasks.add(r={c:t,f:n})}),abort(){Tr.tasks.delete(r)}}}function aa(t,r){Ho(()=>{t.dispatchEvent(new CustomEvent(r))})}function Ls(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const r=t.split("-");return r.length===1?r[0]:r[0]+r.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function xo(t){const r={},n=t.split(";");for(const a of n){const[o,l]=a.split(":");if(!o||l===void 0)break;const c=Ls(o.trim());r[c]=l.trim()}return r}const Rs=t=>t;function oa(t,r,n,a){var o=(t&Ji)!==0,l=(t&Qi)!==0,c=o&&l,d=(t&Zi)!==0,v=c?"both":o?"in":"out",g,p=r.inert,F=r.style.overflow,N,A;function dt(){return Ho(()=>g??(g=n()(r,(a==null?void 0:a())??{},{direction:v})))}var Z={is_global:d,in(){var nt;if(r.inert=p,!o){A==null||A.abort(),(nt=A==null?void 0:A.reset)==null||nt.call(A);return}l||N==null||N.abort(),aa(r,"introstart"),N=Ya(r,dt(),A,1,()=>{aa(r,"introend"),N==null||N.abort(),N=g=void 0,r.style.overflow=F})},out(nt){if(!l){nt==null||nt(),g=void 0;return}r.inert=!0,aa(r,"outrostart"),A=Ya(r,dt(),N,0,()=>{aa(r,"outroend"),nt==null||nt()})},stop:()=>{N==null||N.abort(),A==null||A.abort()}},K=Yi;if((K.transitions??(K.transitions=[])).push(Z),o&&ss){var Mt=d;if(!Mt){for(var Nt=K.parent;Nt&&(Nt.f&Wi)!==0;)for(;(Nt=Nt.parent)&&(Nt.f&Vi)===0;);Mt=!Nt||(Nt.f&qi)!==0}Mt&&Ki(()=>{Go(()=>Z.in())})}}function Ya(t,r,n,a,o){var l=a===1;if(ts(r)){var c,d=!1;return es(()=>{if(!d){var K=r({direction:l?"in":"out"});c=Ya(t,K,n,a,o)}}),{abort:()=>{d=!0,c==null||c.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(n==null||n.deactivate(),!(r!=null&&r.duration))return o(),{abort:En,deactivate:En,reset:En,t:()=>a};const{delay:v=0,css:g,tick:p,easing:F=Rs}=r;var N=[];if(l&&n===void 0&&(p&&p(0,1),g)){var A=xo(g(0,1));N.push(A,A)}var dt=()=>1-a,Z=t.animate(N,{duration:v,fill:"forwards"});return Z.onfinish=()=>{Z.cancel();var K=(n==null?void 0:n.t())??1-a;n==null||n.abort();var Mt=a-K,Nt=r.duration*Math.abs(Mt),nt=[];if(Nt>0){var St=!1;if(g)for(var yt=Math.ceil(Nt/16.666666666666668),Ft=0;Ft<=yt;Ft+=1){var ot=K+Mt*F(Ft/yt),pt=xo(g(ot,1-ot));nt.push(pt),St||(St=pt.overflow==="hidden")}St&&(t.style.overflow="hidden"),dt=()=>{var $t=Z.currentTime;return K+Mt*F($t/Nt)},p&&Ds(()=>{if(Z.playState!=="running")return!1;var $t=dt();return p($t,1-$t),!0})}Z=t.animate(nt,{duration:Nt,fill:"forwards"}),Z.onfinish=()=>{dt=()=>a,p==null||p(a,1-a),o()}},{abort:()=>{Z&&(Z.cancel(),Z.effect=null,Z.onfinish=En)},deactivate:()=>{o=En},reset:()=>{a===0&&(p==null||p(1,0))},t:()=>dt()}}function Ln(t,r,n=r){var a=new WeakSet;rs(t,"input",async o=>{var l=o?t.defaultValue:t.value;if(l=za(t)?Ga(l):l,n(l),An!==null&&a.add(An),await Po(),l!==(l=r())){var c=t.selectionStart,d=t.selectionEnd,v=t.value.length;if(t.value=l??"",d!==null){var g=t.value.length;c===d&&d===v&&g>v?(t.selectionStart=g,t.selectionEnd=g):(t.selectionStart=c,t.selectionEnd=Math.min(d,g))}}}),(as&&t.defaultValue!==t.value||Go(r)==null&&t.value)&&(n(za(t)?Ga(t.value):t.value),An!==null&&a.add(An)),ns(()=>{var o=r();if(t===document.activeElement){var l=os??An;if(a.has(l))return}za(t)&&o===Ga(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function za(t){var r=t.type;return r==="number"||r==="range"}function Ga(t){return t===""?null:+t}var Os={value:()=>{}};function qo(){for(var t=0,r=arguments.length,n={},a;t<r;++t){if(!(a=arguments[t]+"")||a in n||/[\s.]/.test(a))throw new Error("illegal type: "+a);n[a]=[]}return new ca(n)}function ca(t){this._=t}function zs(t,r){return t.trim().split(/^|\s+/).map(function(n){var a="",o=n.indexOf(".");if(o>=0&&(a=n.slice(o+1),n=n.slice(0,o)),n&&!r.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:a}})}ca.prototype=qo.prototype={constructor:ca,on:function(t,r){var n=this._,a=zs(t+"",n),o,l=-1,c=a.length;if(arguments.length<2){for(;++l<c;)if((o=(t=a[l]).type)&&(o=Gs(n[o],t.name)))return o;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++l<c;)if(o=(t=a[l]).type)n[o]=go(n[o],t.name,r);else if(r==null)for(o in n)n[o]=go(n[o],t.name,null);return this},copy:function(){var t={},r=this._;for(var n in r)t[n]=r[n].slice();return new ca(t)},call:function(t,r){if((o=arguments.length-2)>0)for(var n=new Array(o),a=0,o,l;a<o;++a)n[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(l=this._[t],a=0,o=l.length;a<o;++a)l[a].value.apply(r,n)},apply:function(t,r,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var a=this._[t],o=0,l=a.length;o<l;++o)a[o].value.apply(r,n)}};function Gs(t,r){for(var n=0,a=t.length,o;n<a;++n)if((o=t[n]).name===r)return o.value}function go(t,r,n){for(var a=0,o=t.length;a<o;++a)if(t[a].name===r){t[a]=Os,t=t.slice(0,a).concat(t.slice(a+1));break}return n!=null&&t.push({name:r,value:n}),t}var Wa="http://www.w3.org/1999/xhtml";const mo={svg:"http://www.w3.org/2000/svg",xhtml:Wa,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ma(t){var r=t+="",n=r.indexOf(":");return n>=0&&(r=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),mo.hasOwnProperty(r)?{space:mo[r],local:t}:t}function Hs(t){return function(){var r=this.ownerDocument,n=this.namespaceURI;return n===Wa&&r.documentElement.namespaceURI===Wa?r.createElement(t):r.createElementNS(n,t)}}function Ps(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ko(t){var r=ma(t);return(r.local?Ps:Hs)(r)}function Us(){}function no(t){return t==null?Us:function(){return this.querySelector(t)}}function js(t){typeof t!="function"&&(t=no(t));for(var r=this._groups,n=r.length,a=new Array(n),o=0;o<n;++o)for(var l=r[o],c=l.length,d=a[o]=new Array(c),v,g,p=0;p<c;++p)(v=l[p])&&(g=t.call(v,v.__data__,p,l))&&("__data__"in v&&(g.__data__=v.__data__),d[p]=g);return new Ue(a,this._parents)}function Xs(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ys(){return[]}function Zo(t){return t==null?Ys:function(){return this.querySelectorAll(t)}}function Ws(t){return function(){return Xs(t.apply(this,arguments))}}function Vs(t){typeof t=="function"?t=Ws(t):t=Zo(t);for(var r=this._groups,n=r.length,a=[],o=[],l=0;l<n;++l)for(var c=r[l],d=c.length,v,g=0;g<d;++g)(v=c[g])&&(a.push(t.call(v,v.__data__,g,c)),o.push(v));return new Ue(a,o)}function Jo(t){return function(){return this.matches(t)}}function Qo(t){return function(r){return r.matches(t)}}var qs=Array.prototype.find;function Ks(t){return function(){return qs.call(this.children,t)}}function Zs(){return this.firstElementChild}function Js(t){return this.select(t==null?Zs:Ks(typeof t=="function"?t:Qo(t)))}var Qs=Array.prototype.filter;function tl(){return Array.from(this.children)}function el(t){return function(){return Qs.call(this.children,t)}}function rl(t){return this.selectAll(t==null?tl:el(typeof t=="function"?t:Qo(t)))}function nl(t){typeof t!="function"&&(t=Jo(t));for(var r=this._groups,n=r.length,a=new Array(n),o=0;o<n;++o)for(var l=r[o],c=l.length,d=a[o]=[],v,g=0;g<c;++g)(v=l[g])&&t.call(v,v.__data__,g,l)&&d.push(v);return new Ue(a,this._parents)}function ti(t){return new Array(t.length)}function al(){return new Ue(this._enter||this._groups.map(ti),this._parents)}function fa(t,r){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=r}fa.prototype={constructor:fa,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,r){return this._parent.insertBefore(t,r)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ol(t){return function(){return t}}function il(t,r,n,a,o,l){for(var c=0,d,v=r.length,g=l.length;c<g;++c)(d=r[c])?(d.__data__=l[c],a[c]=d):n[c]=new fa(t,l[c]);for(;c<v;++c)(d=r[c])&&(o[c]=d)}function sl(t,r,n,a,o,l,c){var d,v,g=new Map,p=r.length,F=l.length,N=new Array(p),A;for(d=0;d<p;++d)(v=r[d])&&(N[d]=A=c.call(v,v.__data__,d,r)+"",g.has(A)?o[d]=v:g.set(A,v));for(d=0;d<F;++d)A=c.call(t,l[d],d,l)+"",(v=g.get(A))?(a[d]=v,v.__data__=l[d],g.delete(A)):n[d]=new fa(t,l[d]);for(d=0;d<p;++d)(v=r[d])&&g.get(N[d])===v&&(o[d]=v)}function ll(t){return t.__data__}function cl(t,r){if(!arguments.length)return Array.from(this,ll);var n=r?sl:il,a=this._parents,o=this._groups;typeof t!="function"&&(t=ol(t));for(var l=o.length,c=new Array(l),d=new Array(l),v=new Array(l),g=0;g<l;++g){var p=a[g],F=o[g],N=F.length,A=dl(t.call(p,p&&p.__data__,g,a)),dt=A.length,Z=d[g]=new Array(dt),K=c[g]=new Array(dt),Mt=v[g]=new Array(N);n(p,F,Z,K,Mt,A,r);for(var Nt=0,nt=0,St,yt;Nt<dt;++Nt)if(St=Z[Nt]){for(Nt>=nt&&(nt=Nt+1);!(yt=K[nt])&&++nt<dt;);St._next=yt||null}}return c=new Ue(c,a),c._enter=d,c._exit=v,c}function dl(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ul(){return new Ue(this._exit||this._groups.map(ti),this._parents)}function fl(t,r,n){var a=this.enter(),o=this,l=this.exit();return typeof t=="function"?(a=t(a),a&&(a=a.selection())):a=a.append(t+""),r!=null&&(o=r(o),o&&(o=o.selection())),n==null?l.remove():n(l),a&&o?a.merge(o).order():o}function vl(t){for(var r=t.selection?t.selection():t,n=this._groups,a=r._groups,o=n.length,l=a.length,c=Math.min(o,l),d=new Array(o),v=0;v<c;++v)for(var g=n[v],p=a[v],F=g.length,N=d[v]=new Array(F),A,dt=0;dt<F;++dt)(A=g[dt]||p[dt])&&(N[dt]=A);for(;v<o;++v)d[v]=n[v];return new Ue(d,this._parents)}function hl(){for(var t=this._groups,r=-1,n=t.length;++r<n;)for(var a=t[r],o=a.length-1,l=a[o],c;--o>=0;)(c=a[o])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function pl(t){t||(t=xl);function r(F,N){return F&&N?t(F.__data__,N.__data__):!F-!N}for(var n=this._groups,a=n.length,o=new Array(a),l=0;l<a;++l){for(var c=n[l],d=c.length,v=o[l]=new Array(d),g,p=0;p<d;++p)(g=c[p])&&(v[p]=g);v.sort(r)}return new Ue(o,this._parents).order()}function xl(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}function gl(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ml(){return Array.from(this)}function _l(){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var a=t[r],o=0,l=a.length;o<l;++o){var c=a[o];if(c)return c}return null}function bl(){let t=0;for(const r of this)++t;return t}function yl(){return!this.node()}function wl(t){for(var r=this._groups,n=0,a=r.length;n<a;++n)for(var o=r[n],l=0,c=o.length,d;l<c;++l)(d=o[l])&&t.call(d,d.__data__,l,o);return this}function kl(t){return function(){this.removeAttribute(t)}}function Ml(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Sl(t,r){return function(){this.setAttribute(t,r)}}function Tl(t,r){return function(){this.setAttributeNS(t.space,t.local,r)}}function Nl(t,r){return function(){var n=r.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function $l(t,r){return function(){var n=r.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Fl(t,r){var n=ma(t);if(arguments.length<2){var a=this.node();return n.local?a.getAttributeNS(n.space,n.local):a.getAttribute(n)}return this.each((r==null?n.local?Ml:kl:typeof r=="function"?n.local?$l:Nl:n.local?Tl:Sl)(n,r))}function ei(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function El(t){return function(){this.style.removeProperty(t)}}function Al(t,r,n){return function(){this.style.setProperty(t,r,n)}}function Cl(t,r,n){return function(){var a=r.apply(this,arguments);a==null?this.style.removeProperty(t):this.style.setProperty(t,a,n)}}function Bl(t,r,n){return arguments.length>1?this.each((r==null?El:typeof r=="function"?Cl:Al)(t,r,n??"")):dn(this.node(),t)}function dn(t,r){return t.style.getPropertyValue(r)||ei(t).getComputedStyle(t,null).getPropertyValue(r)}function Il(t){return function(){delete this[t]}}function Dl(t,r){return function(){this[t]=r}}function Ll(t,r){return function(){var n=r.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Rl(t,r){return arguments.length>1?this.each((r==null?Il:typeof r=="function"?Ll:Dl)(t,r)):this.node()[t]}function ri(t){return t.trim().split(/^|\s+/)}function ao(t){return t.classList||new ni(t)}function ni(t){this._node=t,this._names=ri(t.getAttribute("class")||"")}ni.prototype={add:function(t){var r=this._names.indexOf(t);r<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var r=this._names.indexOf(t);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ai(t,r){for(var n=ao(t),a=-1,o=r.length;++a<o;)n.add(r[a])}function oi(t,r){for(var n=ao(t),a=-1,o=r.length;++a<o;)n.remove(r[a])}function Ol(t){return function(){ai(this,t)}}function zl(t){return function(){oi(this,t)}}function Gl(t,r){return function(){(r.apply(this,arguments)?ai:oi)(this,t)}}function Hl(t,r){var n=ri(t+"");if(arguments.length<2){for(var a=ao(this.node()),o=-1,l=n.length;++o<l;)if(!a.contains(n[o]))return!1;return!0}return this.each((typeof r=="function"?Gl:r?Ol:zl)(n,r))}function Pl(){this.textContent=""}function Ul(t){return function(){this.textContent=t}}function jl(t){return function(){var r=t.apply(this,arguments);this.textContent=r??""}}function Xl(t){return arguments.length?this.each(t==null?Pl:(typeof t=="function"?jl:Ul)(t)):this.node().textContent}function Yl(){this.innerHTML=""}function Wl(t){return function(){this.innerHTML=t}}function Vl(t){return function(){var r=t.apply(this,arguments);this.innerHTML=r??""}}function ql(t){return arguments.length?this.each(t==null?Yl:(typeof t=="function"?Vl:Wl)(t)):this.node().innerHTML}function Kl(){this.nextSibling&&this.parentNode.appendChild(this)}function Zl(){return this.each(Kl)}function Jl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ql(){return this.each(Jl)}function tc(t){var r=typeof t=="function"?t:Ko(t);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}function ec(){return null}function rc(t,r){var n=typeof t=="function"?t:Ko(t),a=r==null?ec:typeof r=="function"?r:no(r);return this.select(function(){return this.insertBefore(n.apply(this,arguments),a.apply(this,arguments)||null)})}function nc(){var t=this.parentNode;t&&t.removeChild(this)}function ac(){return this.each(nc)}function oc(){var t=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function ic(){var t=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function sc(t){return this.select(t?ic:oc)}function lc(t){return arguments.length?this.property("__data__",t):this.node().__data__}function cc(t){return function(r){t.call(this,r,this.__data__)}}function dc(t){return t.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");return a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),{type:r,name:n}})}function uc(t){return function(){var r=this.__on;if(r){for(var n=0,a=-1,o=r.length,l;n<o;++n)l=r[n],(!t.type||l.type===t.type)&&l.name===t.name?this.removeEventListener(l.type,l.listener,l.options):r[++a]=l;++a?r.length=a:delete this.__on}}}function fc(t,r,n){return function(){var a=this.__on,o,l=cc(r);if(a){for(var c=0,d=a.length;c<d;++c)if((o=a[c]).type===t.type&&o.name===t.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=l,o.options=n),o.value=r;return}}this.addEventListener(t.type,l,n),o={type:t.type,name:t.name,value:r,listener:l,options:n},a?a.push(o):this.__on=[o]}}function vc(t,r,n){var a=dc(t+""),o,l=a.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var v=0,g=d.length,p;v<g;++v)for(o=0,p=d[v];o<l;++o)if((c=a[o]).type===p.type&&c.name===p.name)return p.value}return}for(d=r?fc:uc,o=0;o<l;++o)this.each(d(a[o],r,n));return this}function ii(t,r,n){var a=ei(t),o=a.CustomEvent;typeof o=="function"?o=new o(r,n):(o=a.document.createEvent("Event"),n?(o.initEvent(r,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(r,!1,!1)),t.dispatchEvent(o)}function hc(t,r){return function(){return ii(this,t,r)}}function pc(t,r){return function(){return ii(this,t,r.apply(this,arguments))}}function xc(t,r){return this.each((typeof r=="function"?pc:hc)(t,r))}function*gc(){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var a=t[r],o=0,l=a.length,c;o<l;++o)(c=a[o])&&(yield c)}var si=[null];function Ue(t,r){this._groups=t,this._parents=r}function Hn(){return new Ue([[document.documentElement]],si)}function mc(){return this}Ue.prototype=Hn.prototype={constructor:Ue,select:js,selectAll:Vs,selectChild:Js,selectChildren:rl,filter:nl,data:cl,enter:al,exit:ul,join:fl,merge:vl,selection:mc,order:hl,sort:pl,call:gl,nodes:ml,node:_l,size:bl,empty:yl,each:wl,attr:Fl,style:Bl,property:Rl,classed:Hl,text:Xl,html:ql,raise:Zl,lower:Ql,append:tc,insert:rc,remove:ac,clone:sc,datum:lc,on:vc,dispatch:xc,[Symbol.iterator]:gc};function _o(t){return typeof t=="string"?new Ue([[document.querySelector(t)]],[document.documentElement]):new Ue([[t]],si)}function oo(t,r,n){t.prototype=r.prototype=n,n.constructor=t}function li(t,r){var n=Object.create(t.prototype);for(var a in r)n[a]=r[a];return n}function Pn(){}var Rn=.7,va=1/Rn,cn="\\s*([+-]?\\d+)\\s*",On="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",pr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_c=/^#([0-9a-f]{3,8})$/,bc=new RegExp(`^rgb\\(${cn},${cn},${cn}\\)$`),yc=new RegExp(`^rgb\\(${pr},${pr},${pr}\\)$`),wc=new RegExp(`^rgba\\(${cn},${cn},${cn},${On}\\)$`),kc=new RegExp(`^rgba\\(${pr},${pr},${pr},${On}\\)$`),Mc=new RegExp(`^hsl\\(${On},${pr},${pr}\\)$`),Sc=new RegExp(`^hsla\\(${On},${pr},${pr},${On}\\)$`),bo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};oo(Pn,zn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:yo,formatHex:yo,formatHex8:Tc,formatHsl:Nc,formatRgb:wo,toString:wo});function yo(){return this.rgb().formatHex()}function Tc(){return this.rgb().formatHex8()}function Nc(){return ci(this).formatHsl()}function wo(){return this.rgb().formatRgb()}function zn(t){var r,n;return t=(t+"").trim().toLowerCase(),(r=_c.exec(t))?(n=r[1].length,r=parseInt(r[1],16),n===6?ko(r):n===3?new Le(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):n===8?ia(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):n===4?ia(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=bc.exec(t))?new Le(r[1],r[2],r[3],1):(r=yc.exec(t))?new Le(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=wc.exec(t))?ia(r[1],r[2],r[3],r[4]):(r=kc.exec(t))?ia(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=Mc.exec(t))?To(r[1],r[2]/100,r[3]/100,1):(r=Sc.exec(t))?To(r[1],r[2]/100,r[3]/100,r[4]):bo.hasOwnProperty(t)?ko(bo[t]):t==="transparent"?new Le(NaN,NaN,NaN,0):null}function ko(t){return new Le(t>>16&255,t>>8&255,t&255,1)}function ia(t,r,n,a){return a<=0&&(t=r=n=NaN),new Le(t,r,n,a)}function $c(t){return t instanceof Pn||(t=zn(t)),t?(t=t.rgb(),new Le(t.r,t.g,t.b,t.opacity)):new Le}function Va(t,r,n,a){return arguments.length===1?$c(t):new Le(t,r,n,a??1)}function Le(t,r,n,a){this.r=+t,this.g=+r,this.b=+n,this.opacity=+a}oo(Le,Va,li(Pn,{brighter(t){return t=t==null?va:Math.pow(va,t),new Le(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Rn:Math.pow(Rn,t),new Le(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Le(Yr(this.r),Yr(this.g),Yr(this.b),ha(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Mo,formatHex:Mo,formatHex8:Fc,formatRgb:So,toString:So}));function Mo(){return`#${Xr(this.r)}${Xr(this.g)}${Xr(this.b)}`}function Fc(){return`#${Xr(this.r)}${Xr(this.g)}${Xr(this.b)}${Xr((isNaN(this.opacity)?1:this.opacity)*255)}`}function So(){const t=ha(this.opacity);return`${t===1?"rgb(":"rgba("}${Yr(this.r)}, ${Yr(this.g)}, ${Yr(this.b)}${t===1?")":`, ${t})`}`}function ha(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Yr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Xr(t){return t=Yr(t),(t<16?"0":"")+t.toString(16)}function To(t,r,n,a){return a<=0?t=r=n=NaN:n<=0||n>=1?t=r=NaN:r<=0&&(t=NaN),new rr(t,r,n,a)}function ci(t){if(t instanceof rr)return new rr(t.h,t.s,t.l,t.opacity);if(t instanceof Pn||(t=zn(t)),!t)return new rr;if(t instanceof rr)return t;t=t.rgb();var r=t.r/255,n=t.g/255,a=t.b/255,o=Math.min(r,n,a),l=Math.max(r,n,a),c=NaN,d=l-o,v=(l+o)/2;return d?(r===l?c=(n-a)/d+(n<a)*6:n===l?c=(a-r)/d+2:c=(r-n)/d+4,d/=v<.5?l+o:2-l-o,c*=60):d=v>0&&v<1?0:c,new rr(c,d,v,t.opacity)}function Ec(t,r,n,a){return arguments.length===1?ci(t):new rr(t,r,n,a??1)}function rr(t,r,n,a){this.h=+t,this.s=+r,this.l=+n,this.opacity=+a}oo(rr,Ec,li(Pn,{brighter(t){return t=t==null?va:Math.pow(va,t),new rr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Rn:Math.pow(Rn,t),new rr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*r,o=2*n-a;return new Le(Ha(t>=240?t-240:t+120,o,a),Ha(t,o,a),Ha(t<120?t+240:t-120,o,a),this.opacity)},clamp(){return new rr(No(this.h),sa(this.s),sa(this.l),ha(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ha(this.opacity);return`${t===1?"hsl(":"hsla("}${No(this.h)}, ${sa(this.s)*100}%, ${sa(this.l)*100}%${t===1?")":`, ${t})`}`}}));function No(t){return t=(t||0)%360,t<0?t+360:t}function sa(t){return Math.max(0,Math.min(1,t||0))}function Ha(t,r,n){return(t<60?r+(n-r)*t/60:t<180?n:t<240?r+(n-r)*(240-t)/60:r)*255}const di=t=>()=>t;function Ac(t,r){return function(n){return t+n*r}}function Cc(t,r,n){return t=Math.pow(t,n),r=Math.pow(r,n)-t,n=1/n,function(a){return Math.pow(t+a*r,n)}}function Bc(t){return(t=+t)==1?ui:function(r,n){return n-r?Cc(r,n,t):di(isNaN(r)?n:r)}}function ui(t,r){var n=r-t;return n?Ac(t,n):di(isNaN(t)?r:t)}const $o=(function t(r){var n=Bc(r);function a(o,l){var c=n((o=Va(o)).r,(l=Va(l)).r),d=n(o.g,l.g),v=n(o.b,l.b),g=ui(o.opacity,l.opacity);return function(p){return o.r=c(p),o.g=d(p),o.b=v(p),o.opacity=g(p),o+""}}return a.gamma=t,a})(1);function Ir(t,r){return t=+t,r=+r,function(n){return t*(1-n)+r*n}}var qa=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pa=new RegExp(qa.source,"g");function Ic(t){return function(){return t}}function Dc(t){return function(r){return t(r)+""}}function Lc(t,r){var n=qa.lastIndex=Pa.lastIndex=0,a,o,l,c=-1,d=[],v=[];for(t=t+"",r=r+"";(a=qa.exec(t))&&(o=Pa.exec(r));)(l=o.index)>n&&(l=r.slice(n,l),d[c]?d[c]+=l:d[++c]=l),(a=a[0])===(o=o[0])?d[c]?d[c]+=o:d[++c]=o:(d[++c]=null,v.push({i:c,x:Ir(a,o)})),n=Pa.lastIndex;return n<r.length&&(l=r.slice(n),d[c]?d[c]+=l:d[++c]=l),d.length<2?v[0]?Dc(v[0].x):Ic(r):(r=v.length,function(g){for(var p=0,F;p<r;++p)d[(F=v[p]).i]=F.x(g);return d.join("")})}var Fo=180/Math.PI,Ka={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function fi(t,r,n,a,o,l){var c,d,v;return(c=Math.sqrt(t*t+r*r))&&(t/=c,r/=c),(v=t*n+r*a)&&(n-=t*v,a-=r*v),(d=Math.sqrt(n*n+a*a))&&(n/=d,a/=d,v/=d),t*a<r*n&&(t=-t,r=-r,v=-v,c=-c),{translateX:o,translateY:l,rotate:Math.atan2(r,t)*Fo,skewX:Math.atan(v)*Fo,scaleX:c,scaleY:d}}var la;function Rc(t){const r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?Ka:fi(r.a,r.b,r.c,r.d,r.e,r.f)}function Oc(t){return t==null||(la||(la=document.createElementNS("http://www.w3.org/2000/svg","g")),la.setAttribute("transform",t),!(t=la.transform.baseVal.consolidate()))?Ka:(t=t.matrix,fi(t.a,t.b,t.c,t.d,t.e,t.f))}function vi(t,r,n,a){function o(g){return g.length?g.pop()+" ":""}function l(g,p,F,N,A,dt){if(g!==F||p!==N){var Z=A.push("translate(",null,r,null,n);dt.push({i:Z-4,x:Ir(g,F)},{i:Z-2,x:Ir(p,N)})}else(F||N)&&A.push("translate("+F+r+N+n)}function c(g,p,F,N){g!==p?(g-p>180?p+=360:p-g>180&&(g+=360),N.push({i:F.push(o(F)+"rotate(",null,a)-2,x:Ir(g,p)})):p&&F.push(o(F)+"rotate("+p+a)}function d(g,p,F,N){g!==p?N.push({i:F.push(o(F)+"skewX(",null,a)-2,x:Ir(g,p)}):p&&F.push(o(F)+"skewX("+p+a)}function v(g,p,F,N,A,dt){if(g!==F||p!==N){var Z=A.push(o(A)+"scale(",null,",",null,")");dt.push({i:Z-4,x:Ir(g,F)},{i:Z-2,x:Ir(p,N)})}else(F!==1||N!==1)&&A.push(o(A)+"scale("+F+","+N+")")}return function(g,p){var F=[],N=[];return g=t(g),p=t(p),l(g.translateX,g.translateY,p.translateX,p.translateY,F,N),c(g.rotate,p.rotate,F,N),d(g.skewX,p.skewX,F,N),v(g.scaleX,g.scaleY,p.scaleX,p.scaleY,F,N),g=p=null,function(A){for(var dt=-1,Z=N.length,K;++dt<Z;)F[(K=N[dt]).i]=K.x(A);return F.join("")}}}var zc=vi(Rc,"px, ","px)","deg)"),Gc=vi(Oc,", ",")",")"),un=0,Bn=0,Cn=0,hi=1e3,pa,In,xa=0,Wr=0,_a=0,Gn=typeof performance=="object"&&performance.now?performance:Date,pi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function io(){return Wr||(pi(Hc),Wr=Gn.now()+_a)}function Hc(){Wr=0}function ga(){this._call=this._time=this._next=null}ga.prototype=xi.prototype={constructor:ga,restart:function(t,r,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?io():+n)+(r==null?0:+r),!this._next&&In!==this&&(In?In._next=this:pa=this,In=this),this._call=t,this._time=n,Za()},stop:function(){this._call&&(this._call=null,this._time=1/0,Za())}};function xi(t,r,n){var a=new ga;return a.restart(t,r,n),a}function Pc(){io(),++un;for(var t=pa,r;t;)(r=Wr-t._time)>=0&&t._call.call(void 0,r),t=t._next;--un}function Eo(){Wr=(xa=Gn.now())+_a,un=Bn=0;try{Pc()}finally{un=0,jc(),Wr=0}}function Uc(){var t=Gn.now(),r=t-xa;r>hi&&(_a-=r,xa=t)}function jc(){for(var t,r=pa,n,a=1/0;r;)r._call?(a>r._time&&(a=r._time),t=r,r=r._next):(n=r._next,r._next=null,r=t?t._next=n:pa=n);In=t,Za(a)}function Za(t){if(!un){Bn&&(Bn=clearTimeout(Bn));var r=t-Wr;r>24?(t<1/0&&(Bn=setTimeout(Eo,t-Gn.now()-_a)),Cn&&(Cn=clearInterval(Cn))):(Cn||(xa=Gn.now(),Cn=setInterval(Uc,hi)),un=1,pi(Eo))}}function Ao(t,r,n){var a=new ga;return r=r==null?0:+r,a.restart(o=>{a.stop(),t(o+r)},r,n),a}var Xc=qo("start","end","cancel","interrupt"),Yc=[],gi=0,Co=1,Ja=2,da=3,Bo=4,Qa=5,ua=6;function ba(t,r,n,a,o,l){var c=t.__transition;if(!c)t.__transition={};else if(n in c)return;Wc(t,n,{name:r,index:a,group:o,on:Xc,tween:Yc,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:gi})}function so(t,r){var n=nr(t,r);if(n.state>gi)throw new Error("too late; already scheduled");return n}function xr(t,r){var n=nr(t,r);if(n.state>da)throw new Error("too late; already running");return n}function nr(t,r){var n=t.__transition;if(!n||!(n=n[r]))throw new Error("transition not found");return n}function Wc(t,r,n){var a=t.__transition,o;a[r]=n,n.timer=xi(l,0,n.time);function l(g){n.state=Co,n.timer.restart(c,n.delay,n.time),n.delay<=g&&c(g-n.delay)}function c(g){var p,F,N,A;if(n.state!==Co)return v();for(p in a)if(A=a[p],A.name===n.name){if(A.state===da)return Ao(c);A.state===Bo?(A.state=ua,A.timer.stop(),A.on.call("interrupt",t,t.__data__,A.index,A.group),delete a[p]):+p<r&&(A.state=ua,A.timer.stop(),A.on.call("cancel",t,t.__data__,A.index,A.group),delete a[p])}if(Ao(function(){n.state===da&&(n.state=Bo,n.timer.restart(d,n.delay,n.time),d(g))}),n.state=Ja,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Ja){for(n.state=da,o=new Array(N=n.tween.length),p=0,F=-1;p<N;++p)(A=n.tween[p].value.call(t,t.__data__,n.index,n.group))&&(o[++F]=A);o.length=F+1}}function d(g){for(var p=g<n.duration?n.ease.call(null,g/n.duration):(n.timer.restart(v),n.state=Qa,1),F=-1,N=o.length;++F<N;)o[F].call(t,p);n.state===Qa&&(n.on.call("end",t,t.__data__,n.index,n.group),v())}function v(){n.state=ua,n.timer.stop(),delete a[r];for(var g in a)return;delete t.__transition}}function Vc(t,r){var n=t.__transition,a,o,l=!0,c;if(n){r=r==null?null:r+"";for(c in n){if((a=n[c]).name!==r){l=!1;continue}o=a.state>Ja&&a.state<Qa,a.state=ua,a.timer.stop(),a.on.call(o?"interrupt":"cancel",t,t.__data__,a.index,a.group),delete n[c]}l&&delete t.__transition}}function qc(t){return this.each(function(){Vc(this,t)})}function Kc(t,r){var n,a;return function(){var o=xr(this,t),l=o.tween;if(l!==n){a=n=l;for(var c=0,d=a.length;c<d;++c)if(a[c].name===r){a=a.slice(),a.splice(c,1);break}}o.tween=a}}function Zc(t,r,n){var a,o;if(typeof n!="function")throw new Error;return function(){var l=xr(this,t),c=l.tween;if(c!==a){o=(a=c).slice();for(var d={name:r,value:n},v=0,g=o.length;v<g;++v)if(o[v].name===r){o[v]=d;break}v===g&&o.push(d)}l.tween=o}}function Jc(t,r){var n=this._id;if(t+="",arguments.length<2){for(var a=nr(this.node(),n).tween,o=0,l=a.length,c;o<l;++o)if((c=a[o]).name===t)return c.value;return null}return this.each((r==null?Kc:Zc)(n,t,r))}function lo(t,r,n){var a=t._id;return t.each(function(){var o=xr(this,a);(o.value||(o.value={}))[r]=n.apply(this,arguments)}),function(o){return nr(o,a).value[r]}}function mi(t,r){var n;return(typeof r=="number"?Ir:r instanceof zn?$o:(n=zn(r))?(r=n,$o):Lc)(t,r)}function Qc(t){return function(){this.removeAttribute(t)}}function td(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ed(t,r,n){var a,o=n+"",l;return function(){var c=this.getAttribute(t);return c===o?null:c===a?l:l=r(a=c,n)}}function rd(t,r,n){var a,o=n+"",l;return function(){var c=this.getAttributeNS(t.space,t.local);return c===o?null:c===a?l:l=r(a=c,n)}}function nd(t,r,n){var a,o,l;return function(){var c,d=n(this),v;return d==null?void this.removeAttribute(t):(c=this.getAttribute(t),v=d+"",c===v?null:c===a&&v===o?l:(o=v,l=r(a=c,d)))}}function ad(t,r,n){var a,o,l;return function(){var c,d=n(this),v;return d==null?void this.removeAttributeNS(t.space,t.local):(c=this.getAttributeNS(t.space,t.local),v=d+"",c===v?null:c===a&&v===o?l:(o=v,l=r(a=c,d)))}}function od(t,r){var n=ma(t),a=n==="transform"?Gc:mi;return this.attrTween(t,typeof r=="function"?(n.local?ad:nd)(n,a,lo(this,"attr."+t,r)):r==null?(n.local?td:Qc)(n):(n.local?rd:ed)(n,a,r))}function id(t,r){return function(n){this.setAttribute(t,r.call(this,n))}}function sd(t,r){return function(n){this.setAttributeNS(t.space,t.local,r.call(this,n))}}function ld(t,r){var n,a;function o(){var l=r.apply(this,arguments);return l!==a&&(n=(a=l)&&sd(t,l)),n}return o._value=r,o}function cd(t,r){var n,a;function o(){var l=r.apply(this,arguments);return l!==a&&(n=(a=l)&&id(t,l)),n}return o._value=r,o}function dd(t,r){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(r==null)return this.tween(n,null);if(typeof r!="function")throw new Error;var a=ma(t);return this.tween(n,(a.local?ld:cd)(a,r))}function ud(t,r){return function(){so(this,t).delay=+r.apply(this,arguments)}}function fd(t,r){return r=+r,function(){so(this,t).delay=r}}function vd(t){var r=this._id;return arguments.length?this.each((typeof t=="function"?ud:fd)(r,t)):nr(this.node(),r).delay}function hd(t,r){return function(){xr(this,t).duration=+r.apply(this,arguments)}}function pd(t,r){return r=+r,function(){xr(this,t).duration=r}}function xd(t){var r=this._id;return arguments.length?this.each((typeof t=="function"?hd:pd)(r,t)):nr(this.node(),r).duration}function gd(t,r){if(typeof r!="function")throw new Error;return function(){xr(this,t).ease=r}}function md(t){var r=this._id;return arguments.length?this.each(gd(r,t)):nr(this.node(),r).ease}function _d(t,r){return function(){var n=r.apply(this,arguments);if(typeof n!="function")throw new Error;xr(this,t).ease=n}}function bd(t){if(typeof t!="function")throw new Error;return this.each(_d(this._id,t))}function yd(t){typeof t!="function"&&(t=Jo(t));for(var r=this._groups,n=r.length,a=new Array(n),o=0;o<n;++o)for(var l=r[o],c=l.length,d=a[o]=[],v,g=0;g<c;++g)(v=l[g])&&t.call(v,v.__data__,g,l)&&d.push(v);return new Fr(a,this._parents,this._name,this._id)}function wd(t){if(t._id!==this._id)throw new Error;for(var r=this._groups,n=t._groups,a=r.length,o=n.length,l=Math.min(a,o),c=new Array(a),d=0;d<l;++d)for(var v=r[d],g=n[d],p=v.length,F=c[d]=new Array(p),N,A=0;A<p;++A)(N=v[A]||g[A])&&(F[A]=N);for(;d<a;++d)c[d]=r[d];return new Fr(c,this._parents,this._name,this._id)}function kd(t){return(t+"").trim().split(/^|\s+/).every(function(r){var n=r.indexOf(".");return n>=0&&(r=r.slice(0,n)),!r||r==="start"})}function Md(t,r,n){var a,o,l=kd(r)?so:xr;return function(){var c=l(this,t),d=c.on;d!==a&&(o=(a=d).copy()).on(r,n),c.on=o}}function Sd(t,r){var n=this._id;return arguments.length<2?nr(this.node(),n).on.on(t):this.each(Md(n,t,r))}function Td(t){return function(){var r=this.parentNode;for(var n in this.__transition)if(+n!==t)return;r&&r.removeChild(this)}}function Nd(){return this.on("end.remove",Td(this._id))}function $d(t){var r=this._name,n=this._id;typeof t!="function"&&(t=no(t));for(var a=this._groups,o=a.length,l=new Array(o),c=0;c<o;++c)for(var d=a[c],v=d.length,g=l[c]=new Array(v),p,F,N=0;N<v;++N)(p=d[N])&&(F=t.call(p,p.__data__,N,d))&&("__data__"in p&&(F.__data__=p.__data__),g[N]=F,ba(g[N],r,n,N,g,nr(p,n)));return new Fr(l,this._parents,r,n)}function Fd(t){var r=this._name,n=this._id;typeof t!="function"&&(t=Zo(t));for(var a=this._groups,o=a.length,l=[],c=[],d=0;d<o;++d)for(var v=a[d],g=v.length,p,F=0;F<g;++F)if(p=v[F]){for(var N=t.call(p,p.__data__,F,v),A,dt=nr(p,n),Z=0,K=N.length;Z<K;++Z)(A=N[Z])&&ba(A,r,n,Z,N,dt);l.push(N),c.push(p)}return new Fr(l,c,r,n)}var Ed=Hn.prototype.constructor;function Ad(){return new Ed(this._groups,this._parents)}function Cd(t,r){var n,a,o;return function(){var l=dn(this,t),c=(this.style.removeProperty(t),dn(this,t));return l===c?null:l===n&&c===a?o:o=r(n=l,a=c)}}function _i(t){return function(){this.style.removeProperty(t)}}function Bd(t,r,n){var a,o=n+"",l;return function(){var c=dn(this,t);return c===o?null:c===a?l:l=r(a=c,n)}}function Id(t,r,n){var a,o,l;return function(){var c=dn(this,t),d=n(this),v=d+"";return d==null&&(v=d=(this.style.removeProperty(t),dn(this,t))),c===v?null:c===a&&v===o?l:(o=v,l=r(a=c,d))}}function Dd(t,r){var n,a,o,l="style."+r,c="end."+l,d;return function(){var v=xr(this,t),g=v.on,p=v.value[l]==null?d||(d=_i(r)):void 0;(g!==n||o!==p)&&(a=(n=g).copy()).on(c,o=p),v.on=a}}function Ld(t,r,n){var a=(t+="")=="transform"?zc:mi;return r==null?this.styleTween(t,Cd(t,a)).on("end.style."+t,_i(t)):typeof r=="function"?this.styleTween(t,Id(t,a,lo(this,"style."+t,r))).each(Dd(this._id,t)):this.styleTween(t,Bd(t,a,r),n).on("end.style."+t,null)}function Rd(t,r,n){return function(a){this.style.setProperty(t,r.call(this,a),n)}}function Od(t,r,n){var a,o;function l(){var c=r.apply(this,arguments);return c!==o&&(a=(o=c)&&Rd(t,c,n)),a}return l._value=r,l}function zd(t,r,n){var a="style."+(t+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(r==null)return this.tween(a,null);if(typeof r!="function")throw new Error;return this.tween(a,Od(t,r,n??""))}function Gd(t){return function(){this.textContent=t}}function Hd(t){return function(){var r=t(this);this.textContent=r??""}}function Pd(t){return this.tween("text",typeof t=="function"?Hd(lo(this,"text",t)):Gd(t==null?"":t+""))}function Ud(t){return function(r){this.textContent=t.call(this,r)}}function jd(t){var r,n;function a(){var o=t.apply(this,arguments);return o!==n&&(r=(n=o)&&Ud(o)),r}return a._value=t,a}function Xd(t){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,jd(t))}function Yd(){for(var t=this._name,r=this._id,n=bi(),a=this._groups,o=a.length,l=0;l<o;++l)for(var c=a[l],d=c.length,v,g=0;g<d;++g)if(v=c[g]){var p=nr(v,r);ba(v,t,n,g,c,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Fr(a,this._parents,t,n)}function Wd(){var t,r,n=this,a=n._id,o=n.size();return new Promise(function(l,c){var d={value:c},v={value:function(){--o===0&&l()}};n.each(function(){var g=xr(this,a),p=g.on;p!==t&&(r=(t=p).copy(),r._.cancel.push(d),r._.interrupt.push(d),r._.end.push(v)),g.on=r}),o===0&&l()})}var Vd=0;function Fr(t,r,n,a){this._groups=t,this._parents=r,this._name=n,this._id=a}function bi(){return++Vd}var Mr=Hn.prototype;Fr.prototype={constructor:Fr,select:$d,selectAll:Fd,selectChild:Mr.selectChild,selectChildren:Mr.selectChildren,filter:yd,merge:wd,selection:Ad,transition:Yd,call:Mr.call,nodes:Mr.nodes,node:Mr.node,size:Mr.size,empty:Mr.empty,each:Mr.each,on:Sd,attr:od,attrTween:dd,style:Ld,styleTween:zd,text:Pd,textTween:Xd,remove:Nd,tween:Jc,delay:vd,duration:xd,ease:md,easeVarying:bd,end:Wd,[Symbol.iterator]:Mr[Symbol.iterator]};function qd(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Kd={time:null,delay:0,duration:250,ease:qd};function Zd(t,r){for(var n;!(n=t.__transition)||!(n=n[r]);)if(!(t=t.parentNode))throw new Error(`transition ${r} not found`);return n}function Jd(t){var r,n;t instanceof Fr?(r=t._id,t=t._name):(r=bi(),(n=Kd).time=io(),t=t==null?null:t+"");for(var a=this._groups,o=a.length,l=0;l<o;++l)for(var c=a[l],d=c.length,v,g=0;g<d;++g)(v=c[g])&&ba(v,t,r,g,c,n||Zd(v,r));return new Fr(a,this._parents,t,r)}Hn.prototype.interrupt=qc;Hn.prototype.transition=Jd;function Dn(t,r,n){this.k=t,this.x=r,this.y=n}Dn.prototype={constructor:Dn,scale:function(t){return t===1?this:new Dn(this.k*t,this.x,this.y)},translate:function(t,r){return t===0&r===0?this:new Dn(this.k,this.x+this.k*t,this.y+this.k*r)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Dn.prototype;var Qd=je("<svg></svg>");function Io(t,r){Vr(r,!0);let n=he(r,"class",3,""),a=he(r,"highlightedNodes",19,()=>new Set),o=Rt(void 0),l;const c=D(Xo),d=D(jo),v=D(eo);function g(nt){var yt,Ft;const St=(Ft=(yt=e(d))==null?void 0:yt.nodes)==null?void 0:Ft[nt];return(St==null?void 0:St.friendly_name)||nt.slice(0,8)}function p(nt,St){var pt,$t,Wt,Ut;const yt=($t=(pt=e(d))==null?void 0:pt.nodes)==null?void 0:$t[nt];if(!yt)return{label:"?",missing:!0};const Ft=(Wt=yt.network_interfaces)==null?void 0:Wt.find(te=>(te.addresses||[]).some(Xt=>Xt===St));if(Ft!=null&&Ft.name)return{label:Ft.name,missing:!1};const ot=(Ut=yt.ip_to_interface)==null?void 0:Ut[St];return ot&&ot.trim().length>0?{label:ot,missing:!1}:{label:"?",missing:!0}}function F(nt,St){if(nt.length<=St)return[nt];const yt=nt.split(" "),Ft=[];let ot="";for(const pt of yt)if(pt.length>St){ot&&(Ft.push(ot),ot="");for(let $t=0;$t<pt.length;$t+=St)Ft.push(pt.slice($t,$t+St))}else(ot+" "+pt).trim().length>St?(Ft.push(ot),ot=pt):ot=ot?`${ot} ${pt}`:pt;return ot&&Ft.push(ot),Ft}const N="M788.1 340.9c-5.8 4.5-108.2 62.2-108.2 190.5 0 148.4 130.3 200.9 134.2 202.2-.6 3.2-20.7 71.9-68.7 141.9-42.8 61.6-87.5 123.1-155.5 123.1s-85.5-39.5-164-39.5c-76.5 0-103.7 40.8-165.9 40.8s-105.6-57-155.5-127C46.7 790.7 0 663 0 541.8c0-194.4 126.4-297.5 250.8-297.5 66.1 0 121.2 43.4 162.7 43.4 39.5 0 101.1-46 176.3-46 28.5 0 130.9 2.6 198.3 99.2zm-234-181.5c31.1-36.9 53.1-88.1 53.1-139.3 0-7.1-.6-14.3-1.9-20.1-50.6 1.9-110.8 33.7-147.1 75.8-28.5 32.4-55.1 83.6-55.1 135.5 0 7.8 1.3 15.6 1.9 18.1 3.2.6 8.4 1.3 13.6 1.3 45.4 0 102.5-30.4 135.5-71.3z",A=814,dt=1e3;function Z(nt,St=1){if(!nt||nt===0)return"0B";const yt=1024,Ft=["B","KB","MB","GB","TB"],ot=Math.floor(Math.log(nt)/Math.log(yt));return parseFloat((nt/Math.pow(yt,ot)).toFixed(St))+Ft[ot]}function K(nt){if(isNaN(nt)||nt===null)return"rgba(179, 179, 179, 0.8)";const St=45,yt=57.5,Ft=75,ot={r:93,g:173,b:226},pt={r:255,g:215,b:0},$t={r:244,g:67,b:54};let Wt,Ut,te;if(nt<=St)({r:Wt,g:Ut,b:te}=ot);else if(nt<=yt){const Xt=(nt-St)/(yt-St);Wt=Math.round(ot.r*(1-Xt)+pt.r*Xt),Ut=Math.round(ot.g*(1-Xt)+pt.g*Xt),te=Math.round(ot.b*(1-Xt)+pt.b*Xt)}else if(nt<Ft){const Xt=(nt-yt)/(Ft-yt);Wt=Math.round(pt.r*(1-Xt)+$t.r*Xt),Ut=Math.round(pt.g*(1-Xt)+$t.g*Xt),te=Math.round(pt.b*(1-Xt)+$t.b*Xt)}else({r:Wt,g:Ut,b:te}=$t);return`rgb(${Wt}, ${Ut}, ${te})`}function Mt(){if(!e(o)||!e(d))return;_o(e(o)).selectAll("*").remove();const nt=e(d).nodes||{},St=e(d).edges||[],yt=Object.keys(nt),Ft=e(o).getBoundingClientRect(),ot=Ft.width,pt=Ft.height,$t=ot/2,Wt=pt/2,Ut=_o(e(o)),te=Ut.append("defs"),Xt=te.append("filter").attr("id","glow").attr("x","-50%").attr("y","-50%").attr("width","200%").attr("height","200%");Xt.append("feGaussianBlur").attr("stdDeviation","2").attr("result","coloredBlur");const Ce=Xt.append("feMerge");if(Ce.append("feMergeNode").attr("in","coloredBlur"),Ce.append("feMergeNode").attr("in","SourceGraphic"),te.append("marker").attr("id","arrowhead").attr("viewBox","0 0 10 10").attr("refX","10").attr("refY","5").attr("markerWidth","11").attr("markerHeight","11").attr("orient","auto-start-reverse").append("path").attr("d","M 0 0 L 10 5 L 0 10").attr("fill","none").attr("stroke","var(--exo-light-gray, #B3B3B3)").attr("stroke-width","1.6").attr("stroke-linecap","round").attr("stroke-linejoin","round").style("animation","none"),yt.length===0){Ut.append("text").attr("x",$t).attr("y",Wt).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("fill","rgba(255,215,0,0.4)").attr("font-size",e(c)?10:12).attr("font-family","SF Mono, monospace").attr("letter-spacing","0.1em").text("AWAITING NODES");return}const le=yt.length,ee=Math.min(ot,pt),pe=le===1?1:Math.max(.6,1-(le-1)*.1),Ht=(e(c)?Math.max(36,Math.min(60,ee*.22)):Math.min(120,ee*.2))*pe,xe=le*Ht*4/(2*Math.PI),ae=Math.max(xe,ee*.18),Se=ee*.3,tt=e(c)?Math.min(Se,Math.max(ae,ee*.26)):Math.min(Se,Math.max(ae,ee*(.22+le*.02))),H=!e(c)&&le<=4,Qt=!e(c)&&le>4,ge=70,Ye=ge+(pt-ge-70)/2,me=yt.map((m,S)=>{if(le===1)return{id:m,data:nt[m],x:$t,y:Ye};const x=S/le*2*Math.PI-Math.PI/2;return{id:m,data:nt[m],x:$t+tt*Math.cos(x),y:Ye+tt*Math.sin(x)}}),ce={};me.forEach(m=>{ce[m.id]={x:m.x,y:m.y}});const Q=Ut.append("g").attr("class","links-group"),q=Ut.append("g").attr("class","arrows-group"),mt=Ut.append("g").attr("class","debug-edge-labels"),T=new Map;St.forEach(m=>{var bt;if(!m.source||!m.target||m.source===m.target||!ce[m.source]||!ce[m.target])return;const S=m.source<m.target?m.source:m.target,x=m.source<m.target?m.target:m.source,C=`${S}|${x}`,P=T.get(C)||{a:S,b:x,aToB:!1,bToA:!1,connections:[]};m.source===S?P.aToB=!0:P.bToA=!0;const I=m.sendBackIp||((bt=m.sendBackMultiaddr)==null?void 0:bt.ip_address)||"?",_=p(m.source,I);P.connections.push({from:m.source,to:m.target,ip:I,ifaceLabel:_.label,missingIface:_.missing}),T.set(C,P)}),T.forEach(m=>{var U;const S=ce[m.a],x=ce[m.b];if(!S||!x)return;Q.append("line").attr("x1",S.x).attr("y1",S.y).attr("x2",x.x).attr("y2",x.y).attr("class","graph-link");const C=x.x-S.x,P=x.y-S.y,I=Math.hypot(C,P)||1,_=C/I,bt=P/I,Ot=(S.x+x.x)/2,zt=(S.y+x.y)/2,Ct=16,B=2;if(m.aToB){const W=Ot-_*Ct,it=zt-bt*Ct;q.append("line").attr("x1",W-_*B).attr("y1",it-bt*B).attr("x2",W).attr("y2",it).attr("stroke","none").attr("fill","none").attr("marker-end","url(#arrowhead)")}if(m.bToA){const W=Ot+_*Ct,it=zt+bt*Ct;q.append("line").attr("x1",W+_*B).attr("y1",it+bt*B).attr("x2",W).attr("y2",it).attr("stroke","none").attr("fill","none").attr("marker-end","url(#arrowhead)")}if(e(v)&&m.connections.length>0){const it=e(c)?8:9,st=2,ut=Math.max(140,ee*.38),ft=e(c)?16:20,X=170,xt=26,z=m.connections.slice(0,6);if(m.connections.length>6){const w=m.connections.length-6;z.push({from:"",to:"",ip:`(+${w} more)`,ifaceLabel:"",missingIface:!1})}let G=Ot-$t,J=zt-Wt;const rt=Math.hypot(G,J);rt<1?(G=-bt,J=_):(G/=rt,J/=rt);const ct=-J,lt=G,kt=Ot+G*ut+ct*ft,At=zt+J*ut+lt*ft,Et=Math.min(120,ee*.12),h=Math.max(Et,Math.min(ot-Et,kt)),f=Math.max(Et,Math.min(pt-Et,At)),b=mt.append("g").attr("transform",`translate(${h}, ${f})`),k=b.append("g");z.forEach((w,$)=>{const et=(w.from&&w.to?[`${g(w.from)}â†’${g(w.to)}`,`${w.ip}`,`${w.ifaceLabel}`]:[w.ip]).flatMap(vt=>F(vt,xt));et.forEach((vt,It)=>{k.append("text").attr("x",0).attr("y",$*(et.length*(it+st))+It*(it+st)).attr("text-anchor","middle").attr("dominant-baseline","hanging").attr("font-size",it).attr("font-family","SF Mono, monospace").attr("fill",w.missingIface?"rgba(248,113,113,0.9)":"rgba(255,255,255,0.9)").text(vt)})});const R=(U=k.node())==null?void 0:U.getBBox();if(R){const w=Math.max(X,R.width+14),$=R.height+8,at=h-w/2,et=h+w/2,vt=f+R.y-4,It=vt+$,wt=Math.min(140,ee*.18);let Bt=0,_t=0;at<wt&&(Bt=wt-at),et>ot-wt&&(Bt=ot-wt-et),vt<wt&&(_t=wt-vt),It>pt-wt&&(_t=pt-wt-It);const Pt=h+Bt,qt=f+_t;b.attr("transform",`translate(${Pt}, ${qt})`),b.insert("rect","g").attr("x",-w/2).attr("y",R.y-4).attr("width",w).attr("height",$).attr("rx",4).attr("fill","rgba(0,0,0,0.75)").attr("stroke","rgba(255,255,255,0.12)").attr("stroke-width",.6)}}});const E=Ut.append("g").attr("class","nodes-group");me.forEach(m=>{var xt;const S=m.data,x=S.macmon_info,C=((xt=S.system_info)==null?void 0:xt.model_id)||"Unknown",P=S.friendly_name||C;let I=0,_=NaN,bt=0,Ot=0,zt=0,Ct=null;x&&(x.memory&&x.memory.ram_total>0&&(I=x.memory.ram_usage/x.memory.ram_total*100,bt=x.memory.ram_total,Ot=x.memory.ram_usage),x.temp&&typeof x.temp.gpu_temp_avg=="number"&&(_=Math.max(30,x.temp.gpu_temp_avg)),x.gpu_usage&&(zt=x.gpu_usage[1]*100),x.sys_power&&(Ct=x.sys_power));const B=E.append("g").attr("class","graph-node").style("cursor","pointer");B.append("title").text(`${P}
ID: ${m.id.slice(-8)}
Memory: ${Z(Ot)}/${Z(bt)}`);let U=Ht*1.2,W=Ht*1;`${m.id.replace(/[^a-zA-Z0-9]/g,"-")}`;const it=C.toLowerCase(),st=a().has(m.id),ut=st?"rgba(255,215,0,0.9)":"rgba(179,179,179,0.8)",ft=st?"rgba(255,215,0,0.15)":"rgba(255,215,0,0.08)",X=st?2.5:1.5;if(it==="mac studio"){U=Ht*1.25,W=Ht*.85;const z=m.x-U/2,G=m.y-W/2,J=4,rt=W*.15,ct=`studio-clip-${m.id.replace(/[^a-zA-Z0-9]/g,"-")}`;if(te.append("clipPath").attr("id",ct).append("rect").attr("x",z).attr("y",G+rt).attr("width",U).attr("height",W-rt).attr("rx",J-1),B.append("rect").attr("x",z).attr("y",G).attr("width",U).attr("height",W).attr("rx",J).attr("fill","#1a1a1a").attr("stroke",ut).attr("stroke-width",X),I>0){const R=W-rt,w=I/100*R;B.append("rect").attr("x",z).attr("y",G+rt+(R-w)).attr("width",U).attr("height",w).attr("fill","rgba(255,215,0,0.75)").attr("clip-path",`url(#${ct})`)}const lt="rgba(0,0,0,0.35)",kt=W*.14,At=U*.05,Et=G+rt+(W-rt)*.6,h=z+U*.18,f=z+U*.28;[h,f].forEach(R=>{B.append("rect").attr("x",R-At/2).attr("y",Et).attr("width",At).attr("height",kt).attr("fill",lt).attr("rx",1.5)});const b=U*.2,k=z+U*.5-b/2;B.append("rect").attr("x",k).attr("y",Et).attr("width",b).attr("height",kt*.6).attr("fill",lt).attr("rx",1)}else if(it==="mac mini"){U=Ht*1.3,W=Ht*.7;const z=m.x-U/2,G=m.y-W/2,J=3,rt=W*.2,ct=`mini-clip-${m.id.replace(/[^a-zA-Z0-9]/g,"-")}`;if(te.append("clipPath").attr("id",ct).append("rect").attr("x",z).attr("y",G+rt).attr("width",U).attr("height",W-rt).attr("rx",J-1),B.append("rect").attr("x",z).attr("y",G).attr("width",U).attr("height",W).attr("rx",J).attr("fill","#1a1a1a").attr("stroke",ut).attr("stroke-width",X),I>0){const b=W-rt,k=I/100*b;B.append("rect").attr("x",z).attr("y",G+rt+(b-k)).attr("width",U).attr("height",k).attr("fill","rgba(255,215,0,0.75)").attr("clip-path",`url(#${ct})`)}const lt="rgba(0,0,0,0.35)",kt=W*.2,At=U*.045,Et=G+rt+(W-rt)*.45,h=z+U*.2,f=z+U*.3;[h,f].forEach(b=>{B.append("rect").attr("x",b-At/2).attr("y",Et).attr("width",At).attr("height",kt).attr("fill",lt).attr("rx",1.2)})}else if(it==="macbook pro"||it.includes("macbook")){U=Ht*1.6,W=Ht*1.15,m.x-U/2;const z=m.y-W/2,G=W*.7,J=W*.3,rt=U*.85,ct=m.x-rt/2,lt=3,kt=`screen-clip-${m.id.replace(/[^a-zA-Z0-9]/g,"-")}`;if(te.append("clipPath").attr("id",kt).append("rect").attr("x",ct+lt).attr("y",z+lt).attr("width",rt-lt*2).attr("height",G-lt*2).attr("rx",2),B.append("rect").attr("x",ct).attr("y",z).attr("width",rt).attr("height",G).attr("rx",3).attr("fill","#1a1a1a").attr("stroke",ut).attr("stroke-width",X),B.append("rect").attr("x",ct+lt).attr("y",z+lt).attr("width",rt-lt*2).attr("height",G-lt*2).attr("rx",2).attr("fill","#0a0a12"),I>0){const qt=G-lt*2,re=I/100*qt;B.append("rect").attr("x",ct+lt).attr("y",z+lt+(qt-re)).attr("width",rt-lt*2).attr("height",re).attr("fill","rgba(255,215,0,0.85)").attr("clip-path",`url(#${kt})`)}const Et=G*.22/dt,h=m.x-A*Et/2,f=z+G/2-dt*Et/2;B.append("path").attr("d",N).attr("transform",`translate(${h}, ${f}) scale(${Et})`).attr("fill","#FFFFFF").attr("opacity",.9);const b=z+G,k=rt,R=U,w=m.x-k/2,$=m.x-R/2;B.append("path").attr("d",`M ${w} ${b} L ${w+k} ${b} L ${$+R} ${b+J} L ${$} ${b+J} Z`).attr("fill","#2c2c2c").attr("stroke",ut).attr("stroke-width",1);const at=w+6,et=b+3,vt=k-12,It=J*.55;B.append("rect").attr("x",at).attr("y",et).attr("width",vt).attr("height",It).attr("fill","rgba(0,0,0,0.2)").attr("rx",2);const wt=k*.4,Bt=m.x-wt/2,_t=b+It+5,Pt=J*.3;B.append("rect").attr("x",Bt).attr("y",_t).attr("width",wt).attr("height",Pt).attr("fill","rgba(255,255,255,0.08)").attr("rx",2)}else{const z=Ht*.6,G=Array.from({length:6},(J,rt)=>{const ct=(rt*60-30)*Math.PI/180;return`${m.x+z*Math.cos(ct)},${m.y+z*Math.sin(ct)}`}).join(" ");B.append("polygon").attr("points",G).attr("fill",ft).attr("stroke",ut).attr("stroke-width",X)}if(H||e(c)){const z=e(c)?Math.max(16,Ht*.32):Math.max(28,Ht*.3),G=W*.95,J=U/2+(e(c)?5:10),rt=m.x+J,ct=m.y-G/2;if(B.append("rect").attr("x",rt).attr("y",ct).attr("width",z).attr("height",G).attr("fill","rgba(80, 80, 90, 0.7)").attr("rx",2),zt>0){const k=zt/100*G,R=K(_);B.append("rect").attr("x",rt).attr("y",ct+(G-k)).attr("width",z).attr("height",k).attr("fill",R).attr("opacity",.9).attr("rx",2)}const lt=rt+z/2,kt=ct+G/2,At=e(c)?Math.max(10,z*.6):Math.min(16,Math.max(12,z*.55)),Et=At*1.25,h=`${zt.toFixed(0)}%`,f=isNaN(_)?"-":`${_.toFixed(0)}Â°C`,b=Ct!==null?`${Ct.toFixed(0)}W`:"-";B.append("text").attr("x",lt).attr("y",kt-Et).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("fill","#FFFFFF").attr("font-size",At).attr("font-weight","700").attr("font-family","SF Mono, Monaco, monospace").text(h),B.append("text").attr("x",lt).attr("y",kt).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("fill","#FFFFFF").attr("font-size",At).attr("font-weight","700").attr("font-family","SF Mono, Monaco, monospace").text(f),B.append("text").attr("x",lt).attr("y",kt+Et).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("fill","#FFFFFF").attr("font-size",At).attr("font-weight","700").attr("font-family","SF Mono, Monaco, monospace").text(b)}if(H){const z=m.y-W/2-15,G=Math.max(10,Ht*.16),J=le===1?22:le===2?18:le===3?16:14,rt=P.length>J?P.slice(0,J-2)+"..":P;B.append("text").attr("x",m.x).attr("y",z).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("fill","#FFD700").attr("font-size",G).attr("font-weight",500).attr("font-family","SF Mono, Monaco, monospace").text(rt);const ct=m.y+W/2+16,lt=B.append("text").attr("x",m.x).attr("y",ct).attr("text-anchor","middle").attr("font-size",G*.85).attr("font-family","SF Mono, Monaco, monospace");lt.append("tspan").attr("fill","rgba(255,215,0,0.9)").text(`${Z(Ot)}`),lt.append("tspan").attr("fill","rgba(179,179,179,0.9)").text(`/${Z(bt)}`),lt.append("tspan").attr("fill","rgba(179,179,179,0.7)").text(` (${I.toFixed(0)}%)`)}else if(Qt){const z=Math.max(7,Ht*.11),G=m.y+W/2+9,J=P.length>10?P.slice(0,8)+"..":P;B.append("text").attr("x",m.x).attr("y",G).attr("text-anchor","middle").attr("fill","#FFD700").attr("font-size",z).attr("font-family","SF Mono, Monaco, monospace").text(J);const rt=G+9;B.append("text").attr("x",m.x).attr("y",rt).attr("text-anchor","middle").attr("fill","rgba(255,215,0,0.7)").attr("font-size",z*.85).attr("font-family","SF Mono, Monaco, monospace").text(`${I.toFixed(0)}%${isNaN(_)?"":" "+_.toFixed(0)+"Â°C"}`)}else{const G=m.y-W/2-8,J=P.length>12?P.slice(0,10)+"..":P;B.append("text").attr("x",m.x).attr("y",G).attr("text-anchor","middle").attr("fill","#FFD700").attr("font-size",8).attr("font-weight","500").attr("font-family","SF Mono, Monaco, monospace").text(J);const rt=m.y+W/2+10,ct=B.append("text").attr("x",m.x).attr("y",rt).attr("text-anchor","middle").attr("font-size",8*.85).attr("font-family","SF Mono, Monaco, monospace");ct.append("tspan").attr("fill","rgba(255,215,0,0.9)").text(`${Z(Ot)}`),ct.append("tspan").attr("fill","rgba(179,179,179,0.9)").text(`/${Z(bt)}`),ct.append("tspan").attr("fill","rgba(179,179,179,0.7)").text(` (${I.toFixed(0)}%)`)}})}Nr(()=>{e(d)&&Mt()}),Oo(()=>{e(o)&&(l=new ResizeObserver(()=>{Mt()}),l.observe(e(o)))}),zo(()=>{l==null||l.disconnect()});var Nt=Qd();$r(Nt,nt=>Y(o,nt),()=>e(o)),V(()=>ht(Nt,0,`w-full h-full ${n()??""}`)),y(t,Nt),qr()}const yi=[".jpg",".jpeg",".png",".gif",".webp",".svg"],wi=["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"],ki=[".txt",".md",".json",".xml",".yaml",".yml",".csv",".log",".js",".ts",".jsx",".tsx",".py",".java",".cpp",".c",".h",".css",".html",".htm",".sql",".sh",".bat",".rs",".go",".rb",".php",".swift",".kt",".scala",".r",".dart",".vue",".svelte"],Mi=["text/plain","text/markdown","text/csv","text/html","text/css","application/json","application/xml","text/xml","application/javascript","text/javascript","application/typescript"],Si=[".pdf"],Ti=["application/pdf"],Ni=[".mp3",".wav",".ogg",".m4a"],$i=["audio/mpeg","audio/wav","audio/ogg","audio/mp4"];function to(t,r){const n=r.toLowerCase().slice(r.lastIndexOf("."));return wi.includes(t)||yi.includes(n)?"image":Ti.includes(t)||Si.includes(n)?"pdf":$i.includes(t)||Ni.includes(n)?"audio":Mi.includes(t)||ki.includes(n)||t.startsWith("text/")?"text":"unknown"}function tu(t){const r=[];for(const n of t)switch(n){case"image":r.push(...yi,...wi);break;case"text":r.push(...ki,...Mi);break;case"pdf":r.push(...Si,...Ti);break;case"audio":r.push(...Ni,...$i);break}return r.join(",")}function eu(t){if(t===0)return"0 B";const r=1024,n=["B","KB","MB","GB"],a=Math.floor(Math.log(t)/Math.log(r));return parseFloat((t/Math.pow(r,a)).toFixed(1))+" "+n[a]}function Do(t){return new Promise((r,n)=>{const a=new FileReader;a.onload=()=>r(a.result),a.onerror=()=>n(a.error),a.readAsDataURL(t)})}function ru(t){return new Promise((r,n)=>{const a=new FileReader;a.onload=()=>r(a.result),a.onerror=()=>n(a.error),a.readAsText(t)})}async function nu(t){const r=[];for(const n of t){const a=Date.now().toString()+Math.random().toString(36).substring(2,9),o=to(n.type,n.name),l={id:a,name:n.name,size:n.size,type:n.type,file:n};try{if(o==="image"){const c=await Do(n);r.push({...l,preview:c})}else if(o==="text"||o==="unknown"){const c=await ru(n);r.push({...l,textContent:c})}else if(o==="pdf")r.push(l);else if(o==="audio"){const c=await Do(n);r.push({...l,preview:c})}else r.push(l)}catch(c){console.error("Error processing file:",n.name,c),r.push(l)}}return r}var au=M('<img class="w-8 h-8 object-cover rounded border border-exo-yellow/20"/>'),ou=M('<span class="text-base"> </span>'),iu=M('<button type="button" class="ml-1 w-4 h-4 flex items-center justify-center text-exo-light-gray hover:text-red-400 transition-colors cursor-pointer" title="Remove file"><svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>'),su=M('<div class="group relative flex items-center gap-2 bg-exo-dark-gray/80 border border-exo-yellow/30 rounded px-2.5 py-1.5 text-xs font-mono transition-all hover:border-exo-yellow/50 hover:shadow-[0_0_10px_rgba(255,215,0,0.1)]"><!> <div class="flex flex-col min-w-0"><span class="text-exo-yellow truncate max-w-[120px]"> </span> <span class="text-exo-light-gray text-xs"> </span></div> <!></div>'),lu=M('<div class="flex flex-wrap gap-2 mb-3 px-1"></div>');function cu(t,r){Vr(r,!0);let n=he(r,"readonly",3,!1);function a(v){switch(to(v.type,v.name)){case"image":return"ðŸ–¼";case"text":return"ðŸ“„";case"pdf":return"ðŸ“‘";case"audio":return"ðŸŽµ";default:return"ðŸ“Ž"}}function o(v,g=20){if(v.length<=g)return v;const p=v.slice(v.lastIndexOf(".")),F=v.slice(0,v.lastIndexOf(".")),N=g-p.length-3;return F.slice(0,N)+"..."+p}var l=Ae(),c=Jt(l);{var d=v=>{var g=lu();de(g,21,()=>r.files,p=>p.id,(p,F)=>{var N=su(),A=s(N);{var dt=ot=>{var pt=au();V(()=>{j(pt,"src",e(F).preview),j(pt,"alt",e(F).name)}),y(ot,pt)},Z=ot=>{var pt=ou(),$t=s(pt,!0);i(pt),V(Wt=>L($t,Wt),[()=>a(e(F))]),y(ot,pt)};O(A,ot=>{e(F).preview&&to(e(F).type,e(F).name)==="image"?ot(dt):ot(Z,!1)})}var K=u(A,2),Mt=s(K),Nt=s(Mt,!0);i(Mt);var nt=u(Mt,2),St=s(nt,!0);i(nt),i(K);var yt=u(K,2);{var Ft=ot=>{var pt=iu();pt.__click=()=>{var $t;return($t=r.onRemove)==null?void 0:$t.call(r,e(F).id)},y(ot,pt)};O(yt,ot=>{!n()&&r.onRemove&&ot(Ft)})}i(N),V((ot,pt)=>{j(Mt,"title",e(F).name),L(Nt,ot),L(St,pt)},[()=>o(e(F).name),()=>eu(e(F).size)]),y(p,N)}),i(g),y(v,g)};O(c,v=>{r.files.length>0&&v(d)})}y(t,l),qr()}fn(["click"]);var du=M('<div class="absolute inset-0 bg-exo-dark-gray/80 z-10 flex items-center justify-center"><div class="text-exo-yellow text-sm font-mono tracking-wider uppercase">DROP FILES HERE</div></div>'),uu=M('<span class="text-exo-yellow truncate"> </span>'),fu=M('<span class="text-exo-yellow truncate"> </span>'),vu=M('<span class="text-exo-light-gray/50">â€” SELECT MODEL â€”</span>'),hu=je('<svg class="w-3 h-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),pu=M('<span class="w-3"></span>'),xu=M('<button type="button"><!> <span class="truncate"> </span></button>'),gu=M('<button type="button" class="fixed inset-0 z-[9998] cursor-default" aria-label="Close dropdown"></button> <div class="fixed bg-exo-dark-gray border border-exo-yellow/30 rounded shadow-lg shadow-black/50 z-[9999] max-h-48 overflow-y-auto"><div class="py-1"></div></div>',1),mu=M('<span class="text-exo-light-gray"><span class="text-white/70">TTFT</span> <span class="text-exo-yellow"> </span></span>'),_u=M('<span class="text-exo-light-gray"><span class="text-white/70">TPS</span> <span class="text-exo-yellow"> </span> <span class="text-white/60">tok/s</span> <span class="text-white/50"> </span></span>'),bu=M('<div class="flex items-center gap-4 text-xs font-mono flex-shrink-0"><!> <!></div>'),yu=M('<div class="flex items-center justify-between gap-2 px-3 py-2 border-b border-exo-medium-gray/30"><div class="flex items-center gap-2 flex-1"><span class="text-xs text-exo-light-gray uppercase tracking-wider flex-shrink-0">MODEL:</span> <div class="relative flex-1 max-w-xs"><button type="button"><!></button> <div><svg class="w-3 h-3 text-exo-yellow/60" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></div></div> <!></div> <!></div>'),wu=M('<div class="px-3 pt-3"><!></div>'),ku=M('<span class="inline-flex items-center gap-1 sm:gap-2"><span class="w-2.5 h-2.5 sm:w-3 sm:h-3 border-2 border-current border-t-transparent rounded-full animate-spin"></span> <span class="hidden sm:inline">PROCESSING</span> <span class="sm:hidden">...</span></span>'),Mu=M('<p class="mt-2 sm:mt-3 text-center text-xs sm:text-xs text-exo-light-gray tracking-[0.1em] sm:tracking-[0.15em] uppercase"><kbd class="px-1 sm:px-1.5 py-0.5 rounded bg-exo-medium-gray/30 text-exo-light-gray border border-exo-medium-gray/50">ENTER</kbd> <span class="mx-0.5 sm:mx-1">TO SEND</span> <span class="text-exo-medium-gray mx-1 sm:mx-2">|</span> <kbd class="px-1 sm:px-1.5 py-0.5 rounded bg-exo-medium-gray/30 text-exo-light-gray border border-exo-medium-gray/50">SHIFT+ENTER</kbd> <span class="mx-0.5 sm:mx-1">NEW LINE</span> <span class="text-exo-medium-gray mx-1 sm:mx-2">|</span> <span class="text-exo-light-gray">DRAG & DROP OR PASTE FILES</span></p>'),Su=M('<input type="file" multiple class="hidden"/> <form><div><div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-exo-yellow/50 to-transparent"></div> <!> <!> <!> <div class="flex items-start gap-2 sm:gap-3 py-3 px-3 sm:px-4"><button type="button" class="flex items-center justify-center w-7 h-7 rounded text-exo-light-gray hover:text-exo-yellow transition-all disabled:opacity-50 disabled:cursor-not-allowed flex-shrink-0 cursor-pointer" title="Attach file"><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"></path></svg></button> <span class="text-exo-yellow text-sm font-bold flex-shrink-0 leading-7">â–¶</span> <textarea class="flex-1 resize-none bg-transparent text-foreground placeholder:text-exo-light-gray/60 placeholder:text-sm placeholder:tracking-[0.15em] placeholder:leading-7 focus:outline-none focus:ring-0 focus:border-none disabled:opacity-50 text-sm leading-7 font-mono" style="min-height: 28px; max-height: 150px;"></textarea> <button type="submit" aria-label="Send message"><!></button></div> <div class="absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-exo-yellow/30 to-transparent"></div></div> <!></form>',1);function Lo(t,r){Vr(r,!0);let n=he(r,"class",3,""),a=he(r,"placeholder",3,"Ask anything"),o=he(r,"showHelperText",3,!1),l=he(r,"autofocus",3,!0),c=he(r,"showModelSelector",3,!1),d=Rt(""),v=Rt(void 0),g=Rt(void 0),p=Rt(ln([])),F=Rt(!1),N=D(Yo);const A=D(Wo),dt=D(ro),Z=D(cs),K=D(ds);let Mt=Rt(!1),Nt=Rt(void 0),nt=D(()=>()=>{if(!e(Nt)||!e(Mt))return{top:0,left:0,width:0};const x=e(Nt).getBoundingClientRect();return{top:x.top,left:x.left,width:x.width}});const St=tu(["image","text","pdf"]),yt=D(()=>()=>{const x=[];for(const[,C]of Object.entries(e(dt))){const P=Ft(C);P&&P!=="Unknown"&&!x.some(I=>I.id===P)&&x.push({id:P,label:P.split("/").pop()||P})}return x});Nr(()=>{const x=e(yt)();x.length>0&&!e(A)&&jr(x[0].id)});function Ft(x){var P;if(!x||typeof x!="object")return"";const C=Object.keys(x);if(C.length===1){const I=x[C[0]];return((P=I==null?void 0:I.shardAssignments)==null?void 0:P.modelId)||""}return""}async function ot(x){if(x.length===0)return;const C=await nu(x);Y(p,[...e(p),...C],!0)}function pt(x){const C=x.target;C.files&&C.files.length>0&&(ot(Array.from(C.files)),C.value="")}function $t(x){Y(p,e(p).filter(C=>C.id!==x),!0)}function Wt(x){if(!x.clipboardData)return;const C=Array.from(x.clipboardData.items).filter(I=>I.kind==="file").map(I=>I.getAsFile()).filter(I=>I!==null);if(C.length>0){x.preventDefault(),ot(C);return}const P=x.clipboardData.getData("text/plain");if(P.length>2500){x.preventDefault();const I=new File([P],"pasted-text.txt",{type:"text/plain"});ot([I])}}function Ut(x){x.preventDefault(),Y(F,!0)}function te(x){x.preventDefault(),Y(F,!1)}function Xt(x){var C;x.preventDefault(),Y(F,!1),(C=x.dataTransfer)!=null&&C.files&&ot(Array.from(x.dataTransfer.files))}function Ce(x){x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),Ke())}function Ke(){if(!e(d).trim()&&e(p).length===0||e(N))return;const x=e(d).trim(),C=[...e(p)];Y(d,""),Y(p,[],!0),ee(),ls(x,C),setTimeout(()=>{var P;return(P=e(v))==null?void 0:P.focus()},10)}function le(){e(v)&&(e(v).style.height="auto",e(v).style.height=Math.min(e(v).scrollHeight,150)+"px")}function ee(){e(v)&&(e(v).style.height="auto")}function pe(){var x;(x=e(g))==null||x.click()}let Xe=Rt(!1);Nr(()=>{l()&&e(v)&&setTimeout(()=>{var x;return(x=e(v))==null?void 0:x.focus()},10)}),Nr(()=>{e(Xe)&&!e(N)&&e(v)&&setTimeout(()=>{var x;return(x=e(v))==null?void 0:x.focus()},50),Y(Xe,e(N),!0)});const Ht=D(()=>e(d).trim().length>0||e(p).length>0);var Re=Su(),xe=Jt(Re);xe.__change=pt,$r(xe,x=>Y(g,x),()=>e(g));var ae=u(xe,2),Se=s(ae),tt=u(s(Se),2);{var H=x=>{var C=du();y(x,C)};O(tt,x=>{e(F)&&x(H)})}var Qt=u(tt,2);{var ge=x=>{var C=yu(),P=s(C),I=u(s(P),2),_=s(I);_.__click=()=>Y(Mt,!e(Mt));var bt=s(_);{var Ot=st=>{var ut=uu(),ft=s(ut,!0);i(ut),V(X=>L(ft,X),[()=>{var X;return(X=e(yt)().find(xt=>xt.id===e(A)))==null?void 0:X.label}]),y(st,ut)},zt=st=>{var ut=Ae(),ft=Jt(ut);{var X=z=>{var G=fu(),J=s(G,!0);i(G),V(rt=>L(J,rt),[()=>e(yt)()[0].label]),y(z,G)},xt=z=>{var G=vu();y(z,G)};O(ft,z=>{e(yt)().length>0?z(X):z(xt,!1)},!0)}y(st,ut)};O(bt,st=>{e(yt)().find(ut=>ut.id===e(A))?st(Ot):st(zt,!1)})}i(_),$r(_,st=>Y(Nt,st),()=>e(Nt));var Ct=u(_,2);i(I);var B=u(I,2);{var U=st=>{var ut=gu(),ft=Jt(ut);ft.__click=()=>Y(Mt,!1);var X=u(ft,2),xt=s(X);de(xt,21,()=>e(yt)(),ye,(z,G)=>{var J=xu();J.__click=()=>{jr(e(G).id),Y(Mt,!1)};var rt=s(J);{var ct=Et=>{var h=hu();y(Et,h)},lt=Et=>{var h=pu();y(Et,h)};O(rt,Et=>{e(A)===e(G).id?Et(ct):Et(lt,!1)})}var kt=u(rt,2),At=s(kt,!0);i(kt),i(J),V(()=>{ht(J,1,`w-full px-3 py-2 text-left text-xs font-mono tracking-wide transition-colors duration-100 flex items-center gap-2 ${e(A)===e(G).id?"bg-transparent text-exo-yellow":"text-exo-light-gray hover:text-exo-yellow"}`),L(At,e(G).label)}),y(z,J)}),i(xt),i(X),V((z,G,J)=>Sr(X,`bottom: calc(100vh - ${z??""}px + 4px); left: ${G??""}px; width: ${J??""}px;`),[()=>e(nt)().top,()=>e(nt)().left,()=>e(nt)().width]),y(st,ut)};O(B,st=>{e(Mt)&&st(U)})}i(P);var W=u(P,2);{var it=st=>{var ut=bu(),ft=s(ut);{var X=G=>{var J=mu(),rt=u(s(J),2),ct=s(rt);i(rt),i(J),V(lt=>L(ct,`${lt??""}ms`),[()=>e(Z).toFixed(1)]),y(G,J)};O(ft,G=>{e(Z)!==null&&G(X)})}var xt=u(ft,2);{var z=G=>{var J=_u(),rt=u(s(J),2),ct=s(rt,!0);i(rt);var lt=u(rt,4),kt=s(lt);i(lt),i(J),V((At,Et)=>{L(ct,At),L(kt,`(${Et??""} ms/tok)`)},[()=>e(K).toFixed(1),()=>(1e3/e(K)).toFixed(1)]),y(G,J)};O(xt,G=>{e(K)!==null&&G(z)})}i(ut),y(st,ut)};O(W,st=>{(e(Z)!==null||e(K)!==null)&&st(it)})}i(C),V(()=>{ht(_,1,`w-full bg-exo-medium-gray/50 border border-exo-yellow/30 rounded pl-3 pr-8 py-1.5 text-xs font-mono text-left tracking-wide cursor-pointer transition-all duration-200 hover:border-exo-yellow/50 focus:outline-none focus:border-exo-yellow/70 ${e(Mt)?"border-exo-yellow/70":""}`),ht(Ct,1,`absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none transition-transform duration-200 ${e(Mt)?"rotate-180":""}`)}),y(x,C)};O(Qt,x=>{c()&&e(yt)().length>0&&x(ge)})}var fe=u(Qt,2);{var Ye=x=>{var C=wu(),P=s(C);cu(P,{get files(){return e(p)},onRemove:$t}),i(C),y(x,C)};O(fe,x=>{e(p).length>0&&x(Ye)})}var me=u(fe,2),ce=s(me);ce.__click=pe;var Q=u(ce,4);Uo(Q),Q.__keydown=Ce,Q.__input=le,j(Q,"rows",1),$r(Q,x=>Y(v,x),()=>e(v));var q=u(Q,2),mt=s(q);{var T=x=>{var C=ku();y(x,C)},E=x=>{var C=ja("SEND");y(x,C)};O(mt,x=>{e(N)?x(T):x(E,!1)})}i(q),i(me),qe(2),i(Se);var m=u(Se,2);{var S=x=>{var C=Mu();y(x,C)};O(m,x=>{o()&&x(S)})}i(ae),V(()=>{j(xe,"accept",St),ht(ae,1,`w-full ${n()??""}`),ht(Se,1,`relative command-panel rounded overflow-hidden transition-all duration-200 ${e(F)?"ring-2 ring-exo-yellow ring-opacity-50":""}`),ce.disabled=e(N),j(Q,"placeholder",a()),Q.disabled=e(N),q.disabled=!e(Ht)||e(N),ht(q,1,`px-2.5 sm:px-4 py-1.5 sm:py-2 rounded text-xs sm:text-xs tracking-[0.1em] sm:tracking-[0.15em] uppercase font-medium transition-all duration-200 whitespace-nowrap
					${!e(Ht)||e(N)?"bg-exo-medium-gray/50 text-exo-light-gray cursor-not-allowed":"bg-exo-yellow text-exo-black hover:bg-exo-yellow-darker hover:shadow-[0_0_20px_rgba(255,215,0,0.3)]"}`)}),Ee("submit",ae,x=>{x.preventDefault(),Ke()}),Ee("dragover",ae,Ut),Ee("dragleave",ae,te),Ee("drop",ae,Xt),Ee("paste",Q,Wt),Ln(Q,()=>e(d),x=>Y(d,x)),y(t,Re),qr()}fn(["change","click","keydown","input"]);var Tu=M('<span class="text-exo-light-gray/50">TTFT</span> ',1),Nu=M('<span class="text-exo-light-gray/30 mx-1">â€¢</span>'),$u=M(' <span class="text-exo-light-gray/50">tok/s</span>',1),Fu=M('<span class="text-xs text-exo-light-gray/80 font-mono ml-2"><!><!><!></span>'),Eu=M('<div class="flex items-center gap-1.5 sm:gap-2 mb-1.5 sm:mb-2"><div class="w-1.5 h-1.5 sm:w-2 sm:h-2 bg-exo-yellow rounded-full shadow-[0_0_10px_rgba(255,215,0,0.5)]"></div> <span class="text-sm sm:text-xs text-exo-yellow tracking-[0.15em] sm:tracking-[0.2em] uppercase font-medium">EXO</span> <span class="text-xs sm:text-sm text-exo-light-gray tracking-wider tabular-nums"> </span> <!></div>'),Au=M('<div class="flex items-center justify-end gap-1.5 sm:gap-2 mb-1.5 sm:mb-2"><span class="text-xs sm:text-sm text-exo-light-gray tracking-wider tabular-nums"> </span> <span class="text-sm sm:text-xs text-exo-light-gray tracking-[0.1em] sm:tracking-[0.15em] uppercase">QUERY</span> <div class="w-1.5 h-1.5 sm:w-2 sm:h-2 bg-exo-light-gray/50 rounded-full"></div></div>'),Cu=M('<div class="bg-red-500/10 border border-red-500/30 rounded-lg p-3"><p class="text-xs text-red-400 mb-3"> </p> <div class="flex gap-2 justify-end"><button class="px-3 py-1.5 text-sm font-mono tracking-wider uppercase bg-exo-medium-gray/20 text-exo-light-gray border border-exo-medium-gray/30 rounded hover:bg-exo-medium-gray/30 transition-colors cursor-pointer">CANCEL</button> <button class="px-3 py-1.5 text-sm font-mono tracking-wider uppercase bg-red-500/20 text-red-400 border border-red-500/30 rounded hover:bg-red-500/30 transition-colors cursor-pointer">DELETE</button></div></div>'),Bu=M('<div class="command-panel rounded-lg p-3"><textarea class="w-full bg-exo-black/60 border border-exo-yellow/30 rounded px-3 py-2 text-sm text-foreground font-mono focus:outline-none focus:border-exo-yellow/50 resize-none" style="min-height: 60px; max-height: 200px;"></textarea> <div class="flex gap-2 justify-end mt-2"><button class="px-3 py-1.5 text-sm font-mono tracking-wider uppercase bg-exo-medium-gray/20 text-exo-light-gray border border-exo-medium-gray/30 rounded hover:bg-exo-medium-gray/30 transition-colors cursor-pointer">CANCEL</button> <button class="px-3 py-1.5 text-sm font-mono tracking-wider uppercase bg-transparent text-exo-yellow border border-exo-yellow/30 rounded hover:border-exo-yellow/50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5 cursor-pointer"><svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg> SEND</button></div></div>'),Iu=M('<img class="w-12 h-12 object-cover rounded border border-exo-yellow/20"/>'),Du=M("<span> </span>"),Lu=M('<div class="flex items-center gap-2 bg-exo-dark-gray/60 border border-exo-yellow/20 rounded px-2 py-1 text-xs font-mono"><!> <span class="text-exo-yellow"> </span></div>'),Ru=M('<div class="flex flex-wrap gap-2 mb-3"></div>'),Ou=M('<div class="text-sm text-foreground font-mono tracking-wide whitespace-pre-wrap break-words leading-relaxed"> </div>'),zu=M('<div class="px-4 py-3"><!> <!></div>'),Gu=M('<div class="px-3 pb-3 text-xs text-exo-light-gray/90 font-mono whitespace-pre-wrap break-words leading-relaxed"> </div>'),Hu=M('<div class="mb-3 rounded border border-exo-yellow/20 bg-exo-black/40"><button type="button" class="w-full flex items-center justify-between px-3 py-2 text-xs font-mono uppercase tracking-[0.2em] text-exo-light-gray/80 hover:text-exo-yellow transition-colors cursor-pointer"><span class="flex items-center gap-2 tracking-[0.25em]"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg> <span>Thinking...</span></span> <span class="text-[10px] tracking-[0.2em] text-exo-light-gray/60"> </span></button> <!></div>'),Pu=M('<span class="inline-block w-2 h-4 bg-exo-yellow/70 ml-1 cursor-blink"></span>'),Uu=M('<div class="p-3 sm:p-4"><!> <div class="text-sm text-foreground font-mono tracking-wide whitespace-pre-wrap break-words leading-relaxed"> <!></div></div>'),ju=je('<svg class="w-3.5 h-3.5 text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>'),Xu=je('<svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>'),Yu=M('<button class="p-1.5 text-exo-light-gray hover:text-exo-yellow transition-colors rounded cursor-pointer" title="Edit message"><svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button>'),Wu=M('<button class="p-1.5 text-exo-light-gray hover:text-exo-yellow transition-colors rounded cursor-pointer" title="Regenerate response"><svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button>'),Vu=M('<div><!></div> <div><button class="p-1.5 text-exo-light-gray hover:text-exo-yellow transition-colors rounded cursor-pointer" title="Copy message"><!></button> <!> <!> <button class="p-1.5 text-exo-light-gray hover:text-red-400 transition-colors rounded hover:bg-red-500/10 cursor-pointer" title="Delete message"><svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div>',1),qu=M("<div><div><!> <!></div></div>"),Ku=M('<div class="flex-1 flex flex-col items-center justify-center text-center pt-[20vh]"><div class="w-12 h-12 sm:w-16 sm:h-16 border border-exo-yellow/20 rounded-full flex items-center justify-center mb-3 sm:mb-4"><div class="w-6 h-6 sm:w-8 sm:h-8 border border-exo-yellow/40 rounded-full flex items-center justify-center"><div class="w-1.5 h-1.5 sm:w-2 sm:h-2 bg-exo-yellow/60 rounded-full"></div></div></div> <p class="text-xs sm:text-sm text-exo-light-gray tracking-[0.15em] sm:tracking-[0.2em] uppercase">AWAITING INPUT</p> <p class="text-sm sm:text-xs text-exo-light-gray tracking-wider mt-1">ENTER A QUERY TO BEGIN</p></div>'),Zu=M("<div><!> <!> <div></div></div>");function Ju(t,r){Vr(r,!0);let n=he(r,"class",3,""),a=he(r,"scrollParent",3,null);const o=D(us),l=D(fs),c=D(Yo);let d=Rt(void 0);const v=120;let g=!0,p=null;function F(){var H;if(a())return a();let tt=(H=e(d))==null?void 0:H.parentElement;for(;tt;){if(tt.scrollHeight>tt.clientHeight+1)return tt;tt=tt.parentElement}return null}function N(){if(!p)return;g=p.scrollHeight-p.scrollTop-p.clientHeight<v}function A(){const tt=F();p!==tt&&(p&&p.removeEventListener("scroll",N),p=tt,p&&(p.addEventListener("scroll",N),N()))}zo(()=>{p&&p.removeEventListener("scroll",N)}),Nr(()=>{a(),A()}),Nr(()=>{e(o).length,e(l),e(c),Po().then(()=>{const tt=p??F();if(!tt||!e(d))return;const Qt=tt.scrollHeight-tt.scrollTop-tt.clientHeight<v;(g||Qt)&&(e(d).scrollIntoView({behavior:"smooth",block:"end"}),g=!0)})});let dt=Rt(null),Z=Rt(""),K=Rt(void 0),Mt=Rt(null),Nt=Rt(null),nt=Rt(ln(new Set));function St(tt){return new Date(tt).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}function yt(tt){switch(tt.type){case"image":return"ðŸ–¼";case"text":return"ðŸ“„";default:return"ðŸ“Ž"}}function Ft(tt,H=25){if(tt.length<=H)return tt;const Qt=tt.slice(tt.lastIndexOf(".")),ge=tt.slice(0,tt.lastIndexOf(".")),fe=H-Qt.length-3;return ge.slice(0,fe)+"..."+Qt}async function ot(tt,H){try{await navigator.clipboard.writeText(tt),Y(Nt,H,!0),setTimeout(()=>{Y(Nt,null)},2e3)}catch(Qt){console.error("Failed to copy:",Qt)}}function pt(tt){const H=new Set(e(nt));H.has(tt)?H.delete(tt):H.add(tt),Y(nt,H,!0)}function $t(tt){return e(nt).has(tt)}function Wt(tt,H){Y(dt,tt,!0),Y(Z,H,!0),setTimeout(()=>{e(K)&&(e(K).focus(),e(K).setSelectionRange(e(K).value.length,e(K).value.length),e(K).style.height="auto",e(K).style.height=Math.min(e(K).scrollHeight,200)+"px")},10)}function Ut(){Y(dt,null),Y(Z,"")}function te(){e(dt)&&e(Z).trim()&&hs(e(dt),e(Z).trim()),Y(dt,null),Y(Z,"")}function Xt(tt){tt.key==="Enter"&&!tt.shiftKey?(tt.preventDefault(),te()):tt.key==="Escape"&&Ut()}function Ce(){e(K)&&(e(K).style.height="auto",e(K).style.height=Math.min(e(K).scrollHeight,200)+"px")}function Ke(tt){Y(Mt,tt,!0)}function le(){e(Mt)&&(vs(e(Mt)),Y(Mt,null))}function ee(){Y(Mt,null)}function pe(){ps()}function Xe(tt){for(let H=e(o).length-1;H>=0;H--)if(e(o)[H].role==="assistant")return e(o)[H].id===tt;return!1}var Ht=Zu(),Re=s(Ht);de(Re,17,()=>e(o),tt=>tt.id,(tt,H)=>{var Qt=qu(),ge=s(Qt),fe=s(ge);{var Ye=mt=>{var T=Eu(),E=u(s(T),4),m=s(E,!0);i(E);var S=u(E,2);{var x=C=>{var P=Fu(),I=s(P);{var _=B=>{var U=Tu(),W=u(Jt(U));V(it=>L(W,` ${it??""}ms`),[()=>e(H).ttftMs.toFixed(0)]),y(B,U)};O(I,B=>{e(H).ttftMs&&B(_)})}var bt=u(I);{var Ot=B=>{var U=Nu();y(B,U)};O(bt,B=>{e(H).ttftMs&&e(H).tps&&B(Ot)})}var zt=u(bt);{var Ct=B=>{var U=$u(),W=Jt(U);qe(),V(it=>L(W,`${it??""} `),[()=>e(H).tps.toFixed(1)]),y(B,U)};O(zt,B=>{e(H).tps&&B(Ct)})}i(P),y(C,P)};O(S,C=>{(e(H).ttftMs||e(H).tps)&&C(x)})}i(T),V(C=>L(m,C),[()=>St(e(H).timestamp)]),y(mt,T)},me=mt=>{var T=Au(),E=s(T),m=s(E,!0);i(E),qe(4),i(T),V(S=>L(m,S),[()=>St(e(H).timestamp)]),y(mt,T)};O(fe,mt=>{e(H).role==="assistant"?mt(Ye):mt(me,!1)})}var ce=u(fe,2);{var Q=mt=>{var T=Cu(),E=s(T),m=s(E);i(E);var S=u(E,2),x=s(S);x.__click=ee;var C=u(x,2);C.__click=le,i(S),i(T),V(()=>L(m,`Delete this message${e(H).role==="user"?" and all responses after it":""}?`)),y(mt,T)},q=mt=>{var T=Ae(),E=Jt(T);{var m=x=>{var C=Bu(),P=s(C);Uo(P),P.__keydown=Xt,P.__input=Ce,$r(P,Ot=>Y(K,Ot),()=>e(K));var I=u(P,2),_=s(I);_.__click=Ut;var bt=u(_,2);bt.__click=te,i(I),i(C),V(Ot=>bt.disabled=Ot,[()=>!e(Z).trim()]),Ln(P,()=>e(Z),Ot=>Y(Z,Ot)),y(x,C)},S=x=>{var C=Vu(),P=Jt(C),I=s(P);{var _=X=>{var xt=zu(),z=s(xt);{var G=ct=>{var lt=Ru();de(lt,21,()=>e(H).attachments,ye,(kt,At)=>{var Et=Lu(),h=s(Et);{var f=w=>{var $=Iu();V(()=>{j($,"src",e(At).preview),j($,"alt",e(At).name)}),y(w,$)},b=w=>{var $=Du(),at=s($,!0);i($),V(et=>L(at,et),[()=>yt(e(At))]),y(w,$)};O(h,w=>{e(At).type==="image"&&e(At).preview?w(f):w(b,!1)})}var k=u(h,2),R=s(k,!0);i(k),i(Et),V(w=>{j(k,"title",e(At).name),L(R,w)},[()=>Ft(e(At).name)]),y(kt,Et)}),i(lt),y(ct,lt)};O(z,ct=>{e(H).attachments&&e(H).attachments.length>0&&ct(G)})}var J=u(z,2);{var rt=ct=>{var lt=Ou(),kt=s(lt,!0);i(lt),V(()=>L(kt,e(H).content)),y(ct,lt)};O(J,ct=>{e(H).content&&ct(rt)})}i(xt),y(X,xt)},bt=X=>{var xt=Uu(),z=s(xt);{var G=kt=>{var At=Hu(),Et=s(At);Et.__click=()=>pt(e(H).id);var h=s(Et),f=s(h);qe(2),i(h);var b=u(h,2),k=s(b,!0);i(b),i(Et);var R=u(Et,2);{var w=$=>{var at=Gu(),et=s(at,!0);i(at),V(vt=>{j(at,"id",`thinking-panel-${e(H).id}`),L(et,vt)},[()=>e(H).thinking.trim()]),y($,at)};O(R,$=>{$t(e(H).id)&&$(w)})}i(At),V(($,at,et)=>{j(Et,"aria-expanded",$),j(Et,"aria-controls",`thinking-panel-${e(H).id}`),ht(f,0,at),L(k,et)},[()=>$t(e(H).id),()=>`w-3.5 h-3.5 text-current transition-transform duration-200 ${$t(e(H).id)?"rotate-90":""}`,()=>$t(e(H).id)?"HIDE":"SHOW"]),y(kt,At)};O(z,kt=>{e(H).thinking&&e(H).thinking.trim().length>0&&kt(G)})}var J=u(z,2),rt=s(J),ct=u(rt);{var lt=kt=>{var At=Pu();y(kt,At)};O(ct,kt=>{e(c)&&!e(H).content&&kt(lt)})}i(J),i(xt),V(()=>L(rt,`${(e(H).content||(e(c)?e(l):""))??""} `)),y(X,xt)};O(I,X=>{e(H).role==="user"?X(_):X(bt,!1)})}i(P);var Ot=u(P,2),zt=s(Ot);zt.__click=()=>ot(e(H).content,e(H).id);var Ct=s(zt);{var B=X=>{var xt=ju();y(X,xt)},U=X=>{var xt=Xu();y(X,xt)};O(Ct,X=>{e(Nt)===e(H).id?X(B):X(U,!1)})}i(zt);var W=u(zt,2);{var it=X=>{var xt=Yu();xt.__click=()=>Wt(e(H).id,e(H).content),y(X,xt)};O(W,X=>{e(H).role==="user"&&X(it)})}var st=u(W,2);{var ut=X=>{var xt=Wu();xt.__click=pe,y(X,xt)};O(st,X=>{e(H).role==="assistant"&&Xe(e(H).id)&&!e(c)&&X(ut)})}var ft=u(st,2);ft.__click=()=>Ke(e(H).id),i(Ot),V(()=>{ht(P,1,e(H).role==="user"?"command-panel rounded-lg rounded-tr-sm inline-block":"command-panel rounded-lg rounded-tl-sm border-l-2 border-l-exo-yellow/50 inline-block"),ht(Ot,1,`flex items-center gap-1 mt-1.5 opacity-0 group-hover:opacity-100 transition-opacity ${e(H).role==="user"?"justify-end":"justify-start"}`)}),y(x,C)};O(E,x=>{e(dt)===e(H).id?x(m):x(S,!1)},!0)}y(mt,T)};O(ce,mt=>{e(Mt)===e(H).id?mt(Q):mt(q,!1)})}i(ge),i(Qt),V(()=>{ht(Qt,1,`group flex ${e(H).role==="user"?"justify-end":"justify-start"}`),ht(ge,1,e(H).role==="user"?"max-w-[85%] sm:max-w-[70%] flex flex-col items-end":"max-w-[95%] sm:max-w-[85%]")}),y(tt,Qt)});var xe=u(Re,2);{var ae=tt=>{var H=Ku();y(tt,H)};O(xe,tt=>{e(o).length===0&&tt(ae)})}var Se=u(xe,2);$r(Se,tt=>Y(d,tt),()=>e(d)),i(Ht),V(()=>ht(Ht,1,`flex flex-col gap-4 sm:gap-6 ${n()??""}`)),y(t,Ht),qr()}fn(["click","keydown","input"]);var Qu=M('<div class="p-2 bg-transparent border border-exo-yellow/20 rounded mb-1"><input type="text" class="w-full bg-exo-black/60 border border-exo-yellow/30 rounded px-2 py-1.5 text-xs text-exo-light-gray focus:outline-none focus:border-exo-yellow/50 mb-2"/> <div class="flex gap-2"><button class="flex-1 py-1.5 text-xs font-mono tracking-wider uppercase bg-transparent text-exo-yellow border border-exo-yellow/30 rounded hover:border-exo-yellow/50 cursor-pointer">SAVE</button> <button class="flex-1 py-1.5 text-xs font-mono tracking-wider uppercase bg-exo-medium-gray/20 text-exo-light-gray border border-exo-medium-gray/30 rounded hover:bg-exo-medium-gray/30 cursor-pointer">CANCEL</button></div></div>'),tf=M('<div class="p-2 bg-red-500/10 border border-red-500/30 rounded mb-1"><p class="text-xs text-red-400 mb-2"> </p> <div class="flex gap-2"><button class="flex-1 py-1.5 text-xs font-mono tracking-wider uppercase bg-red-500/20 text-red-400 border border-red-500/30 rounded hover:bg-red-500/30 cursor-pointer">DELETE</button> <button class="flex-1 py-1.5 text-xs font-mono tracking-wider uppercase bg-exo-medium-gray/20 text-exo-light-gray border border-exo-medium-gray/30 rounded hover:bg-exo-medium-gray/30 cursor-pointer">CANCEL</button></div></div>'),ef=M('<span class="text-white/40">TTFT</span> ',1),rf=M('<span class="text-white/30 mx-1.5">â€¢</span>'),nf=M(' <span class="text-white/40">tok/s</span>',1),af=M('<div class="text-xs text-white/60 font-mono mt-1"><!><!><!></div>'),of=M('<div role="button" tabindex="0"><div class="flex-1 min-w-0 pr-2"><div> </div> <div class="text-sm text-white/50 mt-0.5"> </div> <div class="text-sm text-white/70 truncate"> </div> <div class="text-xs text-white/60 font-mono">Strategy: <span class="text-white/80"> </span></div> <!></div> <div class="flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity"><button type="button" class="p-1 text-exo-light-gray hover:text-exo-yellow transition-colors cursor-pointer" title="Rename"><svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button type="button" class="p-1 text-exo-light-gray hover:text-red-400 transition-colors cursor-pointer" title="Delete"><svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div>'),sf=M('<div class="px-2"><!></div>'),lf=M('<div class="py-2"><div class="px-4 py-2"><span class="text-sm text-white/70 font-mono tracking-wider uppercase"> </span></div> <!></div>'),cf=M('<div class="flex flex-col items-center justify-center h-full p-4 text-center"><div class="w-12 h-12 border border-exo-yellow/20 rounded-full flex items-center justify-center mb-3"><svg class="w-6 h-6 text-exo-yellow/40" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg></div> <p class="text-xs text-white/70 font-mono tracking-wider uppercase mb-1"> </p> <p class="text-sm text-white/50"> </p></div>'),df=M('<div class="bg-red-500/10 border border-red-500/30 rounded p-2 mb-2"><p class="text-xs text-red-400 text-center mb-2"> </p> <div class="flex gap-2"><button class="flex-1 py-1.5 text-xs font-mono tracking-wider uppercase bg-red-500/20 text-red-400 border border-red-500/30 rounded hover:bg-red-500/30 transition-colors cursor-pointer">DELETE ALL</button> <button class="flex-1 py-1.5 text-xs font-mono tracking-wider uppercase bg-exo-medium-gray/20 text-exo-light-gray border border-exo-medium-gray/30 rounded hover:bg-exo-medium-gray/30 transition-colors cursor-pointer">CANCEL</button></div></div>'),uf=M('<button class="w-full flex items-center justify-center gap-2 py-1.5 text-sm font-mono tracking-wider uppercase text-white/70 hover:text-red-400 hover:bg-red-500/10 border border-transparent hover:border-red-500/20 rounded transition-all cursor-pointer"><svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg> DELETE ALL CHATS</button>'),ff=M('<aside><div class="p-4"><button class="w-full flex items-center justify-center gap-2 py-2.5 px-4 bg-transparent border border-exo-yellow/30 text-exo-yellow text-xs font-mono tracking-wider uppercase hover:border-exo-yellow/50 transition-all cursor-pointer"><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> NEW CHAT</button></div> <div class="px-4 py-3"><div class="relative"><svg class="absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-white/50" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> <input type="text" placeholder="Search conversations..." class="w-full bg-exo-black/40 border border-exo-medium-gray/30 rounded px-3 py-2 pl-9 text-xs text-white/90 placeholder:text-white/40 focus:outline-none focus:border-exo-yellow/30"/></div></div> <div class="flex-1 overflow-y-auto"><!></div> <div class="p-3 border-t border-exo-yellow/10"><!> <div><button type="button" class="p-1.5 rounded border border-exo-medium-gray/40 hover:border-exo-yellow/50 transition-colors cursor-pointer" title="Toggle debug mode"><svg fill="currentColor" viewBox="0 0 24 24"><path d="M19 8h-1.81A6.002 6.002 0 0 0 12 2a6.002 6.002 0 0 0-5.19 3H5a1 1 0 0 0 0 2h1v2H5a1 1 0 0 0 0 2h1v2H5a1 1 0 0 0 0 2h1.81A6.002 6.002 0 0 0 12 22a6.002 6.002 0 0 0 5.19-3H19a1 1 0 0 0 0-2h-1v-2h1a1 1 0 0 0 0-2h-1v-2h1a1 1 0 1 0 0-2Zm-5 10.32V19a1 1 0 1 1-2 0v-.68a3.999 3.999 0 0 1-3-3.83V9.32a3.999 3.999 0 0 1 3-3.83V5a1 1 0 0 1 2 0v.49a3.999 3.999 0 0 1 3 3.83v5.17a3.999 3.999 0 0 1-3 3.83Z"></path></svg></button> <div class="text-xs text-white/60 font-mono tracking-wider text-center"> </div></div></div></aside>');function vf(t,r){Vr(r,!0);let n=he(r,"class",3,"");const a=D(ms),o=D(ks),l=D(ro),c=D(eo);let d=Rt(""),v=Rt(null),g=Rt(""),p=Rt(null),F=Rt(!1);const N=D(()=>e(d).trim()?e(a).filter(T=>T.name.toLowerCase().includes(e(d).toLowerCase())):e(a));function A(){gs()}function dt(T){ws(T)}function Z(T,E,m){m.stopPropagation(),Y(v,T,!0),Y(g,E,!0)}function K(){e(v)&&e(g).trim()&&bs(e(v),e(g).trim()),Y(v,null),Y(g,"")}function Mt(){Y(v,null),Y(g,"")}function Nt(T){T.key==="Enter"?K():T.key==="Escape"&&Mt()}function nt(T,E){E.stopPropagation(),Y(p,T,!0)}function St(){e(p)&&(ys(e(p)),Y(p,null))}function yt(){Y(p,null)}function Ft(){Y(F,!0)}function ot(){_s(),Y(F,!1)}function pt(){Y(F,!1)}function $t(T){const E=new Date(T),S=Math.floor((new Date().getTime()-E.getTime())/(1e3*60*60*24));return S===0?E.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):S===1?"Yesterday":S<7?E.toLocaleDateString("en-US",{weekday:"short"}):E.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function Wt(T){for(let E=T.messages.length-1;E>=0;E--){const m=T.messages[E];if(m.role==="assistant"&&(m.ttftMs||m.tps))return{ttftMs:m.ttftMs,tps:m.tps}}return null}function Ut(T){if(!T)return"Unknown Model";const E=T.split("/");return E[E.length-1]||T||T}function te(T,E){const m=T??"Unknown",S=E??null;return S?`${m} (${S})`:m}function Xt(T){if(!T||typeof T!="object")return[null,null];const E=Object.keys(T);return E.length===1?[E[0],T[E[0]]]:[null,null]}function Ce(T){var S;const[,E]=Xt(T);return!E||typeof E!="object"?null:((S=E.shardAssignments)==null?void 0:S.modelId)??null}function Ke(T){var _;const[E,m]=Xt(T);if(!m||typeof m!="object")return{sharding:null,instanceType:null};let S=null;E==="MlxRingInstance"?S="MLX Ring":(E==="MlxIbvInstance"||E==="MlxJacclInstance")&&(S="MLX RDMA");let x=null;const P=((_=m.shardAssignments)==null?void 0:_.runnerToShard)||{},I=Object.values(P)[0];if(I){const[bt]=Xt(I);bt==="PipelineShardMetadata"?x="Pipeline":bt==="TensorShardMetadata"?x="Tensor":bt==="PrefillDecodeShardMetadata"&&(x="Prefill/Decode")}return{sharding:x,instanceType:S}}function le(T){let E=null,m=T.modelId??null;if(m){for(const[,I]of Object.entries(e(l)))if(Ce(I)===m){E=I;break}}if(!E){const I=Object.values(e(l))[0];I&&(E=I,m=m??Ce(I))}const S=E?Ke(E):{sharding:null,instanceType:null},x=m??T.modelId??null,C=T.sharding??S.sharding??"Unknown",P=T.instanceType??S.instanceType;return{modelLabel:Ut(x),strategyLabel:te(C,P)}}var ee=ff(),pe=s(ee),Xe=s(pe);Xe.__click=A,i(pe);var Ht=u(pe,2),Re=s(Ht),xe=u(s(Re),2);Xa(xe),i(Re),i(Ht);var ae=u(Ht,2),Se=s(ae);{var tt=T=>{var E=lf(),m=s(E),S=s(m),x=s(S,!0);i(S),i(m);var C=u(m,2);de(C,17,()=>e(N),P=>P.id,(P,I)=>{const _=D(()=>le(e(I)));var bt=sf(),Ot=s(bt);{var zt=B=>{var U=Qu(),W=s(U);Xa(W),W.__keydown=Nt,is(W);var it=u(W,2),st=s(it);st.__click=K;var ut=u(st,2);ut.__click=Mt,i(it),i(U),Ln(W,()=>e(g),ft=>Y(g,ft)),y(B,U)},Ct=B=>{var U=Ae(),W=Jt(U);{var it=ut=>{var ft=tf(),X=s(ft),xt=s(X);i(X);var z=u(X,2),G=s(z);G.__click=St;var J=u(G,2);J.__click=yt,i(z),i(ft),V(()=>L(xt,`Delete "${e(I).name??""}"?`)),y(ut,ft)},st=ut=>{const ft=D(()=>Wt(e(I)));var X=of();X.__click=()=>dt(e(I).id),X.__keydown=w=>w.key==="Enter"&&dt(e(I).id);var xt=s(X),z=s(xt),G=s(z,!0);i(z);var J=u(z,2),rt=s(J,!0);i(J);var ct=u(J,2),lt=s(ct,!0);i(ct);var kt=u(ct,2),At=u(s(kt)),Et=s(At,!0);i(At),i(kt);var h=u(kt,2);{var f=w=>{var $=af(),at=s($);{var et=_t=>{var Pt=ef(),qt=u(Jt(Pt));V(re=>L(qt,` ${re??""}ms`),[()=>e(ft).ttftMs.toFixed(0)]),y(_t,Pt)};O(at,_t=>{e(ft).ttftMs&&_t(et)})}var vt=u(at);{var It=_t=>{var Pt=rf();y(_t,Pt)};O(vt,_t=>{e(ft).ttftMs&&e(ft).tps&&_t(It)})}var wt=u(vt);{var Bt=_t=>{var Pt=nf(),qt=Jt(Pt);qe(),V(re=>L(qt,`${re??""} `),[()=>e(ft).tps.toFixed(1)]),y(_t,Pt)};O(wt,_t=>{e(ft).tps&&_t(Bt)})}i($),y(w,$)};O(h,w=>{e(ft)&&w(f)})}i(xt);var b=u(xt,2),k=s(b);k.__click=w=>Z(e(I).id,e(I).name,w);var R=u(k,2);R.__click=w=>nt(e(I).id,w),i(b),i(X),V(w=>{ht(X,1,`group w-full flex items-center justify-between p-2 rounded mb-1 transition-all text-left cursor-pointer
									${e(o)===e(I).id?"bg-transparent border border-exo-yellow/30":"hover:border-exo-yellow/20 border border-transparent"}`),ht(z,1,`text-sm truncate ${e(o)===e(I).id?"text-exo-yellow":"text-white/90"}`),L(G,e(I).name),L(rt,w),L(lt,e(_).modelLabel),L(Et,e(_).strategyLabel)},[()=>$t(e(I).updatedAt)]),y(ut,X)};O(W,ut=>{e(p)===e(I).id?ut(it):ut(st,!1)},!0)}y(B,U)};O(Ot,B=>{e(v)===e(I).id?B(zt):B(Ct,!1)})}i(bt),y(P,bt)}),i(E),V(()=>L(x,e(d)?"SEARCH RESULTS":"CONVERSATIONS")),y(T,E)},H=T=>{var E=cf(),m=u(s(E),2),S=s(m,!0);i(m);var x=u(m,2),C=s(x,!0);i(x),i(E),V(()=>{L(S,e(d)?"NO RESULTS":"NO CONVERSATIONS"),L(C,e(d)?"Try a different search":"Start a new chat to begin")}),y(T,E)};O(Se,T=>{e(N).length>0?T(tt):T(H,!1)})}i(ae);var Qt=u(ae,2),ge=s(Qt);{var fe=T=>{var E=df(),m=s(E),S=s(m);i(m);var x=u(m,2),C=s(x);C.__click=ot;var P=u(C,2);P.__click=pt,i(x),i(E),V(()=>L(S,`Delete all ${e(a).length??""} conversations?`)),y(T,E)},Ye=T=>{var E=Ae(),m=Jt(E);{var S=x=>{var C=uf();C.__click=Ft,y(x,C)};O(m,x=>{e(a).length>0&&x(S)},!0)}y(T,E)};O(ge,T=>{e(F)?T(fe):T(Ye,!1)})}var me=u(ge,2),ce=s(me);ce.__click=function(...T){var E;(E=xs)==null||E.apply(this,T)};var Q=s(ce);i(ce);var q=u(ce,2),mt=s(q);i(q),i(me),i(Qt),i(ee),V(()=>{ht(ee,1,`flex flex-col h-full bg-exo-dark-gray border-r border-exo-yellow/10 ${n()??""}`),ht(me,1,`flex items-center justify-center gap-3 ${e(a).length>0&&!e(F)?"mt-2":""}`),ht(Q,0,`w-4 h-4 ${e(c)?"text-exo-yellow":"text-exo-medium-gray"}`),L(mt,`${e(a).length??""} CONVERSATION${e(a).length!==1?"S":""}`)}),Ln(xe,()=>e(d),T=>Y(d,T)),y(t,ee),qr()}fn(["click","keydown"]);var hf=M('<a class="shrink-0 text-white/60 hover:text-exo-yellow transition-colors svelte-unkfkr" target="_blank" rel="noreferrer noopener" aria-label="View model on Hugging Face"><svg class="w-3.5 h-3.5 svelte-unkfkr" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 3h7v7" class="svelte-unkfkr"></path><path d="M10 14l11-11" class="svelte-unkfkr"></path><path d="M21 14v6a1 1 0 0 1-1 1h-16a1 1 0 0 1-1-1v-16a1 1 0 0 1 1-1h6" class="svelte-unkfkr"></path></svg></a>'),pf=M("<span> </span>"),xf=M('<div class="flex gap-1 flex-shrink-0 svelte-unkfkr"></div>'),gf=M('<div class="text-xs text-exo-light-gray font-mono truncate mt-0.5 svelte-unkfkr"> </div>'),mf=je('<line stroke-width="1" class="svelte-unkfkr"></line>'),_f=je('<rect x="4" fill="#FFD700" class="animate-pulse-slow svelte-unkfkr"></rect>'),bf=je('<g class="svelte-unkfkr"><rect x="2" y="0" rx="2" fill="none" stroke-width="1.5" class="svelte-unkfkr"></rect><rect x="4" y="2" fill="#0a0a0a" class="svelte-unkfkr"></rect><rect x="4" fill="#374151" class="svelte-unkfkr"></rect><!><path fill="none" stroke-width="1.5" class="svelte-unkfkr"></path></g>'),yf=je('<rect x="4" fill="#FFD700" class="animate-pulse-slow svelte-unkfkr"></rect>'),wf=je('<g class="svelte-unkfkr"><rect x="2" y="2" rx="4" fill="none" stroke-width="1.5" class="svelte-unkfkr"></rect><rect x="4" y="4" fill="#0a0a0a" class="svelte-unkfkr"></rect><rect x="4" fill="#374151" class="svelte-unkfkr"></rect><!></g>'),kf=je('<rect x="4" fill="#FFD700" class="animate-pulse-slow svelte-unkfkr"></rect>'),Mf=je('<g class="svelte-unkfkr"><rect x="2" rx="3" fill="none" stroke-width="1.5" class="svelte-unkfkr"></rect><rect x="4" fill="#0a0a0a" class="svelte-unkfkr"></rect><rect x="4" fill="#374151" class="svelte-unkfkr"></rect><!></g>'),Sf=je('<g class="svelte-unkfkr"><polygon stroke-width="1.5" class="svelte-unkfkr"></polygon></g>'),Tf=je('<g class="svelte-unkfkr"><!><text text-anchor="middle" font-size="8" font-family="SF Mono, Monaco, monospace" class="svelte-unkfkr"> </text></g>'),Nf=M('<div class="mb-3 bg-exo-black/60 rounded border border-exo-medium-gray/20 p-2 relative overflow-hidden svelte-unkfkr"><div class="absolute inset-0 bg-[repeating-linear-gradient(0deg,transparent,transparent_2px,rgba(255,215,0,0.02)_2px,rgba(255,215,0,0.02)_4px)] pointer-events-none svelte-unkfkr"></div> <svg width="100%" class="overflow-visible svelte-unkfkr"><defs class="svelte-unkfkr"><filter x="-50%" y="-50%" width="200%" height="200%" class="svelte-unkfkr"><feGaussianBlur stdDeviation="2" result="blur" class="svelte-unkfkr"></feGaussianBlur><feMerge class="svelte-unkfkr"><feMergeNode in="blur" class="svelte-unkfkr"></feMergeNode><feMergeNode in="SourceGraphic" class="svelte-unkfkr"></feMergeNode></feMerge></filter><filter x="-100%" y="-100%" width="300%" height="300%" class="svelte-unkfkr"><feGaussianBlur stdDeviation="3" result="blur" class="svelte-unkfkr"></feGaussianBlur><feComposite in="SourceGraphic" in2="blur" operator="over" class="svelte-unkfkr"></feComposite></filter></defs><!><!></svg></div>'),$f=M('<span class="flex items-center justify-center gap-1.5 svelte-unkfkr"><span class="w-2 h-2 border border-exo-yellow border-t-transparent rounded-full animate-spin svelte-unkfkr"></span> LAUNCHING...</span>'),Ff=M('<div class="relative group svelte-unkfkr"><div></div> <div></div> <div></div> <div></div> <div><div class="flex items-start justify-between gap-2 mb-2 svelte-unkfkr"><div class="flex-1 min-w-0 svelte-unkfkr"><div class="flex items-center gap-2 svelte-unkfkr"><div class="text-exo-yellow text-xs font-mono tracking-wide truncate svelte-unkfkr"> </div> <!> <!></div> <!></div> <div class="flex-shrink-0 text-right svelte-unkfkr"><div> </div></div></div> <div class="flex items-center gap-1.5 mb-2 svelte-unkfkr"><span class="px-1.5 py-0.5 text-xs font-mono tracking-wider uppercase bg-exo-medium-gray/30 text-exo-light-gray border border-exo-medium-gray/40 svelte-unkfkr"> </span> <span class="px-1.5 py-0.5 text-xs font-mono tracking-wider uppercase bg-exo-medium-gray/30 text-exo-light-gray border border-exo-medium-gray/40 svelte-unkfkr"> </span></div> <!> <button><!></button></div></div>');function Ef(t,r){Vr(r,!0);let n=he(r,"isLaunching",3,!1);he(r,"downloadStatus",3,null);let a=he(r,"nodes",19,()=>({})),o=he(r,"sharding",3,"Pipeline"),l=he(r,"runtime",3,"MlxRing"),c=he(r,"tags",19,()=>[]),d=he(r,"apiPreview",3,null),v=he(r,"modelIdOverride",3,null);function g(Q,q){const mt=`${Q} ${q||""}`.toLowerCase(),T=mt.includes("4bit")||mt.includes("4-bit")||mt.includes(":4bit"),E=mt.includes("8bit")||mt.includes("8-bit")||mt.includes(":8bit"),m=T?.5:E?1:2,S=Q.toLowerCase();if(S.includes("deepseek-v3"))return Math.round(685*m);if(S.includes("deepseek-v2"))return Math.round(236*m);if(S.includes("llama-4"))return Math.round(400*m);const x=S.match(/(\d+(?:\.\d+)?)\s*b(?![a-z])/i);if(x){const C=parseFloat(x[1]);return Math.max(4,Math.round(C*m))}return S.includes("405b")||S.includes("400b")?Math.round(405*m):S.includes("180b")?Math.round(180*m):S.includes("141b")||S.includes("140b")?Math.round(140*m):S.includes("123b")||S.includes("120b")?Math.round(123*m):S.includes("72b")||S.includes("70b")?Math.round(70*m):S.includes("67b")||S.includes("65b")?Math.round(65*m):S.includes("35b")||S.includes("34b")||S.includes("32b")||S.includes("30b")?Math.round(32*m):S.includes("27b")||S.includes("26b")||S.includes("22b")?Math.round(24*m):S.includes("14b")||S.includes("13b")||S.includes("15b")?Math.round(14*m):S.includes("8b")||S.includes("9b")||S.includes("7b")?Math.round(8*m):S.includes("3b")||S.includes("3.8b")?Math.round(4*m):S.includes("2b")||S.includes("1b")||S.includes("1.5b")||S.includes("0.5b")?Math.round(2*m):16}Rt(ln(new Set));const p=D(()=>r.model.storage_size_megabytes?Math.round(r.model.storage_size_megabytes/1024):g(r.model.id,r.model.name));function F(Q){const q=Q.toLowerCase();return q.includes("macbook")?"macbook":q.includes("studio")?"studio":q.includes("mini")?"mini":"unknown"}const N=Q=>Math.min(100,Math.max(0,Q)),A=D(()=>v()??r.model.id),dt=D(()=>()=>{var m;const Q=Object.keys(a()).map(S=>{var B,U,W,it,st,ut;const x=a()[S],C=((U=(B=x.macmon_info)==null?void 0:B.memory)==null?void 0:U.ram_total)??((W=x.system_info)==null?void 0:W.memory)??0,P=((st=(it=x.macmon_info)==null?void 0:it.memory)==null?void 0:st.ram_usage)??0,I=Math.max(C-P,0),_=C/(1024*1024*1024),bt=I/(1024*1024*1024),Ot=Math.max(_-bt,0),zt=((ut=x.system_info)==null?void 0:ut.model_id)??"Unknown",Ct=F(zt);return{id:S,totalGB:_,availableGB:bt,usedGB:Ot,deviceName:zt,deviceType:Ct,usedBytes:P,totalBytes:C}}),q=((m=d())==null?void 0:m.memory_delta_by_node)??null,mt=q?Object.keys(q):[];if(mt.length===0)return Q;const T=new Set(Q.map(S=>S.id)),E=mt.filter(S=>!T.has(S)).map(S=>{const C=((q==null?void 0:q[S])??0)/(1024*1024*1024),P=Math.max(C*1.2,1),I=Math.max(P-C,0);return{id:S,totalGB:P,availableGB:Math.max(P-I,0),usedGB:I,deviceName:"Unknown",deviceType:"unknown",usedBytes:I*1024*1024*1024,totalBytes:P*1024*1024*1024}});return[...Q,...E]}),Z=D(()=>()=>{var Ot,zt;const Q=e(dt)();if(Q.length===0)return{nodes:[],canFit:!1,totalAvailable:0,error:null};const q=Q.length,mt=q===1?50:36,T=260,E=q===1?90:q===2?140:q*50+20,m=T/2,S=E/2,x=q===1?0:q===2?45:Math.min(T,E)*.32,C=d()!==null&&d().error===null&&d().memory_delta_by_node!==null,P=C?!0:Q.reduce((B,U)=>B+U.availableGB,0)>=e(p),I=((Ot=d())==null?void 0:Ot.error)??null;let _=[];if(C&&d().memory_delta_by_node){const Ct=d().memory_delta_by_node;_=Q.map((B,U)=>{const W=Ct[B.id]??0,it=W/(1024*1024*1024),st=W>0,ut=q===1?0:U/q*Math.PI*2-Math.PI/2,ft=Math.max(B.totalGB,.001),X=N(B.usedGB/ft*100),xt=N((B.usedGB+it)/ft*100),z=mt*.58;return{id:B.id,deviceName:B.deviceName,deviceType:B.deviceType,totalGB:B.totalGB,currentUsedGB:B.usedGB,modelUsageGB:it,currentPercent:X,newPercent:xt,isUsed:st,x:m+Math.cos(ut)*x,y:S+Math.sin(ut)*x,iconSize:mt,screenHeight:z,currentFillHeight:z*(X/100),modelFillHeight:z*((xt-X)/100)}})}else if((zt=d())!=null&&zt.error)_=Q.map((Ct,B)=>{const U=q===1?0:B/q*Math.PI*2-Math.PI/2,W=Math.max(Ct.totalGB,.001),it=N(Ct.usedGB/W*100),st=mt*.58;return{id:Ct.id,deviceName:Ct.deviceName,deviceType:Ct.deviceType,totalGB:Ct.totalGB,currentUsedGB:Ct.usedGB,modelUsageGB:0,currentPercent:it,newPercent:it,isUsed:!1,x:m+Math.cos(U)*x,y:S+Math.sin(U)*x,iconSize:mt,screenHeight:st,currentFillHeight:st*(it/100),modelFillHeight:0}});else{const Ct=e(p);if(o()==="Pipeline"){const B=Ct/q;_=Q.map((U,W)=>{const it=q===1?0:W/q*Math.PI*2-Math.PI/2,st=Math.max(U.totalGB,.001),ut=N(U.usedGB/st*100),ft=N((U.usedGB+B)/st*100),X=mt*.58;return{id:U.id,deviceName:U.deviceName,deviceType:U.deviceType,totalGB:U.totalGB,currentUsedGB:U.usedGB,modelUsageGB:B,currentPercent:ut,newPercent:ft,isUsed:!0,x:m+Math.cos(it)*x,y:S+Math.sin(it)*x,iconSize:mt,screenHeight:X,currentFillHeight:X*(ut/100),modelFillHeight:X*((ft-ut)/100)}})}else{let B=Ct;_=Q.map((U,W)=>{const it=Math.min(B,U.availableGB);B-=it;const st=it>0,ut=q===1?0:W/q*Math.PI*2-Math.PI/2,ft=Math.max(U.totalGB,.001),X=N(U.usedGB/ft*100),xt=N((U.usedGB+it)/ft*100),z=mt*.58;return{id:U.id,deviceName:U.deviceName,deviceType:U.deviceType,totalGB:U.totalGB,currentUsedGB:U.usedGB,modelUsageGB:it,currentPercent:X,newPercent:xt,isUsed:st,x:m+Math.cos(ut)*x,y:S+Math.sin(ut)*x,iconSize:mt,screenHeight:z,currentFillHeight:z*(X/100),modelFillHeight:z*((xt-X)/100)}})}}const bt=Q.reduce((Ct,B)=>Ct+B.availableGB,0);return{nodes:_,canFit:C||P,totalAvailable:bt,topoWidth:T,topoHeight:E,error:I}}),K=D(()=>d()?d().error===null:e(Z)().canFit),Mt=D(()=>r.model.id.replace(/[^a-zA-Z0-9]/g,""));var Nt=Ff(),nt=s(Nt),St=u(nt,2),yt=u(St,2),Ft=u(yt,2),ot=u(Ft,2),pt=s(ot),$t=s(pt),Wt=s($t),Ut=s(Wt),te=s(Ut,!0);i(Ut);var Xt=u(Ut,2);{var Ce=Q=>{var q=hf();V(()=>j(q,"href",`https://huggingface.co/${e(A)}`)),y(Q,q)};O(Xt,Q=>{e(A)&&Q(Ce)})}var Ke=u(Xt,2);{var le=Q=>{var q=xf();de(q,21,c,ye,(mt,T)=>{var E=pf(),m=s(E,!0);i(E),V(()=>{ht(E,1,`px-1.5 py-0.5 text-xs font-mono tracking-wider uppercase rounded ${e(T)==="FASTEST"?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-purple-500/20 text-purple-400 border border-purple-500/30"}`,"svelte-unkfkr"),L(m,e(T))}),y(mt,E)}),i(q),y(Q,q)};O(Ke,Q=>{c().length>0&&Q(le)})}i(Wt);var ee=u(Wt,2);{var pe=Q=>{var q=gf(),mt=s(q,!0);i(q),V(()=>{j(q,"title",r.model.id),L(mt,r.model.id)}),y(Q,q)};O(ee,Q=>{r.model.name&&r.model.name!==r.model.id&&Q(pe)})}i($t);var Xe=u($t,2),Ht=s(Xe),Re=s(Ht);i(Ht),i(Xe),i(pt);var xe=u(pt,2),ae=s(xe),Se=s(ae,!0);i(ae);var tt=u(ae,2),H=s(tt,!0);i(tt),i(xe);var Qt=u(xe,2);{var ge=Q=>{const q=D(()=>e(Z)());var mt=Nf(),T=u(s(mt),2),E=s(T),m=s(E),S=u(m);i(E);var x=u(E);{var C=I=>{var _=Ae(),bt=Jt(_);de(bt,17,()=>e(q).nodes,ye,(Ot,zt,Ct)=>{var B=Ae(),U=Jt(B);de(U,17,()=>e(q).nodes.slice(Ct+1),ye,(W,it)=>{var st=mf();V(()=>{j(st,"x1",e(zt).x),j(st,"y1",e(zt).y),j(st,"x2",e(it).x),j(st,"y2",e(it).y),j(st,"stroke",e(zt).isUsed&&e(it).isUsed?"#FFD700":"#374151"),j(st,"stroke-dasharray",e(zt).isUsed&&e(it).isUsed?"4,2":"2,4"),j(st,"opacity",e(zt).isUsed&&e(it).isUsed?.4:.15)}),y(W,st)}),y(Ot,B)}),y(I,_)};O(x,I=>{e(q).nodes.length>1&&I(C)})}var P=u(x);de(P,17,()=>e(q).nodes,ye,(I,_)=>{var bt=Tf(),Ot=s(bt);{var zt=W=>{var it=bf(),st=s(it),ut=u(st),ft=u(ut),X=u(ft);{var xt=G=>{var J=_f();V(()=>{j(J,"y",2+e(_).screenHeight-e(_).currentFillHeight-e(_).modelFillHeight),j(J,"width",e(_).iconSize-8),j(J,"height",e(_).modelFillHeight),j(J,"filter",`url(#memGlow-${e(Mt)??""})`)}),y(G,J)};O(X,G=>{e(_).modelUsageGB>0&&e(_).isUsed&&G(xt)})}var z=u(X);i(it),V(()=>{j(it,"transform",`translate(${-e(_).iconSize/2}, ${-e(_).iconSize/2})`),j(st,"width",e(_).iconSize-4),j(st,"height",e(_).iconSize*.65),j(st,"stroke",e(_).isUsed?"#FFD700":"#4B5563"),j(ut,"width",e(_).iconSize-8),j(ut,"height",e(_).screenHeight),j(ft,"y",2+e(_).screenHeight-e(_).currentFillHeight),j(ft,"width",e(_).iconSize-8),j(ft,"height",e(_).currentFillHeight),j(z,"d",`M 0 ${e(_).iconSize*.68} L ${e(_).iconSize??""} ${e(_).iconSize*.68} L ${e(_).iconSize-2} ${e(_).iconSize*.78} L 2 ${e(_).iconSize*.78} Z`),j(z,"stroke",e(_).isUsed?"#FFD700":"#4B5563")}),y(W,it)},Ct=W=>{var it=Ae(),st=Jt(it);{var ut=X=>{var xt=wf(),z=s(xt),G=u(z),J=u(G),rt=u(J);{var ct=lt=>{var kt=yf();V(()=>{j(kt,"y",4+(e(_).iconSize-8)*(1-e(_).newPercent/100)),j(kt,"width",e(_).iconSize-8),j(kt,"height",(e(_).iconSize-8)*((e(_).newPercent-e(_).currentPercent)/100)),j(kt,"filter",`url(#memGlow-${e(Mt)??""})`)}),y(lt,kt)};O(rt,lt=>{e(_).modelUsageGB>0&&e(_).isUsed&&lt(ct)})}i(xt),V(()=>{j(xt,"transform",`translate(${-e(_).iconSize/2}, ${-e(_).iconSize/2})`),j(z,"width",e(_).iconSize-4),j(z,"height",e(_).iconSize-4),j(z,"stroke",e(_).isUsed?"#FFD700":"#4B5563"),j(G,"width",e(_).iconSize-8),j(G,"height",e(_).iconSize-8),j(J,"y",4+(e(_).iconSize-8)*(1-e(_).currentPercent/100)),j(J,"width",e(_).iconSize-8),j(J,"height",(e(_).iconSize-8)*(e(_).currentPercent/100))}),y(X,xt)},ft=X=>{var xt=Ae(),z=Jt(xt);{var G=rt=>{var ct=Mf(),lt=s(ct),kt=u(lt),At=u(kt),Et=u(At);{var h=f=>{var b=kf();V(()=>{j(b,"y",e(_).iconSize*.32+e(_).iconSize*.36*(1-e(_).newPercent/100)),j(b,"width",e(_).iconSize-8),j(b,"height",e(_).iconSize*.36*((e(_).newPercent-e(_).currentPercent)/100)),j(b,"filter",`url(#memGlow-${e(Mt)??""})`)}),y(f,b)};O(Et,f=>{e(_).modelUsageGB>0&&e(_).isUsed&&f(h)})}i(ct),V(()=>{j(ct,"transform",`translate(${-e(_).iconSize/2}, ${-e(_).iconSize/2})`),j(lt,"y",e(_).iconSize*.3),j(lt,"width",e(_).iconSize-4),j(lt,"height",e(_).iconSize*.4),j(lt,"stroke",e(_).isUsed?"#FFD700":"#4B5563"),j(kt,"y",e(_).iconSize*.32),j(kt,"width",e(_).iconSize-8),j(kt,"height",e(_).iconSize*.36),j(At,"y",e(_).iconSize*.32+e(_).iconSize*.36*(1-e(_).currentPercent/100)),j(At,"width",e(_).iconSize-8),j(At,"height",e(_).iconSize*.36*(e(_).currentPercent/100))}),y(rt,ct)},J=rt=>{var ct=Sf(),lt=s(ct);i(ct),V(()=>{j(ct,"transform",`translate(${-e(_).iconSize/2}, ${-e(_).iconSize/2})`),j(lt,"points",`${e(_).iconSize/2},0 ${e(_).iconSize??""},${e(_).iconSize*.25} ${e(_).iconSize??""},${e(_).iconSize*.75} ${e(_).iconSize/2},${e(_).iconSize??""} 0,${e(_).iconSize*.75} 0,${e(_).iconSize*.25}`),j(lt,"fill",e(_).isUsed?"rgba(255,215,0,0.1)":"#0a0a0a"),j(lt,"stroke",e(_).isUsed?"#FFD700":"#4B5563")}),y(rt,ct)};O(z,rt=>{e(_).deviceType==="mini"?rt(G):rt(J,!1)},!0)}y(X,xt)};O(st,X=>{e(_).deviceType==="studio"?X(ut):X(ft,!1)},!0)}y(W,it)};O(Ot,W=>{e(_).deviceType==="macbook"?W(zt):W(Ct,!1)})}var B=u(Ot),U=s(B);i(B),i(bt),V(W=>{j(bt,"transform",`translate(${e(_).x??""}, ${e(_).y??""})`),j(bt,"opacity",e(_).isUsed?1:.25),j(bt,"filter",e(_).isUsed?`url(#nodeGlow-${e(Mt)})`:"none"),j(B,"y",e(_).iconSize/2+12),j(B,"fill",e(_).isUsed?e(_).newPercent>90?"#f87171":"#FFD700":"#4B5563"),L(U,`${W??""}%`)},[()=>e(_).newPercent.toFixed(0)]),y(I,bt)}),i(T),i(mt),V(()=>{j(T,"height",e(q).topoHeight),j(T,"viewBox",`0 0 ${e(q).topoWidth??""} ${e(q).topoHeight??""}`),j(m,"id",`nodeGlow-${e(Mt)??""}`),j(S,"id",`memGlow-${e(Mt)??""}`)}),y(Q,mt)};O(Qt,Q=>{e(Z)().nodes.length>0&&Q(ge)})}var fe=u(Qt,2);fe.__click=function(...Q){var q;(q=r.onLaunch)==null||q.apply(this,Q)};var Ye=s(fe);{var me=Q=>{var q=$f();y(Q,q)},ce=Q=>{var q=Ae(),mt=Jt(q);{var T=m=>{var S=ja("INSUFFICIENT MEMORY");y(m,S)},E=m=>{var S=ja("â–¸ LAUNCH");y(m,S)};O(mt,m=>{e(K)?m(E,!1):m(T)},!0)}y(Q,q)};O(Ye,Q=>{n()?Q(me):Q(ce,!1)})}i(fe),i(ot),i(Nt),V(()=>{ht(nt,1,`absolute -top-px -left-px w-2 h-2 border-l border-t ${e(K)?"border-exo-yellow/30 group-hover:border-exo-yellow/60":"border-red-500/30"} transition-colors`,"svelte-unkfkr"),ht(St,1,`absolute -top-px -right-px w-2 h-2 border-r border-t ${e(K)?"border-exo-yellow/30 group-hover:border-exo-yellow/60":"border-red-500/30"} transition-colors`,"svelte-unkfkr"),ht(yt,1,`absolute -bottom-px -left-px w-2 h-2 border-l border-b ${e(K)?"border-exo-yellow/30 group-hover:border-exo-yellow/60":"border-red-500/30"} transition-colors`,"svelte-unkfkr"),ht(Ft,1,`absolute -bottom-px -right-px w-2 h-2 border-r border-b ${e(K)?"border-exo-yellow/30 group-hover:border-exo-yellow/60":"border-red-500/30"} transition-colors`,"svelte-unkfkr"),ht(ot,1,`bg-exo-dark-gray/60 border ${e(K)?"border-exo-yellow/20 group-hover:border-exo-yellow/40":"border-red-500/20"} p-3 transition-all duration-200 group-hover:shadow-[0_0_15px_rgba(255,215,0,0.1)]`,"svelte-unkfkr"),j(Ut,"title",r.model.name||r.model.id),L(te,r.model.name||r.model.id),ht(Ht,1,`text-xs font-mono ${e(K)?"text-exo-yellow":"text-red-400"}`,"svelte-unkfkr"),L(Re,`${e(p)??""}GB`),L(Se,o()),L(H,l()==="MlxRing"?"MLX Ring":l()==="MlxIbv"||l()==="MlxJaccl"?"MLX RDMA":l()),fe.disabled=n()||!e(K),ht(fe,1,`w-full py-2 text-sm font-mono tracking-wider uppercase border transition-all duration-200 
				${n()?"bg-transparent text-exo-yellow border-exo-yellow/50 cursor-wait":e(K)?"bg-transparent text-exo-light-gray border-exo-light-gray/40 hover:text-exo-yellow hover:border-exo-yellow/50 cursor-pointer":"bg-red-500/10 text-red-400/70 border-red-500/30 cursor-not-allowed"}`,"svelte-unkfkr")}),y(t,Nt),qr()}fn(["click"]);const Af=t=>t;function Cf(t){const r=t-1;return r*r*r+1}function Ro(t){const r=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return r?[parseFloat(r[1]),r[2]||"px"]:[t,"px"]}function Ua(t,{delay:r=0,duration:n=400,easing:a=Af}={}){const o=+getComputedStyle(t).opacity;return{delay:r,duration:n,easing:a,css:l=>`opacity: ${l*o}`}}function Bf(t,{delay:r=0,duration:n=400,easing:a=Cf,x:o=0,y:l=0,opacity:c=0}={}){const d=getComputedStyle(t),v=+d.opacity,g=d.transform==="none"?"":d.transform,p=v*(1-c),[F,N]=Ro(o),[A,dt]=Ro(l);return{delay:r,duration:n,easing:a,css:(Z,K)=>`
			transform: ${g} translate(${(1-Z)*F}${N}, ${(1-Z)*A}${dt});
			opacity: ${v-p*K}`}}function If(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}var Df=M('<a class="inline-flex items-center gap-1 text-[11px] text-white/60 hover:text-exo-yellow transition-colors mt-1" target="_blank" rel="noreferrer noopener" aria-label="View model on Hugging Face"><span>Hugging Face</span> <svg class="w-3.5 h-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 3h7v7"></path><path d="M10 14l11-11"></path><path d="M21 14v6a1 1 0 0 1-1 1h-16a1 1 0 0 1-1-1v-16a1 1 0 0 1 1-1h6"></path></svg></a>'),Lf=M('<div class="text-white/60 text-xs font-mono"> </div>'),Rf=M('<div class="text-[11px] leading-snug font-mono text-white/70"><span> </span> <span> </span></div>'),Of=M('<div class="mt-2 space-y-1"></div>'),zf=M('<div class="text-[11px] font-mono text-exo-light-gray/70">No file details reported.</div>'),Gf=M('<div class="rounded border border-exo-medium-gray/30 bg-exo-black/40 p-2"><div class="flex items-center justify-between text-[10px] font-mono text-exo-light-gray/90"><span class="truncate pr-2"> </span> <span class="text-white/80"> </span></div> <div class="relative h-1 bg-exo-black/60 rounded-sm overflow-hidden mt-1"><div class="absolute inset-y-0 left-0 bg-gradient-to-r from-exo-yellow to-exo-yellow/70 transition-all duration-300"></div></div> <div class="flex items-center justify-between text-[10px] text-exo-light-gray/70 mt-0.5"><span> </span> <span> </span></div></div>'),Hf=M('<div class="mt-2 space-y-1.5"><!></div>'),Pf=M('<div class="rounded border border-exo-medium-gray/40 bg-exo-black/30 p-2"><button type="button" class="w-full text-left space-y-1.5"><div class="flex items-center justify-between text-[11px] font-mono text-exo-light-gray"><span class="text-white/80 truncate pr-2"> </span> <span class="flex items-center gap-1 text-blue-300"> <svg class="w-3 h-3 text-exo-light-gray" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 8l4 4 4-4"></path></svg></span></div> <div class="relative h-1.5 bg-exo-black/60 rounded-sm overflow-hidden"><div class="absolute inset-y-0 left-0 bg-gradient-to-r from-blue-500 to-blue-400 transition-all duration-300"></div></div> <div class="flex items-center justify-between text-[11px] font-mono text-exo-light-gray"><span> </span> <span> </span></div></button> <!></div>'),Uf=M('<div class="mt-2 space-y-2 max-h-48 overflow-y-auto pr-1"></div>'),jf=M('<div class="mt-2 space-y-1"><div class="flex justify-between text-xs font-mono"><span class="text-blue-400"> </span> <span class="text-exo-light-gray"> </span></div> <div class="relative h-1.5 bg-exo-black/60 rounded-sm overflow-hidden"><div class="absolute inset-y-0 left-0 bg-gradient-to-r from-blue-500 to-blue-400 transition-all duration-300"></div></div> <div class="flex justify-between text-xs font-mono text-exo-light-gray"><span> </span> <span> </span> <span> </span></div></div> <!> <div class="text-xs text-blue-400 font-mono tracking-wider mt-1">DOWNLOADING</div>',1),Xf=M("<div> </div>"),Yf=M('<div class="relative group cursor-pointer" role="button" tabindex="0"><div></div> <div></div> <div></div> <div></div> <div><div class="flex justify-between items-start mb-2 pl-2"><div class="flex items-center gap-2"><div></div> <span class="text-exo-light-gray font-mono text-sm tracking-wider"> </span></div> <button class="text-xs px-2 py-1 font-mono tracking-wider uppercase border border-red-500/30 text-red-400 hover:bg-red-500/20 hover:text-red-400 hover:border-red-500/50 transition-all duration-200 cursor-pointer">DELETE</button></div> <div class="pl-2"><div class="text-exo-yellow text-xs font-mono tracking-wide truncate"> </div> <div class="text-white/60 text-xs font-mono">Strategy: <span class="text-white/80"> </span></div> <!> <!> <!> <!></div></div></div>'),Wf=M('<div class="p-4 flex-shrink-0"><div class="flex items-center gap-2 mb-4"><div class="w-2 h-2 bg-exo-yellow rounded-full shadow-[0_0_8px_rgba(255,215,0,0.6)] animate-pulse"></div> <h3 class="text-xs text-exo-yellow font-mono tracking-[0.2em] uppercase">Instances</h3> <div class="flex-1 h-px bg-gradient-to-r from-exo-yellow/30 to-transparent"></div></div> <div class="max-h-72 space-y-3 overflow-y-auto"></div></div>'),Vf=M('<span class="flex items-center justify-between gap-2 w-full pr-4"><span class="text-exo-light-gray truncate"> </span> <span class="text-white/50 text-xs flex-shrink-0"> </span></span>'),qf=M('<span class="text-exo-light-gray"> </span>'),Kf=M('<span class="text-white/50">â€” SELECT MODEL â€”</span>'),Zf=M('<button type="button"><span class="truncate"> </span> <span> </span></button>'),Jf=M('<div class="px-3 py-2 text-xs text-white/50 font-mono">No models found</div>'),Qf=M('<button type="button" class="fixed inset-0 z-40 cursor-default" aria-label="Close dropdown"></button> <div class="absolute top-full left-0 right-0 mt-1 bg-exo-dark-gray border border-exo-yellow/30 rounded shadow-lg shadow-black/50 z-50 max-h-64 overflow-y-auto"><div class="sticky top-0 bg-exo-dark-gray border-b border-exo-medium-gray/30 p-2"><input type="text" placeholder="Search models..." class="w-full bg-exo-dark-gray/60 border border-exo-medium-gray/30 rounded px-2 py-1.5 text-xs font-mono text-white/80 placeholder:text-white/40 focus:outline-none focus:border-exo-yellow/50"/></div> <div class="py-1"></div></div>',1),t0=M('<span class="w-2 h-2 rounded-full bg-exo-yellow"></span>'),e0=M('<span class="w-2 h-2 rounded-full bg-exo-yellow"></span>'),r0=M('<span class="w-2 h-2 rounded-full bg-exo-yellow"></span>'),n0=M('<span class="w-2 h-2 rounded-full bg-exo-yellow"></span>'),a0=M('<div class="absolute top-6 left-0 h-2 bg-white/30 rounded-full transition-all pointer-events-none"></div>'),o0=M('<div class="absolute flex flex-col items-center pointer-events-none"><span></span> <span> </span></div>'),i0=M('<div class="text-center py-8"><div class="text-xs text-white/70 font-mono tracking-wider uppercase">Loading models...</div></div>'),s0=M('<div class="text-center py-8"><div class="text-xs text-exo-yellow font-mono tracking-wider uppercase animate-pulse">Loading preview...</div></div>'),l0=M('<div role="group"><!></div>'),c0=M('<div class="space-y-3"></div>'),d0=M('<div class="text-center py-4"><div class="text-xs text-white/50 font-mono">No valid configurations for current settings</div></div>'),u0=M('<div class="flex-1 flex overflow-visible relative"><div class="flex-1 flex flex-col min-h-0 min-w-0 py-4"><div class="flex-1 relative bg-exo-dark-gray/40 mx-4 mb-4 rounded-lg overflow-hidden"><!></div> <div class="px-4 pt-6 pb-8"><div class="max-w-3xl mx-auto"><!></div></div></div> <aside class="w-80 border-l border-exo-yellow/10 bg-exo-dark-gray flex flex-col flex-shrink-0"><!> <div class="p-4 flex-1 overflow-y-auto"><div class="flex items-center gap-2 mb-3 flex-shrink-0"><div class="w-2 h-2 border border-exo-yellow/60 rotate-45"></div> <h3 class="text-xs text-exo-yellow font-mono tracking-[0.2em] uppercase">Launch Instance</h3> <div class="flex-1 h-px bg-gradient-to-r from-exo-yellow/30 to-transparent"></div> <span class="text-sm text-white/70 font-mono"> </span></div> <div class="flex-shrink-0 mb-3 relative"><button type="button"><!></button> <div><svg class="w-4 h-4 text-exo-yellow/60" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></div> <!></div> <div class="flex-shrink-0 mb-4 space-y-3"><div><div class="text-xs text-white/70 font-mono mb-2">Sharding:</div> <div class="flex gap-2"><button><span><!></span> Pipeline</button> <button><span><!></span> Tensor</button></div></div> <div><div class="text-xs text-white/70 font-mono mb-2">Instance Type:</div> <div class="flex gap-2"><button><span><!></span> MLX Ring</button> <button><span><!></span> MLX RDMA</button></div></div> <div><div class="text-xs text-white/70 font-mono mb-2">Minimum Nodes:</div>  <div class="relative h-16 cursor-pointer select-none px-2 pr-6"><div class="absolute top-6 left-0 right-0 h-2 bg-exo-medium-gray/50 rounded-full"></div> <!> <!></div></div></div> <div class="space-y-3"><!></div></div></aside></div>'),f0=M('<a class="inline-flex items-center gap-1 text-[10px] text-white/60 hover:text-exo-yellow transition-colors mt-0.5" target="_blank" rel="noreferrer noopener" aria-label="View model on Hugging Face"><span>Hugging Face</span> <svg class="w-3 h-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 3h7v7"></path><path d="M10 14l11-11"></path><path d="M21 14v6a1 1 0 0 1-1 1h-16a1 1 0 0 1-1-1v-16a1 1 0 0 1 1-1h6"></path></svg></a>'),v0=M('<div class="text-white/60 text-xs font-mono"> </div>'),h0=M('<div class="text-[10px] leading-snug font-mono text-white/70"><span> </span> <span> </span></div>'),p0=M('<div class="mt-1 space-y-0.5"></div>'),x0=M('<div class="text-[10px] font-mono text-exo-light-gray/80"><div class="flex items-center justify-between"><span class="truncate pr-2"> </span> <span class="text-white/70"> </span></div> <div class="relative h-1 bg-exo-black/50 rounded-sm overflow-hidden mt-0.5"><div class="absolute inset-y-0 left-0 bg-gradient-to-r from-exo-yellow to-exo-yellow/70"></div></div> <div class="flex items-center justify-between text-[10px] text-exo-light-gray/70 mt-0.5"><span> </span> <span> </span></div></div>'),g0=M('<div class="space-y-1"></div>'),m0=M('<div class="text-[10px] font-mono text-exo-light-gray/70 flex items-center justify-between"><span class="truncate pr-2"> </span> <span class="text-white/60">100%</span></div>'),_0=M('<div class="pt-1 space-y-0.5"></div>'),b0=M("<!> <!>",1),y0=M('<div class="rounded border border-exo-medium-gray/40 bg-exo-black/30 p-2"><div class="flex items-center justify-between text-[11px] font-mono text-exo-light-gray mb-1"><span class="text-white/80 truncate pr-2"> </span> <span class="text-blue-300"> </span></div> <div class="relative h-1 bg-exo-black/60 rounded-sm overflow-hidden mb-1.5"><div class="absolute inset-y-0 left-0 bg-blue-500/80 transition-all duration-300"></div></div> <div class="flex items-center justify-between text-[11px] font-mono text-exo-light-gray mb-1"><span> </span> <span> </span></div> <!></div>'),w0=M('<div class="mt-2 space-y-1.5 max-h-48 overflow-y-auto pr-1"></div>'),k0=M('<div class="mt-2 space-y-1"><div class="flex justify-between text-sm font-mono"><span class="text-blue-400"> </span> <span class="text-exo-light-gray"> </span></div> <div class="relative h-1 bg-exo-black/60 rounded-sm overflow-hidden"><div class="absolute inset-y-0 left-0 bg-gradient-to-r from-blue-500 to-blue-400 transition-all duration-300"></div></div> <div class="flex justify-between text-xs font-mono text-exo-light-gray"><span> </span> <span> </span> <span> </span></div></div> <!> <div class="text-sm text-blue-400 font-mono tracking-wider mt-1">DOWNLOADING</div>',1),M0=M("<div> </div>"),S0=M('<div class="relative group cursor-pointer" role="button" tabindex="0"><div></div> <div></div> <div></div> <div></div> <div><div class="flex justify-between items-start mb-2 pl-2"><div class="flex items-center gap-2"><div></div> <span class="text-exo-light-gray font-mono text-xs tracking-wider"> </span></div> <button class="text-xs px-2 py-1 font-mono tracking-wider uppercase border border-red-500/30 text-red-400/80 hover:bg-red-500/20 hover:text-red-400 hover:border-red-500/50 transition-all duration-200 cursor-pointer">DELETE</button></div> <div class="pl-2"><div class="text-exo-yellow text-sm font-mono tracking-wide truncate"> </div> <div class="text-white/60 text-xs font-mono">Strategy: <span class="text-white/80"> </span></div> <!> <!> <!> <!></div></div></div>'),T0=M('<div class="p-4 flex-1"><div class="flex items-center gap-2 mb-4"><div class="w-2 h-2 bg-exo-yellow rounded-full shadow-[0_0_8px_rgba(255,215,0,0.6)] animate-pulse"></div> <h3 class="text-sm text-exo-yellow font-mono tracking-[0.2em] uppercase">Instances</h3> <div class="flex-1 h-px bg-gradient-to-r from-exo-yellow/30 to-transparent"></div></div> <div class="space-y-3 max-h-72 overflow-y-auto pr-1"></div></div>'),N0=M('<aside class="w-80 border-l border-exo-yellow/20 bg-exo-dark-gray flex flex-col flex-shrink-0 overflow-y-auto"><button class="p-4 border-b border-exo-medium-gray/30 w-full text-left cursor-pointer hover:bg-exo-medium-gray/10 transition-colors" title="Click to return to main topology view"><div class="flex items-center justify-between mb-3"><div class="text-xs text-exo-yellow tracking-[0.2em] uppercase flex items-center gap-2"><span class="w-1.5 h-1.5 bg-exo-yellow rounded-full status-pulse"></span> TOPOLOGY</div> <span class="text-xs text-white/70 tabular-nums"> </span></div> <div class="relative aspect-square bg-exo-dark-gray rounded-lg overflow-hidden"><!></div></button> <!></aside>'),$0=M('<div class="flex-1 flex overflow-hidden"><div class="flex-1 flex flex-col min-w-0 overflow-hidden"><div class="flex-1 overflow-y-auto px-8 py-6"><div class="max-w-3xl mx-auto"><!></div></div> <div class="flex-shrink-0 px-8 pb-6 pt-4 bg-gradient-to-t from-exo-black via-exo-black to-transparent"><div class="max-w-3xl mx-auto"><!></div></div></div> <!></div>'),F0=M('<div class="relative h-screen w-full flex flex-col bg-exo-dark-gray overflow-hidden"><div class="fixed inset-0 pointer-events-none z-50 scanlines opacity-20"></div> <div class="shooting-stars"><div class="shooting-star" style="top: 10%; left: 20%; --duration: 45s; --delay: 0s;"></div> <div class="shooting-star" style="top: 30%; left: 65%; --duration: 45s; --delay: 15s;"></div> <div class="shooting-star" style="top: 50%; left: 40%; --duration: 45s; --delay: 30s;"></div></div> <!> <main class="flex-1 flex overflow-hidden relative"><div class="w-80 flex-shrink-0 border-r border-exo-yellow/10"><!></div> <!></main></div>');function R0(t,r){Vr(r,!0);const n=D(Fs),a=D(Xo),o=D(jo),l=D(ro),c=D(Cs),d=D(Ss),v=D(Ns),g=D(Ts),p=D(As),F=D(eo);let N=Rt(!1),A=Rt(ln([])),dt=Rt("Pipeline"),Z=Rt("MlxRing"),K=Rt(1),Mt=Rt(!1),Nt=Rt(null),nt=Rt(ln(new Set)),St=Rt(!1),yt=Rt(""),Ft=Rt(!1),ot=Rt(null),pt=Rt(null),$t=Rt(null),Wt=Rt(null),Ut=Rt(ln(new Set));function te(h){var R;if(!h||typeof h!="object")return new Set;const f=Object.keys(h);if(f.length!==1)return new Set;const b=h[f[0]];if(!b||typeof b!="object")return new Set;const k=b;return(R=k.shardAssignments)!=null&&R.nodeToRunner?new Set(Object.keys(k.shardAssignments.nodeToRunner)):new Set}function Xt(h){const f=new Set(e(nt));f.has(h)?f.delete(h):f.add(h),Y(nt,f,!0)}const Ce=D(()=>()=>{if(e(Wt)){const h=e(l)[e(Wt)];return te(h)}return e(Ut).size>0?e(Ut):new Set});function Ke(h,f){const b=`${h} ${f||""}`.toLowerCase(),k=b.includes("4bit")||b.includes("4-bit")||b.includes(":4bit"),R=b.includes("8bit")||b.includes("8-bit")||b.includes(":8bit"),w=k?.5:R?1:2,$=h.toLowerCase();if($.includes("deepseek-v3"))return Math.round(685*w);if($.includes("deepseek-v2"))return Math.round(236*w);if($.includes("llama-4"))return Math.round(400*w);const at=$.match(/(\d+(?:\.\d+)?)\s*b(?![a-z])/i);if(at){const et=parseFloat(at[1]);return Math.max(4,Math.round(et*w))}return $.includes("405b")||$.includes("400b")?Math.round(405*w):$.includes("180b")?Math.round(180*w):$.includes("141b")||$.includes("140b")?Math.round(140*w):$.includes("123b")||$.includes("120b")?Math.round(123*w):$.includes("72b")||$.includes("70b")?Math.round(70*w):$.includes("67b")||$.includes("65b")?Math.round(65*w):$.includes("35b")||$.includes("34b")||$.includes("32b")||$.includes("30b")?Math.round(32*w):$.includes("27b")||$.includes("26b")||$.includes("22b")?Math.round(24*w):$.includes("14b")||$.includes("13b")||$.includes("15b")?Math.round(14*w):$.includes("8b")||$.includes("9b")||$.includes("7b")?Math.round(8*w):$.includes("3b")||$.includes("3.8b")?Math.round(4*w):$.includes("2b")||$.includes("1b")||$.includes("1.5b")||$.includes("0.5b")?Math.round(2*w):16}function le(h){const f=h.toLowerCase();return f.includes("405b")||f.includes("400b")?{ttft:8e3,tps:3}:f.includes("180b")?{ttft:4e3,tps:5}:f.includes("141b")||f.includes("140b")?{ttft:3500,tps:6}:f.includes("123b")||f.includes("120b")?{ttft:3e3,tps:7}:f.includes("72b")||f.includes("70b")?{ttft:1800,tps:12}:f.includes("67b")||f.includes("65b")?{ttft:1600,tps:14}:f.includes("35b")||f.includes("34b")||f.includes("32b")||f.includes("30b")?{ttft:900,tps:22}:f.includes("27b")||f.includes("26b")||f.includes("22b")?{ttft:700,tps:28}:f.includes("14b")||f.includes("13b")||f.includes("15b")?{ttft:400,tps:45}:f.includes("8b")||f.includes("9b")||f.includes("7b")?{ttft:200,tps:65}:f.includes("4b")||f.includes("3b")||f.includes("3.8b")?{ttft:100,tps:95}:f.includes("2b")||f.includes("1b")||f.includes("1.5b")||f.includes("0.5b")?{ttft:50,tps:150}:{ttft:300,tps:50}}const ee=h=>e(Z)==="MlxRing"?h==="MlxRing":h==="MlxIbv"||h==="MlxJaccl";function pe(h){return h.storage_size_megabytes?h.storage_size_megabytes/1024:Ke(h.id,h.name)}const Xe=D(()=>()=>e(o)?Object.values(e(o).nodes).reduce((h,f)=>{var R,w,$,at,et;const b=((w=(R=f.macmon_info)==null?void 0:R.memory)==null?void 0:w.ram_total)??(($=f.system_info)==null?void 0:$.memory)??0,k=((et=(at=f.macmon_info)==null?void 0:at.memory)==null?void 0:et.ram_usage)??0;return h+(b-k)},0)/(1024*1024*1024):0);function Ht(h){return pe(h)<=e(Xe)()}const Re=D(()=>()=>[...e(A)].sort((h,f)=>{const b=Ht(h),k=Ht(f);if(b&&!k)return-1;if(!b&&k)return 1;const R=pe(h);return pe(f)-R})),xe=D(()=>()=>{const h={};if(e(A).length===0)return h;let f="",b=0,k="",R=0;for(const w of e(A)){const $=le(w.id),at=pe(w);$.tps>b&&(b=$.tps,f=w.id),at>R&&(R=at,k=w.id)}return f&&(h[f]=h[f]||[],h[f].push("FASTEST")),k&&k!==f?(h[k]=h[k]||[],h[k].push("BIGGEST")):k===f&&k&&h[k].push("BIGGEST"),h});Oo(()=>{Y(N,!0),ae()});async function ae(){try{const h=await fetch("/models");if(h.ok){const f=await h.json();Y(A,f.data||[],!0)}}catch(h){console.error("Failed to fetch models:",h)}}async function Se(h,f){if(!(!h||e(Nt))){Y(Nt,h,!0);try{const b=f??e(z)();let k;if(b!=null&&b.instance)k=b.instance;else{const w=await fetch(`/instance/placement?model_id=${encodeURIComponent(h)}&sharding=${e(dt)}&instance_meta=${e(Z)}&min_nodes=${e(K)}`);if(!w.ok){const $=await w.text();console.error("Failed to get placement:",$);return}k=await w.json()}const R=await fetch("/instance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({instance:k})});if(R.ok){Wo()||jr(h);const w=()=>{e(pt)&&e(pt).scrollTo({top:e(pt).scrollHeight,behavior:"smooth"})};setTimeout(w,200),setTimeout(w,500),setTimeout(w,1e3)}else{const w=await R.text();console.error("Failed to launch instance:",w)}}catch(b){console.error("Error launching instance:",b)}finally{Y(Nt,null)}}}function tt(h){const f=h.shard_metadata??h.shardMetadata;if(!f||typeof f!="object")return null;const b=f,k=Object.keys(b);if(k.length!==1)return null;const R=b[k[0]];if(!R)return null;const w=R.model_meta??R.modelMeta;if(!w||typeof w!="object")return null;const $=w;return $.model_id??$.modelId??null}function H(h){const f=h.download_progress??h.downloadProgress;if(!f||typeof f!="object")return null;const b=f,k=me(b.total_bytes??b.totalBytes),R=me(b.downloaded_bytes??b.downloadedBytes),w=b.speed??0,$=b.completed_files??b.completedFiles??0,at=b.total_files??b.totalFiles??0,et=b.eta_ms??b.etaMs??0,vt=[],It=b.files??{};for(const[wt,Bt]of Object.entries(It)){if(!Bt||typeof Bt!="object")continue;const _t=Bt,Pt=me(_t.total_bytes??_t.totalBytes),qt=me(_t.downloaded_bytes??_t.downloadedBytes);vt.push({name:wt,totalBytes:Pt,downloadedBytes:qt,speed:_t.speed??0,etaMs:_t.eta_ms??_t.etaMs??0,percentage:Pt>0?qt/Pt*100:0})}return{totalBytes:k,downloadedBytes:R,speed:w,etaMs:et||(w>0?(k-R)/w*1e3:0),percentage:k>0?R/k*100:0,completedFiles:$,totalFiles:at,files:vt}}function Qt(h){var vt,It,wt;if(!e(d)||Object.keys(e(d)).length===0)return{isDownloading:!1,progress:null,perNode:[]};let f=0,b=0,k=0,R=0,w=0,$=!1;const at=[],et=[];for(const[Bt,_t]of Object.entries(e(d)))if(Array.isArray(_t))for(const Pt of _t){if(!Pt||typeof Pt!="object")continue;const qt=Object.keys(Pt);if(qt.length!==1)continue;const re=qt[0],Ze=Pt[re];if(re!=="DownloadOngoing"||!Ze)continue;const ar=tt(Ze);if((!ar||!ar.includes(h.split("/").pop()||h))&&ar!==h)continue;$=!0;const Te=H(Ze);if(Te){f+=Te.totalBytes,b+=Te.downloadedBytes,k+=Te.speed,R+=Te.completedFiles,w+=Te.totalFiles,at.push(...Te.files);const gr=((wt=(It=(vt=e(o))==null?void 0:vt.nodes)==null?void 0:It[Bt])==null?void 0:wt.friendly_name)??Bt.slice(0,8);et.push({nodeId:Bt,nodeName:gr,progress:Te})}}return $?{isDownloading:!0,progress:{totalBytes:f,downloadedBytes:b,speed:k,etaMs:k>0?(f-b)/k*1e3:0,percentage:f>0?b/f*100:0,completedFiles:R,totalFiles:w,files:at},perNode:et}:{isDownloading:!1,progress:null,perNode:[]}}Nr(()=>{e(d)&&Object.keys(e(d)).length>0&&console.log("[Download Debug] Current downloads:",e(d))});function ge(h,f){var Ze,ar,Te,gr,or,Er;if(!e(d)||Object.keys(e(d)).length===0)return{isDownloading:!1,progress:null,statusText:"RUNNING",perNode:[]};const[b,k]=Q(f);if(!k||typeof k!="object")return{isDownloading:!1,progress:null,statusText:"UNKNOWN",perNode:[]};const R=k,w=((Ze=R.shardAssignments)==null?void 0:Ze.nodeToRunner)||{},$=((ar=R.shardAssignments)==null?void 0:ar.runnerToShard)||{},at=(Te=R.shardAssignments)==null?void 0:Te.modelId,et={};for(const[Je,Oe]of Object.entries(w))et[Oe]=Je;let vt=0,It=0,wt=0,Bt=0,_t=0,Pt=!1;const qt=[],re=[];for(const Je of Object.keys($)){const Oe=et[Je];if(!Oe)continue;const Dr=e(d)[Oe];if(Array.isArray(Dr))for(const ze of Dr){if(!ze||typeof ze!="object")continue;const Qe=Object.keys(ze);if(Qe.length!==1)continue;const ir=Qe[0],oe=ze[ir];if(ir!=="DownloadOngoing"||!oe)continue;const Be=tt(oe);if(at&&Be&&Be===at){Pt=!0;const ve=H(oe);if(ve){vt+=ve.totalBytes,It+=ve.downloadedBytes,wt+=ve.speed,Bt+=ve.completedFiles,_t+=ve.totalFiles,qt.push(...ve.files);const sr=((Er=(or=(gr=e(o))==null?void 0:gr.nodes)==null?void 0:or[Oe])==null?void 0:Er.friendly_name)??Oe.slice(0,8);re.push({nodeId:Oe,nodeName:sr,progress:ve})}}}}return Pt?{isDownloading:!0,progress:{totalBytes:vt,downloadedBytes:It,speed:wt,etaMs:wt>0?(vt-It)/wt*1e3:0,percentage:vt>0?It/vt*100:0,completedFiles:Bt,totalFiles:_t,files:qt},statusText:"DOWNLOADING",perNode:re}:{isDownloading:!1,progress:null,statusText:Ye(f).statusText,perNode:[]}}function fe(h){switch(h){case"FAILED":return"text-red-400";case"DOWNLOADING":return"text-blue-400";case"LOADING":case"WARMING UP":case"WAITING":return"text-yellow-400";case"RUNNING":return"text-teal-400";case"READY":case"LOADED":return"text-green-400";default:return"text-exo-light-gray"}}function Ye(h){var $;const[,f]=Q(h);if(!f||typeof f!="object")return{statusText:"UNKNOWN",statusClass:"inactive"};const R=Object.keys((($=f.shardAssignments)==null?void 0:$.runnerToShard)||{}).map(at=>{const et=e(c)[at];if(!et)return null;const[vt]=Q(et);return vt&&{RunnerWaitingForModel:"WaitingForModel",RunnerLoading:"Loading",RunnerLoaded:"Loaded",RunnerWarmingUp:"WarmingUp",RunnerReady:"Ready",RunnerRunning:"Running",RunnerFailed:"Failed"}[vt]||null}).filter(at=>at!==null),w=at=>R.includes(at);return R.length===0?{statusText:"UNKNOWN",statusClass:"inactive"}:w("Failed")?{statusText:"FAILED",statusClass:"failed"}:w("Loading")?{statusText:"LOADING",statusClass:"starting"}:w("WarmingUp")?{statusText:"WARMING UP",statusClass:"starting"}:w("Running")?{statusText:"RUNNING",statusClass:"running"}:w("Ready")?{statusText:"READY",statusClass:"loaded"}:w("Loaded")?{statusText:"LOADED",statusClass:"loaded"}:w("WaitingForModel")?{statusText:"WAITING",statusClass:"starting"}:{statusText:"RUNNING",statusClass:"active"}}function me(h){if(typeof h=="number")return h;if(h&&typeof h=="object"){const f=h;if(typeof f.in_bytes=="number")return f.in_bytes;if(typeof f.inBytes=="number")return f.inBytes}return 0}async function ce(h){if(confirm(`Delete instance ${h.slice(0,8)}...?`))try{const f=await fetch(`/instance/${h}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});f.ok||console.error("Failed to delete instance:",f.status)}catch(f){console.error("Error deleting instance:",f)}}function Q(h){if(!h||typeof h!="object")return[null,null];const f=Object.keys(h);return f.length===1?[f[0],h[f[0]]]:[null,null]}function q(h){var k;const[,f]=Q(h);return!f||typeof f!="object"?"Unknown":((k=f.shardAssignments)==null?void 0:k.modelId)||"Unknown Model"}function mt(h){var wt,Bt;const[f,b]=Q(h);if(!b||typeof b!="object")return{instanceType:"Unknown",sharding:"Unknown",nodeNames:[],nodeIds:[],nodeCount:0};let k="Unknown";f==="MlxRingInstance"?k="MLX Ring":(f==="MlxIbvInstance"||f==="MlxJacclInstance")&&(k="MLX RDMA");const R=b;let w="Unknown";const $=((wt=R.shardAssignments)==null?void 0:wt.runnerToShard)||{},at=Object.values($)[0];if(at){const[_t]=Q(at);_t==="PipelineShardMetadata"?w="Pipeline":_t==="TensorShardMetadata"?w="Tensor":_t==="PrefillDecodeShardMetadata"&&(w="Prefill/Decode")}const et=((Bt=R.shardAssignments)==null?void 0:Bt.nodeToRunner)||{},vt=Object.keys(et),It=vt.map(_t=>{var qt,re;const Pt=(re=(qt=e(o))==null?void 0:qt.nodes)==null?void 0:re[_t];return(Pt==null?void 0:Pt.friendly_name)||_t.slice(0,8)});return{instanceType:k,sharding:w,nodeNames:It,nodeIds:vt,nodeCount:vt.length}}function T(h,f=2){if(!h||h===0)return"0 B";const b=1024,k=["B","KB","MB","GB","TB"],R=Math.floor(Math.log(h)/Math.log(b));return parseFloat((h/Math.pow(b,R)).toFixed(f))+" "+k[R]}function E(h){return!h||h<=0?"0 B/s":T(h,1)+"/s"}function m(h){var b,k;const f=(k=(b=e(o))==null?void 0:b.nodes)==null?void 0:k[h];return(f==null?void 0:f.friendly_name)||h.slice(0,8)}function S(h,f){var w,$,at,et;if(!f)return{label:"?",missing:!0};const b=($=(w=e(o))==null?void 0:w.nodes)==null?void 0:$[h];if(!b)return{label:"?",missing:!0};const k=(at=b.network_interfaces)==null?void 0:at.find(vt=>(vt.addresses||[]).some(It=>It===f));if(k!=null&&k.name)return{label:`${k.name} on ${m(h)}`,missing:!1};const R=(et=b.ip_to_interface)==null?void 0:et[f];return R&&R.trim().length>0?{label:`${R} on ${m(h)}`,missing:!1}:{label:"?",missing:!0}}function x(h,f){var $,at;const b=(($=h.shardAssignments)==null?void 0:$.runnerToShard)||{},k=((at=h.shardAssignments)==null?void 0:at.nodeToRunner)||{};return Object.entries(b).map(([et,vt])=>{const[It,wt]=Q(vt),Bt=wt,_t=(Bt==null?void 0:Bt.deviceRank)??0;return{runnerId:et,tag:It,deviceRank:_t}}).filter(et=>f==="Pipeline"?et.tag==="PipelineShardMetadata":et.tag==="TensorShardMetadata").sort((et,vt)=>et.deviceRank-vt.deviceRank).map((et,vt)=>{var wt;return{nodeId:(wt=Object.entries(k).find(([,Bt])=>Bt===et.runnerId))==null?void 0:wt[0],runnerId:et.runnerId,order:vt}}).filter(et=>et.nodeId)}function C(h){if(!h||h.length===0)return null;const f=h.filter(b=>b.ip&&b.ip!=="0.0.0.0"&&b.port&&b.port>0).map(b=>{const k=b.ip,R=k.startsWith("10.")||k.startsWith("172.")||k.startsWith("192.168")?3:k.startsWith("169.254")?2:1;return{host:b,score:R}});return f.length===0?null:(f.sort((b,k)=>k.score-b.score),f[0].host)}function P(h){var k,R;const[f,b]=Q(h);if(!b||typeof b!="object")return[];if(f==="MlxJacclInstance"){const w=x(b,"Tensor"),$=b.ibvDevices||[],at=[];for(let et=0;et<w.length;et++)for(let vt=et+1;vt<w.length;vt++){const It=((k=$[et])==null?void 0:k[vt])??((R=$[vt])==null?void 0:R[et])??null;if(!It)continue;const wt=w[et].nodeId,Bt=w[vt].nodeId;at.push({from:m(wt),to:m(Bt),ip:It,ifaceLabel:`RDMA ${It}`,missingIface:!1})}return at}if(f==="MlxRingInstance"){const w=x(b,"Pipeline"),$=b.hostsByNode||{},at=[];if(w.length===0)return at;for(let et=0;et<w.length;et++){const vt=w[et],It=w[(et+1)%w.length],wt=C($[It.nodeId]),Bt=wt?`${wt.ip}:${wt.port}`:"?",_t=wt?S(It.nodeId,wt.ip):{label:"?",missing:!0};at.push({from:m(vt.nodeId),to:m(It.nodeId),ip:Bt,ifaceLabel:_t.label,missingIface:_t.missing})}return at}return[]}function I(h){if(!h||h<=0)return"--";const f=Math.round(h/1e3),b=f%60,k=Math.floor(f/60)%60,R=Math.floor(f/3600);return R>0?`${R}h ${k}m`:k>0?`${k}m ${b}s`:`${b}s`}function _(){$s()}function bt(h){if(!e(ot)||e(ft)<=1)return;const f=e(ot).getBoundingClientRect(),b=Math.max(0,Math.min(1,(h-f.left)/f.width)),k=Math.round(b*(e(ft)-1))+1,R=Math.max(1,Math.min(e(ft),k)),w=e(X)();if(w.has(R))Y(K,R,!0);else{let $=R,at=1/0;for(const et of w){const vt=Math.abs(et-R);vt<at&&(at=vt,$=et)}w.size>0&&Y(K,$,!0)}}function Ot(h){Y(Ft,!0),bt(h.clientX)}function zt(h){e(Ft)&&bt(h.clientX)}function Ct(){Y(Ft,!1)}function B(h){Y(Ft,!0),h.touches.length>0&&bt(h.touches[0].clientX)}function U(h){e(Ft)&&h.touches.length>0&&(h.preventDefault(),bt(h.touches[0].clientX))}function W(){Y(Ft,!1)}const it=D(()=>e(o)?Object.keys(e(o).nodes).length:0),st=D(()=>Object.keys(e(l)).length);function ut(h){return h.memory_delta_by_node?Object.entries(h.memory_delta_by_node).filter(([f,b])=>b>0).length:0}const ft=D(()=>Math.max(1,e(it))),X=D(()=>()=>{if(!e(g)||e(v).length===0)return new Set(Array.from({length:e(ft)},(f,b)=>b+1));let h=0;for(const f of e(v)){if(f.sharding!==e(dt)||!ee(f.instance_meta)||f.error!==null||!f.memory_delta_by_node)continue;const b=ut(f);b>h&&(h=b)}return h===0?new Set:new Set(Array.from({length:h},(f,b)=>b+1))}),xt=D(()=>()=>!e(g)||e(v).length===0?[]:e(v).filter(f=>f.sharding===e(dt)&&ee(f.instance_meta)&&f.error===null&&f.memory_delta_by_node!==null).filter(f=>ut(f)>=e(K)).sort((f,b)=>ut(f)-ut(b))),z=D(()=>()=>e(xt)()[0]??null);Nr(()=>{const h=e(ft);!e(Mt)&&h>0?(Y(K,1),Y(Mt,!0)):e(K)>h&&Y(K,h,!0)}),Nr(()=>{const h=e(X)();if(h.size>0&&!h.has(e(K))){const f=Array.from(h).sort((k,R)=>k-R),b=f.find(k=>k>=e(K))??f[f.length-1];b!==void 0&&Y(K,b,!0)}});var G=F0();Ee("mousemove",na,zt),Ee("mouseup",na,Ct),Ee("touchmove",na,U,void 0,!0),Ee("touchend",na,W);var J=u(s(G),4);Ms(J,{get showHome(){return e(n)},onHome:_});var rt=u(J,2),ct=s(rt),lt=s(ct);vf(lt,{class:"h-full"}),i(ct);var kt=u(ct,2);{var At=h=>{var f=u0(),b=s(f),k=s(b),R=s(k);{let gt=D(()=>e(Ce)());Io(R,{class:"w-full h-full",get highlightedNodes(){return e(gt)}})}i(k);var w=u(k,2),$=s(w),at=s($);Lo(at,{placeholder:"Ask anything",showHelperText:!1,showModelSelector:!0}),i($),i(w),i(b);var et=u(b,2),vt=s(et);{var It=gt=>{var Dt=Wf(),ke=u(s(Dt),2);de(ke,21,()=>Object.entries(e(l)),ye,(Me,Ge)=>{var ie=D(()=>po(e(Ge),2));let Yt=()=>e(ie)[0],jt=()=>e(ie)[1];const Lt=D(()=>ge(Yt(),jt())),_e=D(()=>e(Lt).statusText),we=D(()=>e(Lt).isDownloading),ue=D(()=>e(_e)==="FAILED"),Tt=D(()=>e(_e)==="LOADING"||e(_e)==="WARMING UP"||e(_e)==="WAITING"),Gt=D(()=>e(_e)==="READY"||e(_e)==="LOADED"),Vt=D(()=>q(jt())),Zt=D(()=>mt(jt())),be=D(()=>P(jt()));var ne=Yf();ne.__click=()=>{e(Vt)&&e(Vt)!=="Unknown"&&e(Vt)!=="Unknown Model"&&jr(e(Vt))},ne.__keydown=Kt=>{(Kt.key==="Enter"||Kt.key===" ")&&e(Vt)&&e(Vt)!=="Unknown"&&e(Vt)!=="Unknown Model"&&jr(e(Vt))};var He=s(ne),dr=u(He,2),Ie=u(dr,2),Qr=u(Ie,2),br=u(Qr,2),Rr=s(br),xn=s(Rr),tn=s(xn),Vn=u(tn,2),qn=s(Vn,!0);i(Vn),i(xn);var ka=u(xn,2);ka.__click=()=>ce(Yt()),i(Rr);var Kn=u(Rr,2),gn=s(Kn),Or=s(gn,!0);i(gn);var yr=u(gn,2),en=u(s(yr)),De=s(en);i(en),i(yr);var Cr=u(yr,2);{var mn=Kt=>{var se=Df();V(()=>j(se,"href",`https://huggingface.co/${e(Vt)}`)),y(Kt,se)};O(Cr,Kt=>{e(Vt)&&e(Vt)!=="Unknown"&&e(Vt)!=="Unknown Model"&&Kt(mn)})}var rn=u(Cr,2);{var Ma=Kt=>{var se=Lf(),We=s(se,!0);i(se),V($e=>L(We,$e),[()=>e(Zt).nodeNames.join(", ")]),y(Kt,se)};O(rn,Kt=>{e(Zt).nodeNames.length>0&&Kt(Ma)})}var _n=u(rn,2);{var Sa=Kt=>{var se=Of();de(se,21,()=>e(be),ye,(We,$e)=>{var wr=Rf(),zr=s(wr),ur=s(zr);i(zr);var fr=u(zr,2),vr=s(fr);i(fr),i(wr),V(()=>{L(ur,`${e($e).from??""} -> ${e($e).to??""}: ${e($e).ip??""}`),ht(fr,1,e($e).missingIface?"text-red-400":"text-white/60"),L(vr,`(${e($e).ifaceLabel??""})`)}),y(We,wr)}),i(se),y(Kt,se)};O(_n,Kt=>{e(F)&&e(be).length>0&&Kt(Sa)})}var bn=u(_n,2);{var Ta=Kt=>{var se=jf(),We=Jt(se),$e=s(We),wr=s($e),zr=s(wr);i(wr);var ur=u(wr,2),fr=s(ur);i(ur),i($e);var vr=u($e,2),nn=s(vr);i(vr);var Gr=u(vr,2),Hr=s(Gr),Na=s(Hr,!0);i(Hr);var wn=u(Hr,2),Pe=s(wn);i(wn);var hr=u(wn,2),kn=s(hr);i(hr),i(Gr),i(We);var tr=u(We,2);{var kr=Ve=>{var er=Uf();de(er,21,()=>e(Lt).perNode,ye,(Mn,Fe)=>{const an=D(()=>Math.min(100,Math.max(0,e(Fe).progress.percentage))),on=D(()=>e(nt).has(e(Fe).nodeId));var Sn=Pf(),Pr=s(Sn);Pr.__click=()=>Xt(e(Fe).nodeId);var Ur=s(Pr),Tn=s(Ur),Zn=s(Tn,!0);i(Tn);var Jn=u(Tn,2),Qn=s(Jn),ta=u(Qn),$a=s(ta);i(ta),i(Jn),i(Ur);var Nn=u(Ur,2),Fa=s(Nn);i(Nn);var ea=u(Nn,2),Ea=s(ea),Fi=s(Ea);i(Ea);var co=u(Ea,2),Ei=s(co);i(co),i(ea),i(Pr);var Ai=u(Pr,2);{var Ci=$n=>{var Fn=Hf(),Aa=s(Fn);{var Ca=Br=>{var ra=zf();y(Br,ra)},Ba=Br=>{var ra=Ae(),Bi=Jt(ra);de(Bi,17,()=>e(Fe).progress.files,ye,(Ii,sn)=>{const uo=D(()=>Math.min(100,Math.max(0,e(sn).percentage??0)));var Ia=Gf(),Da=s(Ia),La=s(Da),Di=s(La,!0);i(La);var fo=u(La,2),Li=s(fo);i(fo),i(Da);var Ra=u(Da,2),Ri=s(Ra);i(Ra);var vo=u(Ra,2),Oa=s(vo),Oi=s(Oa);i(Oa);var ho=u(Oa,2),zi=s(ho);i(ho),i(vo),i(Ia),V((Gi,Hi,Pi,Ui,ji,Xi)=>{L(Di,e(sn).name),L(Li,`${Gi??""}%`),Sr(Ri,`width: ${Hi??""}%`),L(Oi,`${Pi??""} / ${Ui??""}`),L(zi,`${ji??""} â€¢ ETA ${Xi??""}`)},[()=>e(uo).toFixed(1),()=>e(uo).toFixed(1),()=>T(e(sn).downloadedBytes),()=>T(e(sn).totalBytes),()=>E(e(sn).speed),()=>I(e(sn).etaMs)]),y(Ii,Ia)}),y(Br,ra)};O(Aa,Br=>{e(Fe).progress.files.length===0?Br(Ca):Br(Ba,!1)})}i(Fn),y($n,Fn)};O(Ai,$n=>{e(on)&&$n(Ci)})}i(Sn),V(($n,Fn,Aa,Ca,Ba,Br)=>{L(Zn,e(Fe).nodeName),L(Qn,`${$n??""}% `),ht($a,0,Bs(e(on)?"transform rotate-180 origin-center transition-transform duration-150":"transition-transform duration-150")),Sr(Fa,`width: ${Fn??""}%`),L(Fi,`${Aa??""} / ${Ca??""}`),L(Ei,`${Ba??""} â€¢ ETA ${Br??""}`)},[()=>e(an).toFixed(1),()=>e(an).toFixed(1),()=>T(e(Fe).progress.downloadedBytes),()=>T(e(Fe).progress.totalBytes),()=>E(e(Fe).progress.speed),()=>I(e(Fe).progress.etaMs)]),y(Mn,Sn)}),i(er),y(Ve,er)};O(tr,Ve=>{e(Lt).perNode.length>0&&Ve(kr)})}qe(2),V((Ve,er,Mn,Fe,an)=>{L(zr,`${Ve??""}%`),L(fr,`${er??""}/${Mn??""}`),Sr(nn,`width: ${e(Lt).progress.percentage??""}%`),L(Na,Fe),L(Pe,`ETA: ${an??""}`),L(kn,`${e(Lt).progress.completedFiles??""}/${e(Lt).progress.totalFiles??""} files`)},[()=>e(Lt).progress.percentage.toFixed(1),()=>T(e(Lt).progress.downloadedBytes),()=>T(e(Lt).progress.totalBytes),()=>E(e(Lt).progress.speed),()=>I(e(Lt).progress.etaMs)]),y(Kt,se)},yn=Kt=>{var se=Xf(),We=s(se,!0);i(se),V($e=>{ht(se,1,`text-xs ${$e??""} font-mono tracking-wider mt-1`),L(We,e(Lt).statusText)},[()=>fe(e(Lt).statusText)]),y(Kt,se)};O(bn,Kt=>{e(Lt).isDownloading&&e(Lt).progress?Kt(Ta):Kt(yn,!1)})}i(Kn),i(br),i(ne),V((Kt,se)=>{ht(He,1,`absolute -top-px -left-px w-2 h-2 border-l border-t ${e(we)?"border-blue-500/50":e(ue)?"border-red-500/50":e(Tt)?"border-yellow-500/50":e(Gt)?"border-green-500/50":"border-teal-500/50"}`),ht(dr,1,`absolute -top-px -right-px w-2 h-2 border-r border-t ${e(we)?"border-blue-500/50":e(ue)?"border-red-500/50":e(Tt)?"border-yellow-500/50":e(Gt)?"border-green-500/50":"border-teal-500/50"}`),ht(Ie,1,`absolute -bottom-px -left-px w-2 h-2 border-l border-b ${e(we)?"border-blue-500/50":e(ue)?"border-red-500/50":e(Tt)?"border-yellow-500/50":e(Gt)?"border-green-500/50":"border-teal-500/50"}`),ht(Qr,1,`absolute -bottom-px -right-px w-2 h-2 border-r border-b ${e(we)?"border-blue-500/50":e(ue)?"border-red-500/50":e(Tt)?"border-yellow-500/50":e(Gt)?"border-green-500/50":"border-teal-500/50"}`),ht(br,1,`bg-exo-dark-gray/60 border border-l-2 ${e(we)?"border-blue-500/30 border-l-blue-400":e(ue)?"border-red-500/30 border-l-red-400":e(Tt)?"border-exo-yellow/30 border-l-yellow-400":e(Gt)?"border-green-500/30 border-l-green-400":"border-teal-500/30 border-l-teal-400"} p-3`),ht(tn,1,`w-1.5 h-1.5 ${e(we)?"bg-blue-400 animate-pulse":e(ue)?"bg-red-400":e(Tt)?"bg-yellow-400 animate-pulse":e(Gt)?"bg-green-400":"bg-teal-400"} rounded-full shadow-[0_0_6px_currentColor]`),L(qn,Kt),L(Or,se),L(De,`${e(Zt).sharding??""} (${e(Zt).instanceType??""})`)},[()=>Yt().slice(0,8).toUpperCase(),()=>q(jt())]),Ee("mouseenter",ne,()=>Y(Wt,Yt(),!0)),Ee("mouseleave",ne,()=>Y(Wt,null)),y(Me,ne)}),i(ke),$r(ke,Me=>Y(pt,Me),()=>e(pt)),i(Dt),y(gt,Dt)};O(vt,gt=>{e(st)>0&&gt(It)})}var wt=u(vt,2),Bt=s(wt),_t=u(s(Bt),6),Pt=s(_t);i(_t),i(Bt);var qt=u(Bt,2),re=s(qt);re.__click=()=>Y(St,!e(St));var Ze=s(re);{var ar=gt=>{const Dt=D(()=>e(A).find(Yt=>Yt.id===e(g)));var ke=Ae(),Me=Jt(ke);{var Ge=Yt=>{const jt=D(()=>pe(e(Dt)));var Lt=Vf(),_e=s(Lt),we=s(_e,!0);i(_e);var ue=u(_e,2),Tt=s(ue);i(ue),i(Lt),V(Gt=>{L(we,e(Dt).name||e(Dt).id),L(Tt,`${Gt??""}GB`)},[()=>e(jt)>=1?e(jt).toFixed(0):e(jt).toFixed(1)]),y(Yt,Lt)},ie=Yt=>{var jt=qf(),Lt=s(jt,!0);i(jt),V(()=>L(Lt,e(g))),y(Yt,jt)};O(Me,Yt=>{e(Dt)?Yt(Ge):Yt(ie,!1)})}y(gt,ke)},Te=gt=>{var Dt=Kf();y(gt,Dt)};O(Ze,gt=>{e(g)?gt(ar):gt(Te,!1)})}i(re);var gr=u(re,2),or=u(gr,2);{var Er=gt=>{var Dt=Qf(),ke=Jt(Dt);ke.__click=()=>Y(St,!1);var Me=u(ke,2),Ge=s(Me),ie=s(Ge);Xa(ie),i(Ge);var Yt=u(Ge,2);de(Yt,21,()=>e(Re)().filter(jt=>!e(yt)||(jt.name||jt.id).toLowerCase().includes(e(yt).toLowerCase())),ye,(jt,Lt)=>{const _e=D(()=>pe(e(Lt))),we=D(()=>Ht(e(Lt)));var ue=Zf();ue.__click=()=>{e(we)&&(Es(e(Lt).id),Y(St,!1),Y(yt,""))};var Tt=s(ue),Gt=s(Tt,!0);i(Tt);var Vt=u(Tt,2),Zt=s(Vt);i(Vt),i(ue),V(be=>{ue.disabled=!e(we),ht(ue,1,`w-full px-3 py-2 text-left text-sm font-mono tracking-wide transition-colors duration-100 flex items-center justify-between gap-2 ${e(g)===e(Lt).id?"bg-transparent text-exo-yellow cursor-pointer":e(we)?"text-white/80 hover:text-exo-yellow cursor-pointer":"text-white/30 cursor-default"}`),L(Gt,e(Lt).name||e(Lt).id),ht(Vt,1,`flex-shrink-0 text-xs ${e(we)?"text-white/50":"text-red-400/60"}`),L(Zt,`${be??""}GB`)},[()=>e(_e)>=1?e(_e).toFixed(0):e(_e).toFixed(1)]),y(jt,ue)},jt=>{var Lt=Jf();y(jt,Lt)}),i(Yt),i(Me),Ln(ie,()=>e(yt),jt=>Y(yt,jt)),y(gt,Dt)};O(or,gt=>{e(St)&&gt(Er)})}i(qt);var Je=u(qt,2),Oe=s(Je),Dr=u(s(Oe),2),ze=s(Dr);ze.__click=()=>Y(dt,"Pipeline");var Qe=s(ze),ir=s(Qe);{var oe=gt=>{var Dt=t0();y(gt,Dt)};O(ir,gt=>{e(dt)==="Pipeline"&&gt(oe)})}i(Qe),qe(),i(ze);var Be=u(ze,2);Be.__click=()=>Y(dt,"Tensor");var ve=s(Be),sr=s(ve);{var Ar=gt=>{var Dt=e0();y(gt,Dt)};O(sr,gt=>{e(dt)==="Tensor"&&gt(Ar)})}i(ve),qe(),i(Be),i(Dr),i(Oe);var lr=u(Oe,2),Ne=u(s(lr),2),cr=s(Ne);cr.__click=()=>Y(Z,"MlxRing");var Kr=s(cr),mr=s(Kr);{var Un=gt=>{var Dt=r0();y(gt,Dt)};O(mr,gt=>{e(Z)==="MlxRing"&&gt(Un)})}i(Kr),qe(),i(cr);var Lr=u(cr,2);Lr.__click=()=>Y(Z,"MlxIbv");var Zr=s(Lr),jn=s(Zr);{var vn=gt=>{var Dt=n0();y(gt,Dt)};O(jn,gt=>{e(Z)==="MlxIbv"&&gt(vn)})}i(Zr),qe(),i(Lr),i(Ne),i(lr);var Jr=u(lr,2),_r=u(s(Jr),2);_r.__mousedown=Ot,_r.__touchstart=B;var hn=u(s(_r),2);{var Xn=gt=>{var Dt=a0();V(()=>Sr(Dt,`width: ${(e(K)-1)/(e(ft)-1)*100}%`)),y(gt,Dt)};O(hn,gt=>{e(ft)>1&&gt(Xn)})}var ya=u(hn,2);de(ya,17,()=>Array.from({length:e(ft)},(gt,Dt)=>Dt+1),ye,(gt,Dt)=>{const ke=D(()=>e(X)().has(e(Dt))),Me=D(()=>e(K)===e(Dt)),Ge=D(()=>e(ft)>1?(e(Dt)-1)/(e(ft)-1)*100:50);var ie=o0(),Yt=s(ie),jt=u(Yt,2),Lt=s(jt,!0);i(jt),i(ie),V(()=>{Sr(ie,`left: ${e(Ge)??""}%; top: 0; transform: translateX(-50%);`),ht(Yt,1,`rounded-full transition-all ${e(Me)?"w-6 h-6 bg-exo-yellow shadow-[0_0_10px_rgba(255,215,0,0.6)]":e(ke)?"w-4 h-4 bg-exo-light-gray/70 mt-1":"w-3 h-3 bg-exo-medium-gray/50 mt-1.5"}`),ht(jt,1,`text-sm font-mono mt-1.5 tabular-nums transition-colors ${e(Me)?"text-exo-yellow font-bold":e(ke)?"text-white/70":"text-white/30"}`),L(Lt,e(Dt))}),y(gt,ie)}),i(_r),$r(_r,gt=>Y(ot,gt),()=>e(ot)),i(Jr),i(Je);var Yn=u(Je,2),Wn=s(Yn);{var pn=gt=>{var Dt=i0();y(gt,Dt)},wa=gt=>{var Dt=Ae(),ke=Jt(Dt);{var Me=ie=>{var Yt=s0();y(ie,Yt)},Ge=ie=>{const Yt=D(()=>e(A).find(Tt=>Tt.id===e(g))),jt=D(()=>e(xt)());var Lt=Ae(),_e=Jt(Lt);{var we=Tt=>{const Gt=D(()=>Qt(e(Yt).id)),Vt=D(()=>e(xe)()[e(Yt).id]||[]);var Zt=c0();de(Zt,21,()=>e(jt),ye,(be,ne)=>{var He=l0(),dr=s(He);{let Ie=D(()=>e(Nt)===e(Yt).id),Qr=D(()=>{var br;return((br=e(o))==null?void 0:br.nodes)??{}});Ef(dr,{get model(){return e(Yt)},get isLaunching(){return e(Ie)},get downloadStatus(){return e(Gt)},get nodes(){return e(Qr)},get sharding(){return e(ne).sharding},get runtime(){return e(ne).instance_meta},onLaunch:()=>Se(e(Yt).id,e(ne)),get tags(){return e(Vt)},get apiPreview(){return e(ne)},get modelIdOverride(){return e(ne).model_id}})}i(He),Ee("mouseenter",He,()=>{e(ne).memory_delta_by_node&&Y(Ut,new Set(Object.entries(e(ne).memory_delta_by_node).filter(([,Ie])=>(Ie??0)>0).map(([Ie])=>Ie)),!0)}),Ee("mouseleave",He,()=>Y(Ut,new Set,!0)),y(be,He)}),i(Zt),y(Tt,Zt)},ue=Tt=>{var Gt=Ae(),Vt=Jt(Gt);{var Zt=be=>{var ne=d0();y(be,ne)};O(Vt,be=>{e(Yt)&&be(Zt)},!0)}y(Tt,Gt)};O(_e,Tt=>{e(Yt)&&e(jt).length>0?Tt(we):Tt(ue,!1)})}y(ie,Lt)};O(ke,ie=>{e(p)?ie(Me):ie(Ge,!1)},!0)}y(gt,Dt)};O(Wn,gt=>{e(A).length===0?gt(pn):gt(wa,!1)})}i(Yn),i(wt),i(et),i(f),V(()=>{L(Pt,`${e(A).length??""} models`),ht(re,1,`w-full bg-exo-medium-gray/50 border border-exo-yellow/30 rounded pl-3 pr-8 py-2.5 text-sm font-mono text-left tracking-wide cursor-pointer transition-all duration-200 hover:border-exo-yellow/50 focus:outline-none focus:border-exo-yellow/70 ${e(St)?"border-exo-yellow/70":""}`),ht(gr,1,`absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none transition-transform duration-200 ${e(St)?"rotate-180":""}`),ht(ze,1,`flex items-center gap-2 py-2 px-4 text-sm font-mono border rounded transition-all duration-200 cursor-pointer ${e(dt)==="Pipeline"?"bg-transparent text-exo-yellow border-exo-yellow":"bg-transparent text-white/70 border-exo-medium-gray/50 hover:border-exo-yellow/50"}`),ht(Qe,1,`w-4 h-4 rounded-full border-2 flex items-center justify-center ${e(dt)==="Pipeline"?"border-exo-yellow":"border-exo-medium-gray"}`),ht(Be,1,`flex items-center gap-2 py-2 px-4 text-sm font-mono border rounded transition-all duration-200 cursor-pointer ${e(dt)==="Tensor"?"bg-transparent text-exo-yellow border-exo-yellow":"bg-transparent text-white/70 border-exo-medium-gray/50 hover:border-exo-yellow/50"}`),ht(ve,1,`w-4 h-4 rounded-full border-2 flex items-center justify-center ${e(dt)==="Tensor"?"border-exo-yellow":"border-exo-medium-gray"}`),ht(cr,1,`flex items-center gap-2 py-2 px-4 text-sm font-mono border rounded transition-all duration-200 cursor-pointer ${e(Z)==="MlxRing"?"bg-transparent text-exo-yellow border-exo-yellow":"bg-transparent text-white/70 border-exo-medium-gray/50 hover:border-exo-yellow/50"}`),ht(Kr,1,`w-4 h-4 rounded-full border-2 flex items-center justify-center ${e(Z)==="MlxRing"?"border-exo-yellow":"border-exo-medium-gray"}`),ht(Lr,1,`flex items-center gap-2 py-2 px-4 text-sm font-mono border rounded transition-all duration-200 cursor-pointer ${e(Z)==="MlxIbv"?"bg-transparent text-exo-yellow border-exo-yellow":"bg-transparent text-white/70 border-exo-medium-gray/50 hover:border-exo-yellow/50"}`),ht(Zr,1,`w-4 h-4 rounded-full border-2 flex items-center justify-center ${e(Z)==="MlxIbv"?"border-exo-yellow":"border-exo-medium-gray"}`)}),oa(1,f,()=>Ua,()=>({duration:300})),oa(2,f,()=>Ua,()=>({duration:200})),y(h,f)},Et=h=>{var f=$0(),b=s(f),k=s(b),R=s(k),w=s(R);Ju(w,{get scrollParent(){return e($t)}}),i(R),i(k),$r(k,wt=>Y($t,wt),()=>e($t));var $=u(k,2),at=s($),et=s(at);Lo(et,{placeholder:"Ask anything",showModelSelector:!0}),i(at),i($),i(b);var vt=u(b,2);{var It=wt=>{var Bt=N0(),_t=s(Bt);_t.__click=_;var Pt=s(_t),qt=u(s(Pt),2),re=s(qt);i(qt),i(Pt);var Ze=u(Pt,2),ar=s(Ze);{let or=D(()=>e(Ce)());Io(ar,{get highlightedNodes(){return e(or)}})}i(Ze),i(_t);var Te=u(_t,2);{var gr=or=>{var Er=T0(),Je=u(s(Er),2);de(Je,21,()=>Object.entries(e(l)),ye,(Oe,Dr)=>{var ze=D(()=>po(e(Dr),2));let Qe=()=>e(ze)[0],ir=()=>e(ze)[1];const oe=D(()=>ge(Qe(),ir())),Be=D(()=>e(oe).statusText),ve=D(()=>e(oe).isDownloading),sr=D(()=>e(Be)==="FAILED"),Ar=D(()=>e(Be)==="LOADING"||e(Be)==="WARMING UP"||e(Be)==="WAITING"),lr=D(()=>e(Be)==="READY"||e(Be)==="LOADED"),Ne=D(()=>q(ir())),cr=D(()=>mt(ir())),Kr=D(()=>P(ir()));var mr=S0();mr.__click=()=>{e(Ne)&&e(Ne)!=="Unknown"&&e(Ne)!=="Unknown Model"&&jr(e(Ne))},mr.__keydown=Tt=>{(Tt.key==="Enter"||Tt.key===" ")&&e(Ne)&&e(Ne)!=="Unknown"&&e(Ne)!=="Unknown Model"&&jr(e(Ne))};var Un=s(mr),Lr=u(Un,2),Zr=u(Lr,2),jn=u(Zr,2),vn=u(jn,2),Jr=s(vn),_r=s(Jr),hn=s(_r),Xn=u(hn,2),ya=s(Xn,!0);i(Xn),i(_r);var Yn=u(_r,2);Yn.__click=()=>ce(Qe()),i(Jr);var Wn=u(Jr,2),pn=s(Wn),wa=s(pn,!0);i(pn);var gt=u(pn,2),Dt=u(s(gt)),ke=s(Dt);i(Dt),i(gt);var Me=u(gt,2);{var Ge=Tt=>{var Gt=f0();V(()=>j(Gt,"href",`https://huggingface.co/${e(Ne)}`)),y(Tt,Gt)};O(Me,Tt=>{e(Ne)&&e(Ne)!=="Unknown"&&e(Ne)!=="Unknown Model"&&Tt(Ge)})}var ie=u(Me,2);{var Yt=Tt=>{var Gt=v0(),Vt=s(Gt,!0);i(Gt),V(Zt=>L(Vt,Zt),[()=>e(cr).nodeNames.join(", ")]),y(Tt,Gt)};O(ie,Tt=>{e(cr).nodeNames.length>0&&Tt(Yt)})}var jt=u(ie,2);{var Lt=Tt=>{var Gt=p0();de(Gt,21,()=>e(Kr),ye,(Vt,Zt)=>{var be=h0(),ne=s(be),He=s(ne);i(ne);var dr=u(ne,2),Ie=s(dr);i(dr),i(be),V(()=>{L(He,`${e(Zt).from??""} -> ${e(Zt).to??""}: ${e(Zt).ip??""}`),ht(dr,1,e(Zt).missingIface?"text-red-400":"text-white/60"),L(Ie,`(${e(Zt).ifaceLabel??""})`)}),y(Vt,be)}),i(Gt),y(Tt,Gt)};O(jt,Tt=>{e(F)&&e(Kr).length>0&&Tt(Lt)})}var _e=u(jt,2);{var we=Tt=>{var Gt=k0(),Vt=Jt(Gt),Zt=s(Vt),be=s(Zt),ne=s(be);i(be);var He=u(be,2),dr=s(He);i(He),i(Zt);var Ie=u(Zt,2),Qr=s(Ie);i(Ie);var br=u(Ie,2),Rr=s(br),xn=s(Rr,!0);i(Rr);var tn=u(Rr,2),Vn=s(tn);i(tn);var qn=u(tn,2),ka=s(qn);i(qn),i(br),i(Vt);var Kn=u(Vt,2);{var gn=Or=>{var yr=w0();de(yr,21,()=>e(oe).perNode,ye,(en,De)=>{var Cr=y0(),mn=s(Cr),rn=s(mn),Ma=s(rn,!0);i(rn);var _n=u(rn,2),Sa=s(_n);i(_n),i(mn);var bn=u(mn,2),Ta=s(bn);i(bn);var yn=u(bn,2),Kt=s(yn),se=s(Kt);i(Kt);var We=u(Kt,2),$e=s(We);i(We),i(yn);var wr=u(yn,2);{var zr=ur=>{const fr=D(()=>e(De).progress.files.filter(Pe=>(Pe.percentage??0)<100)),vr=D(()=>e(De).progress.files.filter(Pe=>(Pe.percentage??0)>=100));var nn=b0(),Gr=Jt(nn);{var Hr=Pe=>{var hr=g0();de(hr,21,()=>e(fr),ye,(kn,tr)=>{var kr=x0(),Ve=s(kr),er=s(Ve),Mn=s(er,!0);i(er);var Fe=u(er,2),an=s(Fe);i(Fe),i(Ve);var on=u(Ve,2),Sn=s(on);i(on);var Pr=u(on,2),Ur=s(Pr),Tn=s(Ur);i(Ur);var Zn=u(Ur,2),Jn=s(Zn);i(Zn),i(Pr),i(kr),V((Qn,ta,$a,Nn,Fa,ea)=>{L(Mn,e(tr).name),L(an,`${Qn??""}%`),Sr(Sn,`width: ${ta??""}%`),L(Tn,`${$a??""} / ${Nn??""}`),L(Jn,`${Fa??""} â€¢ ETA ${ea??""}`)},[()=>Math.min(100,Math.max(0,e(tr).percentage)).toFixed(1),()=>Math.min(100,Math.max(0,e(tr).percentage)).toFixed(1),()=>T(e(tr).downloadedBytes),()=>T(e(tr).totalBytes),()=>E(e(tr).speed),()=>I(e(tr).etaMs)]),y(kn,kr)}),i(hr),y(Pe,hr)};O(Gr,Pe=>{e(fr).length>0&&Pe(Hr)})}var Na=u(Gr,2);{var wn=Pe=>{var hr=_0();de(hr,21,()=>e(vr),ye,(kn,tr)=>{var kr=m0(),Ve=s(kr),er=s(Ve,!0);i(Ve),qe(2),i(kr),V(()=>L(er,e(tr).name)),y(kn,kr)}),i(hr),y(Pe,hr)};O(Na,Pe=>{e(vr).length>0&&Pe(wn)})}y(ur,nn)};O(wr,ur=>{e(De).progress.files.length>0&&ur(zr)})}i(Cr),V((ur,fr,vr,nn,Gr,Hr)=>{L(Ma,e(De).nodeName),L(Sa,`${ur??""}%`),Sr(Ta,`width: ${fr??""}%`),L(se,`${vr??""} / ${nn??""}`),L($e,`${Gr??""} â€¢ ETA ${Hr??""}`)},[()=>Math.min(100,Math.max(0,e(De).progress.percentage)).toFixed(1),()=>Math.min(100,Math.max(0,e(De).progress.percentage)).toFixed(1),()=>T(e(De).progress.downloadedBytes),()=>T(e(De).progress.totalBytes),()=>E(e(De).progress.speed),()=>I(e(De).progress.etaMs)]),y(en,Cr)}),i(yr),y(Or,yr)};O(Kn,Or=>{e(oe).perNode.length>0&&Or(gn)})}qe(2),V((Or,yr,en,De,Cr)=>{L(ne,`${Or??""}%`),L(dr,`${yr??""}/${en??""}`),Sr(Qr,`width: ${e(oe).progress.percentage??""}%`),L(xn,De),L(Vn,`ETA: ${Cr??""}`),L(ka,`${e(oe).progress.completedFiles??""}/${e(oe).progress.totalFiles??""} files`)},[()=>e(oe).progress.percentage.toFixed(1),()=>T(e(oe).progress.downloadedBytes),()=>T(e(oe).progress.totalBytes),()=>E(e(oe).progress.speed),()=>I(e(oe).progress.etaMs)]),y(Tt,Gt)},ue=Tt=>{var Gt=M0(),Vt=s(Gt,!0);i(Gt),V(Zt=>{ht(Gt,1,`text-sm ${Zt??""} font-mono tracking-wider mt-1`),L(Vt,e(oe).statusText)},[()=>fe(e(oe).statusText)]),y(Tt,Gt)};O(_e,Tt=>{e(oe).isDownloading&&e(oe).progress?Tt(we):Tt(ue,!1)})}i(Wn),i(vn),i(mr),V((Tt,Gt)=>{ht(Un,1,`absolute -top-px -left-px w-2 h-2 border-l border-t ${e(ve)?"border-blue-500/50":e(sr)?"border-red-500/50":e(Ar)?"border-yellow-500/50":e(lr)?"border-green-500/50":"border-teal-500/50"}`),ht(Lr,1,`absolute -top-px -right-px w-2 h-2 border-r border-t ${e(ve)?"border-blue-500/50":e(sr)?"border-red-500/50":e(Ar)?"border-yellow-500/50":e(lr)?"border-green-500/50":"border-teal-500/50"}`),ht(Zr,1,`absolute -bottom-px -left-px w-2 h-2 border-l border-b ${e(ve)?"border-blue-500/50":e(sr)?"border-red-500/50":e(Ar)?"border-yellow-500/50":e(lr)?"border-green-500/50":"border-teal-500/50"}`),ht(jn,1,`absolute -bottom-px -right-px w-2 h-2 border-r border-b ${e(ve)?"border-blue-500/50":e(sr)?"border-red-500/50":e(Ar)?"border-yellow-500/50":e(lr)?"border-green-500/50":"border-teal-500/50"}`),ht(vn,1,`bg-exo-dark-gray/60 border border-l-2 ${e(ve)?"border-blue-500/30 border-l-blue-400":e(sr)?"border-red-500/30 border-l-red-400":e(Ar)?"border-exo-yellow/30 border-l-yellow-400":e(lr)?"border-green-500/30 border-l-green-400":"border-teal-500/30 border-l-teal-400"} p-3`),ht(hn,1,`w-1.5 h-1.5 ${e(ve)?"bg-blue-400 animate-pulse":e(sr)?"bg-red-400":e(Ar)?"bg-yellow-400 animate-pulse":e(lr)?"bg-green-400":"bg-teal-400"} rounded-full shadow-[0_0_6px_currentColor]`),L(ya,Tt),L(wa,Gt),L(ke,`${e(cr).sharding??""} (${e(cr).instanceType??""})`)},[()=>Qe().slice(0,8).toUpperCase(),()=>q(ir())]),Ee("mouseenter",mr,()=>Y(Wt,Qe(),!0)),Ee("mouseleave",mr,()=>Y(Wt,null)),y(Oe,mr)}),i(Je),i(Er),y(or,Er)};O(Te,or=>{e(st)>0&&or(gr)})}i(Bt),V(()=>L(re,`${e(it)??""} ${e(it)===1?"NODE":"NODES"}`)),oa(1,Bt,()=>Bf,()=>({x:100,duration:400,easing:If})),y(wt,Bt)};O(vt,wt=>{e(a)&&wt(It)})}i(f),oa(1,b,()=>Ua,()=>({duration:300,delay:100})),y(h,f)};O(kt,h=>{e(n)?h(Et,!1):h(At)})}i(rt),i(G),y(t,G),qr()}fn(["click","keydown","mousedown","touchstart"]);export{R0 as component};
